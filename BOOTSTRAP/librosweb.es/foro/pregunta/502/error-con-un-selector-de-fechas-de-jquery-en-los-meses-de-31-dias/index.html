<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Error con un selector de fechas de jQuery en los meses de 31 días</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Error con un selector de fechas de jQuery en los meses de 31 días">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-4-2" class="forum forum_discussion"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                    <div class="module module-ad module-ad-responsive module-ad-top">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>


    <div itemscope="" itemtype="http://schema.org/Article">
        <div id="discussion" class="col-sm-9 ">
            <h1 class="title" itemprop="name">Error con un selector de fechas de jQuery en los meses de 31 días</h1>

            <div id="discussion-content" itemprop="description">
                <p>Hola:</p>
<p>Tengo un problema con un <em>datepicker</em> creado con jQuery. En mi versión local funciona correctamente, el problema está en el servidor de producción. El problema es el siguiente:</p>
<p>Tengo un formulario que coge dos fechas (entrada y salida). Cuando cojo un mes con más de 30 días, al darle enviar me resta un día del de salida y de entrada.</p>
<p>Ejemplo:</p>
<p>Esperada:
fecha entrada: 30/03
fecha salida: 31/03</p>
<p>Resultado:
fecha entrada: 29/03
fecha salida: 30/03</p>
<p>Pero el problema no solo es ese, sino que tengo otro formulario con las mismas características (de hecho, el mismo código JavaScript, solo cambian los css) y este funciona correctamente. Probé a cambiar el formulario de la página que no funciona a la que si, pero nada. Os dejo el código:</p>
<p>Formulario que funciona:</p>
<pre class="html5 code"><span class="sc2">&lt;<span class="kw2">form</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;reserva&quot;</span> <span class="kw3">action</span><span class="sy0">=</span><span class="st0">&quot;#&quot;</span>   <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;contenido col-md-12&quot;</span> role<span class="sy0">=</span><span class="st0">&quot;form&quot;</span> <span class="kw3">method</span><span class="sy0">=</span><span class="st0">&quot;post&quot;</span> <span class="br0">&#123;</span><span class="br0">&#123;</span> form_enctype<span class="br0">&#40;</span>formulario<span class="br0">&#41;</span> <span class="br0">&#125;</span><span class="br0">&#125;</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">br</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;form-group&quot;</span>&gt;</span>
            {{ form_label (formulario.fechaEntrada, '' ,{'label_attr':{'class':' contact col-sm-1 col-xs-3 control-label'}}) }}
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-3 reserva&quot;</span>&gt;</span>
                <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-12 input-group&quot;</span>&gt;</span>
                    {{ form_widget (formulario.fechaEntrada,{'id':'datestart','attr':{'class':'form-control input-reserva'}}) }}
                    <span class="sc2">&lt;<span class="kw2">span</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;input-group-addon&quot;</span>&gt;&lt;<span class="kw2">i</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;datestartButton&quot;</span> <span class="kw3">onclick</span><span class="sy0">=</span><span class="st0">&quot;$('#datestart').datepicker();$('#datestart').datepicker('show');&quot;</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;cursor: pointer&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;fa fa-calendar fa-fw black&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">i</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">span</span>&gt;</span>
                <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
                {{ form_errors (formulario.fechaEntrada) }}
&nbsp;
            <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-1&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
            {{ form_label (formulario.fechaSalida,'',{'label_attr':{'class':'contact col-sm-1 col-xs-3 control-label'}}) }}
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-3 reserva&quot;</span>&gt;</span>
                <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-12 input-group&quot;</span>&gt;</span>
                    {{ form_widget (formulario.fechaSalida,{'id':'dateend','attr':{'class':'form-control input-reserva'}}) }}
                    <span class="sc2">&lt;<span class="kw2">span</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;input-group-addon&quot;</span>&gt;&lt;<span class="kw2">i</span> <span class="kw3">onclick</span><span class="sy0">=</span><span class="st0">&quot;$('#dateend').datepicker();$('#dateend').datepicker('show');&quot;</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;cursor: pointer&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;fa fa-calendar fa-fw black&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">i</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">span</span>&gt;</span>
&nbsp;
                <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
                {{ form_errors (formulario.fechaSalida) }}
            <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
                <span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot; reserva pull-right btn btn-default  botones btn-booking&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;Change dates&quot;</span><span class="sy0">/</span>&gt;</span>
        <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
        {{ form_rest(formulario) }}
&nbsp;
    <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">form</span>&gt;</span></pre>
<p>Formulario que no funciona:</p>
<pre class="html5 code"><span class="sc2">&lt;<span class="kw2">form</span> <span class="kw3">action</span><span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-md-3 col-xs-10 reservas-portada &quot;</span> role<span class="sy0">=</span><span class="st0">&quot;form&quot;</span> <span class="kw3">method</span><span class="sy0">=</span><span class="st0">&quot;post&quot;</span> <span class="br0">&#123;</span><span class="br0">&#123;</span> form_enctype<span class="br0">&#40;</span>formulario<span class="br0">&#41;</span> <span class="br0">&#125;</span><span class="br0">&#125;</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;contenido-formulario&quot;</span>&gt;</span>
            <span class="sc2">&lt;<span class="kw2">br</span>&gt;</span>
            <span class="sc2">&lt;<span class="kw2">span</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;titulo-reserva&quot;</span> itemprop<span class="sy0">=</span><span class="st0">&quot;legalName&quot;</span>&gt;</span>{{ plantilla.empresa }}<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">span</span>&gt;</span>
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;clearfix&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
            <span class="sc2">&lt;<span class="kw2">br</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;form-group col-md-11&quot;</span>&gt;</span>
            {{ form_label (formulario.fechaEntrada, '' ,{'label_attr':{'class':'col-sm-4 col-lg-5 col-xs-4 control-label'}}) }}
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-6 col-lg-7 col-xs-6 input-group&quot;</span>&gt;</span>
                {{ form_widget (formulario.fechaEntrada,{'id':'datestart','attr':{'class':'form-control input-reserva'}}) }}
                <span class="sc2">&lt;<span class="kw2">span</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;input-group-addon&quot;</span>&gt;&lt;<span class="kw2">i</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;datestartButton&quot;</span> <span class="kw3">onclick</span><span class="sy0">=</span><span class="st0">&quot;$('#datestart').datepicker();$('#datestart').datepicker('show');&quot;</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;cursor: pointer&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;fa fa-calendar fa-fw black&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">i</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">span</span>&gt;</span>
            <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
            {{ form_errors(formulario.fechaEntrada) }}
&nbsp;
        <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;clearfix&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;form-group col-md-11&quot;</span>&gt;</span>
            {{ form_label (formulario.fechaSalida, '' ,{'label_attr':{'class':'col-sm-4 col-lg-5 col-xs-4 control-label'}}) }}
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;col-sm-6 col-lg-7 col-xs-6 input-group&quot;</span>&gt;</span>
                {{ form_widget (formulario.fechaSalida,{'id':'dateend','attr':{'class':'form-control input-reserva'}}) }}
                <span class="sc2">&lt;<span class="kw2">span</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;input-group-addon&quot;</span>&gt;&lt;<span class="kw2">i</span> <span class="kw3">onclick</span><span class="sy0">=</span><span class="st0">&quot;$('#dateend').datepicker();$('#dateend').datepicker('show');&quot;</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;cursor: pointer&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;fa fa-calendar fa-fw black&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">i</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">span</span>&gt;</span>
&nbsp;
            <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
            {{ form_errors(formulario.fechaSalida) }}
        <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
            <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;clearfix&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;btn-reservas&quot;</span>&gt;</span>
             <span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;btn btn-default botones btn-booking&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;Check Availability&quot;</span><span class="sy0">/</span>&gt;</span>
        <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">br</span>&gt;</span>
        <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;clearfix&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
        {{ form_rest(formulario) }}
&nbsp;
        <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
    <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">form</span>&gt;</span></pre>
<p>Javascript:</p>
<pre class="javascript code">$<span class="br0">&#40;</span>document<span class="br0">&#41;</span>.<span class="me1">ready</span><span class="br0">&#40;</span><span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
    $<span class="br0">&#40;</span><span class="st0">&quot;#datestart&quot;</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
        dateFormat<span class="sy0">:</span> <span class="st0">&quot;dd/mm/yy&quot;</span><span class="sy0">,</span>
        minDate<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span>
        onSelect<span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span>date<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">var</span> date2 <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">'#datestart'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'getDate'</span><span class="br0">&#41;</span><span class="sy0">;</span>
            date2.<span class="me1">setDate</span><span class="br0">&#40;</span>date2.<span class="me1">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
            $<span class="br0">&#40;</span><span class="st0">'#dateend'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'setDate'</span><span class="sy0">,</span> date2<span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="co1">//sets minDate to dt1 date + 1</span>
            $<span class="br0">&#40;</span><span class="st0">'#dateend'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'option'</span><span class="sy0">,</span> <span class="st0">'minDate'</span><span class="sy0">,</span> date2<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    $<span class="br0">&#40;</span><span class="st0">'#dateend'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
        dateFormat<span class="sy0">:</span> <span class="st0">&quot;dd/mm/yy&quot;</span><span class="sy0">,</span>
        onClose<span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">var</span> dt1 <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">'#datestart'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'getDate'</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">var</span> dt2 <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">'#dateend'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'getDate'</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="co1">//check to prevent a user from entering a date below date of dt1</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>dt2 <span class="sy0">&lt;=</span> dt1<span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">var</span> minDate <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">'#dateend'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'option'</span><span class="sy0">,</span> <span class="st0">'minDate'</span><span class="br0">&#41;</span><span class="sy0">;</span>
                $<span class="br0">&#40;</span><span class="st0">'#dateend'</span><span class="br0">&#41;</span>.<span class="me1">datepicker</span><span class="br0">&#40;</span><span class="st0">'setDate'</span><span class="sy0">,</span> minDate<span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>La web en cuestión: <a href="http://uhuruheightsa.com/">http://uhuruheightsa.com/</a></p>
            </div>

                            <div id="discussion-tags">
                    <h3>Etiquetas</h3>
                    <ul class="tags-list">
                                                                <li><a href="/foro/error/">error</a></li>
                                            <li><a href="/foro/formularios/">formularios</a></li>
                                            <li><a href="/foro/javascript/">javascript</a></li>
                                            <li><a href="/foro/jquery/">jquery</a></li>
                                        </ul>
                </div>
                    </div>

        <div id="discussion-attributes" class="col-sm-3">
            <div class="row">
                <p class="col-xs-3 col-sm-12 avatar">
                    <img width="73" height="73" itemprop="image"
                     src="http://pbs.twimg.com/profile_images/505328542633037824/zOqj96RK_bigger.jpeg" />
                </p>

                <p class="col-xs-8 col-sm-12 col-md-12">
                    <span class="login">@TsubasaAkai</span>
                    <meta itemprop="author" content="Carlos" />

                    <span class="published">8 de marzo de 2015</span>
                    <meta itemprop="dateCreated" content="2015-03-08T19:01:00+01:00" />
                </p>

                <p id="discussion-actions" class="col-sm-12">
                                    </p>
            </div>
        </div>
    </div>
    
    <div id="discussion-comments" class="col-sm-12">
                    <h2>Respuestas</h2>

                            <div class="row comment"  id="respuesta-1">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-1" title="Enlace permanente a esta respuesta">#1</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_1_html">
                        <p>He probado el <em>datepicker</em> en la web que comentas y todo parece que funciona bien. No tengo ningún problema con las fechas que selecciono, incluso en los meses de 31 días.</p>
<p>En cualquier caso, como el formulario que muestras parece correcto y el código JavaScript dices que te funciona perfectamente en otros proyectos, ¿es posible que el error se encuentre en la propia aplicación del backend? Si haces un <code>dump()</code> en el controlador que procesa el formulario, ¿te llegan mal las fechas a ese punto ... o llegan bien y el problema sucede después?</p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/1616936371/avatar_normal.png" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @javiereguiluz
                                </span>

                                <span class="published">
                                    08-mar-15 19:37
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-2">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-2" title="Enlace permanente a esta respuesta">#2</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_2_html">
                        <p>Yo lo acabo de probar y me falla. Si en la portada pongo</p>
<p>fecha de entrada: 31/03/2015
fecha de salida: 01/04/2015</p>
<p>luego en la pantalla de seleccionar habitación me pone:</p>
<p>fecha de entrada: 30/03/2015
fecha de salida: 31/03/2015</p>
<p>La cuestión es que en local funciona y el dump es correcto (en local).</p>
<p>¿Puede ser algun plugin de pagespeed de google que afecta a los JS?</p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/505328542633037824/zOqj96RK_normal.jpeg" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @TsubasaAkai
                                </span>

                                <span class="published">
                                    08-mar-15 20:14
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-3">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-3" title="Enlace permanente a esta respuesta">#3</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_3_html">
                        <p>Cuando selecciono el <code>31/03/2015</code>, al inspeccionar el elemento <code>&lt;input&gt;</code> con el navegador, veo que el valor de su atributo <code>value</code> es exactamente <code>31/03/2015</code>, así que parece que esa parte funciona bien.</p>
<p>Sin embargo, leyendo <a href="http://stackoverflow.com/questions/9509360/datepicker-date-off-by-one-day">esta pregunta de StackOverflow</a> veo que hablan del mismo problema que te sucede a ti. En una de las respuestas le aconsejan que utilice el formato completo de fecha y hora (con la hora a cero) para evitar esos problemas:</p>
<pre class="javascript code"><span class="co1">// en vez de esto</span>
<span class="kw1">new</span> <span class="kw4">Date</span><span class="br0">&#40;</span><span class="st0">'2015-03-31'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// usa esto</span>
<span class="kw1">new</span> <span class="kw4">Date</span><span class="br0">&#40;</span><span class="st0">'2015-03-31T00:00:00'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/1616936371/avatar_normal.png" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @javiereguiluz
                                </span>

                                <span class="published">
                                    08-mar-15 20:30
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-4">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-4" title="Enlace permanente a esta respuesta">#4</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_4_html">
                        <p>Siento abusar, pero no tengo ni idea de dónde poner eso.</p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/505328542633037824/zOqj96RK_normal.jpeg" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @TsubasaAkai
                                </span>

                                <span class="published">
                                    08-mar-15 21:37
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-5">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-5" title="Enlace permanente a esta respuesta">#5</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_5_html">
                        <p>Lo lógico parece que sería configurar este formato de fecha en el propio código JavaScript. Sin embargo, he intentado forzarlo en el navegador y la página me ha devuelto el formulario con los errores generados desde el servidor. Así que te aconsejo en el controlador que procesa el formulario, manipules las fechas antes de utilizarlas en la consulta que realices.</p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/1616936371/avatar_normal.png" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @javiereguiluz
                                </span>

                                <span class="published">
                                    08-mar-15 22:28
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-6">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-6" title="Enlace permanente a esta respuesta">#6</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_6_html">
                        <p>Al final encontré la solución yéndome a dormir. Cuando me desperté probé a forzarle la <em>timezone</em> en el formulario y al mostrar las fechas por pantalla:</p>
<pre class="php code"><span class="re0">$builder</span>
    <span class="sy0">-&gt;</span><span class="me1">add</span><span class="br0">&#40;</span><span class="st_h">'fechaEntrada'</span><span class="sy0">,</span> <span class="st_h">'date'</span><span class="sy0">,</span> <span class="br0">&#91;</span>
        <span class="st_h">'widget'</span> <span class="sy0">=&gt;</span> <span class="st_h">'single_text'</span><span class="sy0">,</span>
        <span class="st_h">'format'</span> <span class="sy0">=&gt;</span> <span class="st_h">'dd/MM/yyyy'</span><span class="sy0">,</span>
        <span class="st_h">'model_timezone'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Europe/Madrid'</span><span class="sy0">,</span>
        <span class="st_h">'view_timezone'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Europe/Madrid'</span><span class="sy0">,</span>
        <span class="st_h">'label'</span> <span class="sy0">=&gt;</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">translator</span><span class="sy0">-&gt;</span><span class="me1">trans</span><span class="br0">&#40;</span><span class="st_h">'booking.form.checkin'</span><span class="br0">&#41;</span><span class="sy0">,</span>
        <span class="st_h">'attr'</span> <span class="sy0">=&gt;</span> <span class="br0">&#91;</span><span class="st_h">'class'</span> <span class="sy0">=&gt;</span> <span class="st_h">'datepicker'</span><span class="sy0">,</span> <span class="st_h">'id'</span> <span class="sy0">=&gt;</span> <span class="st_h">'datestart'</span><span class="br0">&#93;</span><span class="sy0">,</span>
    <span class="br0">&#93;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="sy0">-&gt;</span><span class="me1">add</span><span class="br0">&#40;</span><span class="st_h">'fechaSalida'</span><span class="sy0">,</span> <span class="st_h">'date'</span><span class="sy0">,</span> <span class="br0">&#91;</span>
        <span class="st_h">'widget'</span> <span class="sy0">=&gt;</span> <span class="st_h">'single_text'</span><span class="sy0">,</span>
        <span class="st_h">'format'</span> <span class="sy0">=&gt;</span> <span class="st_h">'dd/MM/yyyy'</span><span class="sy0">,</span>
        <span class="st_h">'model_timezone'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Europe/Madrid'</span><span class="sy0">,</span>
        <span class="st_h">'view_timezone'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Europe/Madrid'</span><span class="sy0">,</span>
        <span class="st_h">'label'</span> <span class="sy0">=&gt;</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">translator</span><span class="sy0">-&gt;</span><span class="me1">trans</span><span class="br0">&#40;</span><span class="st_h">'booking.form.checkout'</span><span class="br0">&#41;</span><span class="sy0">,</span>
        <span class="st_h">'attr'</span> <span class="sy0">=&gt;</span> <span class="br0">&#91;</span><span class="st_h">'class'</span> <span class="sy0">=&gt;</span> <span class="st_h">'datepicker'</span><span class="sy0">,</span> <span class="st_h">'id'</span> <span class="sy0">=&gt;</span> <span class="st_h">'dateend'</span><span class="br0">&#93;</span>
    <span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="sy0">;</span></pre>
<p>Y en en twig:</p>
<pre class="twig code"><span class="kw6"><span class="br0">&#123;</span><span class="br0">&#123;</span></span> <span class="re0">pre</span><span class="re1">.fechaSalida</span> <span class="sy0">|</span> <span class="kw2">date</span> <span class="br0">&#40;</span><span class="st0">'d/m/Y'</span>,<span class="st0">&quot;Europe/Madrid&quot;</span><span class="br0">&#41;</span><span class="kw6"><span class="br0">&#125;</span><span class="br0">&#125;</span></span></pre>
<p>Hay veces que para encontrar la respuesta sólo hay que dejar de pensar en el problema.</p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/505328542633037824/zOqj96RK_normal.jpeg" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @TsubasaAkai
                                </span>

                                <span class="published">
                                    09-mar-15 08:58
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-7">
                                        

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-7" title="Enlace permanente a esta respuesta">#7</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_7_html">
                        <p>Justo esta mañana he visto este issue en el repositorio de Symfony que creo que está muy relacionado con el problema que nos comentas: <a href="https://github.com/symfony/symfony/issues/12808">Date displayed as single_text is off by one</a></p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/1616936371/avatar_normal.png" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @javiereguiluz
                                </span>

                                <span class="published">
                                    09-mar-15 09:10
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                            <div class="row comment"  id="respuesta-8">
                                        <i id="ultimo"></i>

                    <div class="col-sm-1 col-md-1 permalink">
                        <a href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/#respuesta-8" title="Enlace permanente a esta respuesta">#8</a>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-md-8 content" id="comment_8_html">
                        <p>Pues muchas gracias por ayudarme!</p>
                    </div>

                    <div class="col-xs-12 col-sm-11 col-sm-offset-1 col-md-3 col-md-offset-0 comment-attributes">
                        <div class="row">
                            <p class="col-xs-2 col-sm-1 col-md-1 avatar">
                                <img width="48" height="48" src="http://pbs.twimg.com/profile_images/505328542633037824/zOqj96RK_normal.jpeg" />
                            </p>

                            <p class="col-xs-9 col-sm-9 col-md-10">
                                <span class="login">
                                    @TsubasaAkai
                                </span>

                                <span class="published">
                                    09-mar-15 09:39
                                </span>
                            </p>

                            <p class="col-sm-4 col-md-12 comment-actions">
                                                            </p>
                        </div>
                    </div>
                </div>
                    
                    <div id="btn-reply">
                <a rel="nofollow" href="/foro/pregunta/502/error-con-un-selector-de-fechas-de-jquery-en-los-meses-de-31-dias/responder/#tu-respuesta" class="btn btn-lg">
                    Responder pregunta
                </a>
            </div>
            </div>


                </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
