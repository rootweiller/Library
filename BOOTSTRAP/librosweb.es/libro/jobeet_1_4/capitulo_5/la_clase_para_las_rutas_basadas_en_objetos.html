<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>5.6. La clase para las rutas basadas en objetos (El tutorial Jobeet)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_5/la_clase_sfroute.html" />
                    <link rel="next" href="../capitulo_5/enrutamiento_en_acciones_y_plantillas.html" />
                <link rel="start" href="/libro/jobeet_1_4/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="5.6. La clase para las rutas basadas en objetos (El tutorial Jobeet)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page jobeet_1_4"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/jobeet_1_4/" itemprop="url">
                    <span itemprop="title">El tutorial Jobeet</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/jobeet_1_4/capitulo_5.html" itemprop="url">
                    <span itemprop="title">Capítulo 5. El sistema de enrutamiento</span>
                </a>
            </li>
        
            <li class="active">
                <span>5.6. La clase para las rutas basadas en objetos</span>
            </li>
        </ol>
    </div>

    <h1 id="la_clase_para_las_rutas_basadas_en_objetos" class="title">
        <span>5.6.</span> La clase para las rutas basadas en objetos
    </h1>

    

<p>La URI interna de la página de una oferta de trabajo es muy larga y bastante aburrida de escribir (<code>url_for('job/show?id='.$job-&gt;getId().'&amp;company='.$job-&gt;getCompany().'&amp;location='.$job-&gt;getLocation().'&amp;position='.$job-&gt;getPosition())</code>). Como se ha comentado en la sección anterior, es posible modificar la clase que utiliza cada ruta. En el caso de la ruta llamada <code>job_show_user</code>, se va a emplear <a href="http://www.symfony-project.org/api/1_2/sfPropelRoute">la clase sfPropelRoute</a>, ya que es una clase optimizada para las rutas que representan objetos Propel o colecciones de objetos Propel:</p>

<div class="code yaml">
<pre class="yaml"><span class="co4">job_show_user</span>:<span class="co3">
  url</span><span class="sy2">: </span>    /job/:company/:location/:id/:position<span class="co3">
  class</span><span class="sy2">: </span>  sfPropelRoute<span class="co3">
  options</span><span class="sy2">: </span><span class="br0">&#123;</span> model<span class="sy2">: </span>JobeetJob, type<span class="sy2">: </span>object <span class="br0">&#125;</span><span class="co3">
  param</span><span class="sy2">: </span>  <span class="br0">&#123;</span> module<span class="sy2">: </span>job, action<span class="sy2">: </span>show <span class="br0">&#125;</span><span class="co4">
  requirements</span>:<span class="co3">
    id</span><span class="sy2">: </span>\d+<span class="co3">
    sf_method</span><span class="sy2">: </span><span class="br0">&#91;</span>get<span class="br0">&#93;</span></pre>
</div>

<p>La opción <code>options</code> establece el comportamiento de la ruta. La opción <code>model</code> define la clase del modelo de Propel relacionada con la ruta (en este caso, <code>JobeetJob</code>) y la opción <code>type</code> indica que esta ruta está relacionada con un solo objeto. Si la ruta representara una colección de objetos, se debería utilizar el valor <code>list</code> en esta opción <code>type</code>.</p>

<p>Como la ruta <code>job_show_user</code> ahora está relacionada con <code>JobeetJob</code>, se puede simplificar la llamanda al helper <code>url_for()</code> de la siguiente manera:</p>

<div class="code php">
<pre class="php">url_for<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'sf_route'</span> <span class="sy0">=&gt;</span> <span class="st_h">'job_show_user'</span><span class="sy0">,</span> <span class="st_h">'sf_subject'</span> <span class="sy0">=&gt;</span> <span class="re0">$job</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre>
</div>

<p>Incluso se puede simplificar todavía más:</p>

<div class="code php">
<pre class="php">url_for<span class="br0">&#40;</span><span class="st_h">'job_show_user'</span><span class="sy0">,</span> <span class="re0">$job</span><span class="br0">&#41;</span></pre>
</div>

<div class="admonition note"><p><strong class="title">Nota</strong> La primera forma es útil cuando tienes que pasar más argumentos aparte del objeto.</p></div>

<p>Todo esto es posible porque todas las variables de la ruta tienen un método para acceder a su valor dentro de la clase <code>JobeetJob</code>. La variable <code>company</code> por ejemplo se sustituye por el valor devuelto por el método <code>getCompany()</code>.</p>

<p>Si observas el aspecto de las URL generadas, verás que todavía no son exactamente como queríamos:</p>

<div class="code code">
<pre class="code">http://jobeet.localhost/frontend_dev.php/job/Sensio+Labs/Paris%2C+France/1/Web+Developer</pre>
</div>

<p>El siguiente paso consiste en preparar los valores de cada columna para que se muestren correctamente en la URL, proceso que se conoce con el nombre de <em>slugify</em>, por lo que debemos sustituir todos los caracteres que no sean ASCII por un guión medio <code>-</code>. Para ello, abre el archivo <code>JobeetJob</code> y añade los siguientes métodos en la clase:</p>

<div class="code php">
<pre class="php"><span class="co1">// lib/model/JobeetJob.php</span>
<span class="kw2">public</span> <span class="kw2">function</span> getCompanySlug<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
  <span class="kw1">return</span> Jobeet<span class="sy0">::</span><span class="me2">slugify</span><span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getCompany</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">function</span> getPositionSlug<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
  <span class="kw1">return</span> Jobeet<span class="sy0">::</span><span class="me2">slugify</span><span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getPosition</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">function</span> getLocationSlug<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
  <span class="kw1">return</span> Jobeet<span class="sy0">::</span><span class="me2">slugify</span><span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getLocation</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>

<p>A continuación, crea un archivo llamado <code>lib/Jobeet.class.php</code> y añade el método <code>slugify</code> a la nueva clase:</p>

<div class="code php">
<pre class="php"><span class="co1">// lib/Jobeet.class.php</span>
<span class="kw2">class</span> Jobeet
<span class="br0">&#123;</span>
  static <span class="kw2">public</span> <span class="kw2">function</span> slugify<span class="br0">&#40;</span><span class="re0">$text</span><span class="br0">&#41;</span>
  <span class="br0">&#123;</span>
    <span class="co1">// replace all non letters or digits by -</span>
    <span class="re0">$text</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span><span class="br0">&#40;</span><span class="st_h">'/\W+/'</span><span class="sy0">,</span> <span class="st_h">'-'</span><span class="sy0">,</span> <span class="re0">$text</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// trim and lowercase</span>
    <span class="re0">$text</span> <span class="sy0">=</span> <span class="kw3">strtolower</span><span class="br0">&#40;</span><span class="kw3">trim</span><span class="br0">&#40;</span><span class="re0">$text</span><span class="sy0">,</span> <span class="st_h">'-'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">return</span> <span class="re0">$text</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div>

<div class="admonition note"><p><strong class="title">Nota</strong> Para optimizar un poco el sitio disponible, este tutorial no muestra la instrucción <code>&lt;?php</code> en los trozos de código que sólo incluyen PHP. Obviamente no te olvides de incluir esa instrucción cada vez que crees un archivo PHP.</p></div>

<p>Los cambios anteriores han creado tres métodos accesores <em>virtuales</em>: <code>getCompanySlug()</code>,
<code>getPositionSlug()</code> y <code>getLocationSlug()</code>. Los tres métodos devuelven el valor original de la columna de datos después de aplicarle el método <code>slugify()</code>. Por tanto, ahora la ruta <code>job_show_user</code> también puede hacer uso de estos métodos accesores para reemplazar los valores originales de cada columna por sus valores virtuales:</p>

<div class="code yaml">
<pre class="yaml"><span class="co4">job_show_user</span>:<span class="co3">
  url</span><span class="sy2">: </span>    /job/:company_slug/:location_slug/:id/:position_slug<span class="co3">
  class</span><span class="sy2">: </span>  sfPropelRoute<span class="co3">
  options</span><span class="sy2">: </span><span class="br0">&#123;</span> model<span class="sy2">: </span>JobeetJob, type<span class="sy2">: </span>object <span class="br0">&#125;</span><span class="co3">
  param</span><span class="sy2">: </span>  <span class="br0">&#123;</span> module<span class="sy2">: </span>job, action<span class="sy2">: </span>show <span class="br0">&#125;</span><span class="co4">
  requirements</span>:<span class="co3">
    id</span><span class="sy2">: </span>\d+<span class="co3">
    sf_method</span><span class="sy2">: </span><span class="br0">&#91;</span>get<span class="br0">&#93;</span></pre>
</div>

<p>Como acabamos de añadir una nueva clase, antes de refrescar la portada de Jobeet es necesario que borres la cache de Symfony:</p>

<div class="code cli">
<pre class="cli">$ php symfony cc</pre>
</div>

<p>Si vuelves a acceder a la portada de Jobeet, verás que las URL ahora sí que son tal y como las queríamos:</p>

<div class="code code">
<pre class="code">http://jobeet.localhost/frontend_dev.php/job/sensio-labs/paris-france/1/web-developer</pre>
</div>

<p>Todo lo anterior es sólo parte de lo que son capaces las rutas de Symfony. Las rutas pueden generar una URL en función de un objeto, pero también pueden obtener el objeto relacionado con una URL. El objeto relacionado se puede obtener mediante el método <code>getObject()</code> del objeto de la ruta. Cuando procesa una petición, el sistema de enrutamiento guarda el objeto relacionado con la ruta para que lo utilices en las acciones. Por tanto, modifica el método <code>executeShow()</code> para obtener el objeto <code>Jobeet</code> mediante el objeto de la ruta:</p>

<div class="code php">
<pre class="php"><span class="kw2">class</span> jobActions <span class="kw2">extends</span> sfActions
<span class="br0">&#123;</span>
  <span class="kw2">public</span> <span class="kw2">function</span> executeShow<span class="br0">&#40;</span>sfWebRequest <span class="re0">$request</span><span class="br0">&#41;</span>
  <span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">job</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getRoute</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">getObject</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">forward404Unless</span><span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">job</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// ...</span>
<span class="br0">&#125;</span></pre>
</div>

<p>Si tratas de obtener la oferta de trabajo relacionada con un <code>id</code> desconocido, verás una página de error 404, pero esta vez el mensaje ha cambiado:</p>

<div class="figure" id="figure_5_1">
    <img src="/img/jobeet_1_4/f0501.png" alt="Mensaje de error 404 cuando se utiliza sfPropelRoute" />

    <p class="caption"><strong>Figura 5.1</strong> Mensaje de error 404 cuando se utiliza sfPropelRoute</p>
</div>


<p>El motivo es que la excepción del error 404 se ha lanzado automáticamente desde el método <code>getRoute()</code>. Por tanto, puedes simplificar todavía más el método <code>executeShow</code>:</p>

<div class="code php">
<pre class="php"><span class="kw2">class</span> jobActions <span class="kw2">extends</span> sfActions
<span class="br0">&#123;</span>
  <span class="kw2">public</span> <span class="kw2">function</span> executeShow<span class="br0">&#40;</span>sfWebRequest <span class="re0">$request</span><span class="br0">&#41;</span>
  <span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">job</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getRoute</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">getObject</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// ...</span>
<span class="br0">&#125;</span></pre>
</div>

<div class="admonition note"><p><strong class="title">Nota</strong> Si no quieres que la ruta muestre un error de tipo 404, establece la opción <code>allow_empty</code> a <code>true</code> en la definición de esa ruta.</p></div>

<div class="admonition note"><p><strong class="title">Nota</strong> El objeto relacionado con la ruta no se carga de forma automática. Este objeto sólo se obtiene de la base de datos cuando se invoca el método <code>getRoute()</code>.</p></div>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_5/la_clase_sfroute.html">
                        <strong>&larr; Anterior</strong>
                        <small>5.5. La clase sfRoute</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_5/enrutamiento_en_acciones_y_plantillas.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>5.7. Enrutamiento en acciones y plantillas</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Comenzando el proyecto</a>
            </li>
                                                                                                                                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> El proyecto</a>
            </li>
                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> El modelo de datos</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> El controlador y la vista</a>
            </li>
                                                                                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_5.html">
                    <span>Capítulo 5.</span> El sistema de enrutamiento
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/urls.html">
                    <span>5.1.</span> URLs
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/configurando_el_enrutamiento.html">
                    <span>5.2.</span> Configurando el enrutamiento
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/personalizando_el_enrutamiento.html">
                    <span>5.3.</span> Personalizando el enrutamiento
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/requisitos.html">
                    <span>5.4.</span> Requisitos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/la_clase_sfroute.html">
                    <span>5.5.</span> La clase sfRoute
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_5/la_clase_para_las_rutas_basadas_en_objetos.html">
                    <span>5.6.</span> La clase para las rutas basadas en objetos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/enrutamiento_en_acciones_y_plantillas.html">
                    <span>5.7.</span> Enrutamiento en acciones y plantillas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/la_clase_para_las_colecciones_de_rutas.html">
                    <span>5.8.</span> La clase para las colecciones de rutas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/depurando_las_rutas.html">
                    <span>5.9.</span> Depurando las rutas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/rutas_por_defecto.html">
                    <span>5.10.</span> Rutas por defecto
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/nos_vemos_manana.html">
                    <span>5.11.</span> Nos vemos mañana
                </a>
            </li>
                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> Profundizando en el modelo</a>
            </li>
                                                                                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Trabajando con la página de cada categoría</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Pruebas unitarias</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Pruebas funcionales</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Los formularios</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Probando los formularios</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> El generador de la parte de administración</a>
            </li>
                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> El usuario</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> El día de descanso</a>
            </li>
                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Canales Atom</a>
            </li>
                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> Servicios web</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> El buscador</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> AJAX</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> Internacionalización y localización</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>20.</span> <a href="../capitulo_20.html"> Plugins</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>21.</span> <a href="../capitulo_21.html"> El día del diseño</a>
            </li>
                                            <li class="level-1">
                <span>22.</span> <a href="../capitulo_22.html"> La cache</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>23.</span> <a href="../capitulo_23.html"> Pasando a producción</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>24.</span> <a href="../capitulo_24.html"> Un repaso a Symfony</a>
            </li>
                                                                                                                                                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
