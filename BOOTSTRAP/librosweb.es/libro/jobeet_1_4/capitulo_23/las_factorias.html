<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>23.5. Las factorías (El tutorial Jobeet)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_23/modificando_la_estructura_de_directorios.html" />
                    <link rel="next" href="../capitulo_23/instalando_aplicaciones.html" />
                <link rel="start" href="/libro/jobeet_1_4/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="23.5. Las factorías (El tutorial Jobeet)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page jobeet_1_4"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
            <div class="module module-ad module-ad-responsive module-ad-top">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/jobeet_1_4/" itemprop="url">
                    <span itemprop="title">El tutorial Jobeet</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/jobeet_1_4/capitulo_23.html" itemprop="url">
                    <span itemprop="title">Capítulo 23. Pasando a producción</span>
                </a>
            </li>
        
            <li class="active">
                <span>23.5. Las factorías</span>
            </li>
        </ol>
    </div>

    <h1 id="las_factorias" class="title">
        <span>23.5.</span> Las factorías
    </h1>

    

<p>A lo largo del tutorial de Jobeet hemos hablado de los objetos internos de Symfony como <code>sfUser</code>, <code>sfRequest</code>, <code>sfResponse</code>, <code>sfI18N</code>, <code>sfRouting</code>, etc. El framework Symfony crea, configura y gestiona automáticamente todos estos objetos. Además, estos objetos siempre son accesibles a través del objeto <code>sfContext</code>, y como muchos otros elementos del framework, se pueden configurar a través de un archivo de configuración llamado <code>factories.yml</code>. Este archivo también permite establecer diferentes opciones para cada entorno.</p>

<p>Cuando <code>sfContext</code> inicializa las factorías, lee el contenido del archivo <code>factories.yml</code> para determinar el nombre de las clases (<code>class</code>) y los parámetros (<code>param</code>) que se pasan al constructor:</p>

<div class="code yaml">
<pre class="yaml"><span class="co4">response</span>:<span class="co3">
  class</span><span class="sy2">: </span>sfWebResponse<span class="co4">
  param</span>:<span class="co3">
    send_http_headers</span><span class="sy2">: </span>false</pre>
</div>

<p>El código anterior hace que cuando Symfony cree la factoría de los objetos de la respuesta, instancie un objeto de la clase <code>sfWebResponse</code> y pase <code>send_http_headers</code> como argumento al constructor.</p>

<p>Como puedes personalizar las factorías, es posible emplear tus propias clases para los objetos internos de Symfony en vez de los objetos por defecto. También puedes modificar el comportamiento de las clases por defecto variando los parámetros que se les pasan.</p>

<p>A continuación vamos a ver algunas de las configuraciones propias más interesantes.</p>

<h3 id="el_nombre_de_la_cookie">23.5.1. El nombre de la cookie</h3>

<p>Symfony utiliza una cookie para gestionar las sesiones de usuario. Por defecto, esta cookie se llama <code>symfony</code>, pero se puede modificar en el archivo <code>factories.yml</code>. Dentro de la sección <code>all</code>, añade lo siguiente para cambiar el nombre de la cookie por <code>jobeet</code>:</p>

<div class="code yaml">
<pre class="yaml"><span class="co1"># apps/frontend/config/factories.yml</span><span class="co4">
storage</span>:<span class="co3">
  class</span><span class="sy2">: </span>sfSessionStorage<span class="co4">
  param</span>:<span class="co3">
    session_name</span><span class="sy2">: </span>jobeet</pre>
</div>

<h3 id="como_se_guardan_las_sesiones">23.5.2. Cómo se guardan las sesiones</h3>

<p>La clase por defecto encargada de guardar las sesiones se llama <code>sfSessionStorage</code>. Esta clase hace uso del sistema de archivos para guardar toda la información de las sesiones. Si dispones de varios servidores web, quizás te interese centralizar el almacenamiento de las sesiones en una base de datos:</p>

<div class="code yaml">
<pre class="yaml"><span class="co1"># apps/frontend/config/factories.yml</span><span class="co4">
storage</span>:<span class="co3">
  class</span><span class="sy2">: </span>sfPDOSessionStorage<span class="co4">
  param</span>:<span class="co3">
    session_name</span><span class="sy2">: </span>jobeet<span class="co3">
    db_table</span><span class="sy2">: </span>    session<span class="co3">
    database</span><span class="sy2">: </span>    propel<span class="co3">
    db_id_col</span><span class="sy2">: </span>   id<span class="co3">
    db_data_col</span><span class="sy2">: </span> data<span class="co3">
    db_time_col</span><span class="sy2">: </span> time</pre>
</div>

<h3 id="el_tiempo_de_expiracion_de_las_sesiones">23.5.3. El tiempo de expiración de las sesiones</h3>

<p>El tiempo de expiración por defecto de las sesiones de usuario es de <code>1800</code> segundos. Si quieres modificarlo, hazlo en la sección <code>user</code>:</p>

<div class="code yaml">
<pre class="yaml"><span class="co1"># apps/frontend/config/factories.yml</span><span class="co4">
user</span>:<span class="co3">
  class</span><span class="sy2">: </span>myUser<span class="co4">
  param</span>:<span class="co3">
    timeout</span><span class="sy2">: </span><span class="nu0">1800</span></pre>
</div>

<h3 id="mensajes_de_log">23.5.4. Mensajes de log</h3>

<p>El entorno <code>prod</code> no genera por defecto ningún mensaje de log, ya que la clase utilizada por su <em>logger</em> es <code>sfNoLogger</code>:</p>

<div class="code yaml">
<pre class="yaml"><span class="co1"># apps/frontend/config/factories.yml</span><span class="co4">
prod</span>:<span class="co4">
  logger</span>:<span class="co3">
    class</span><span class="sy2">: </span>  sfNoLogger<span class="co4">
    param</span>:<span class="co3">
      level</span><span class="sy2">: </span>  err<span class="co3">
      loggers</span><span class="sy2">: </span>~</pre>
</div>

<p>Si quieres que se guarden los mensajes de log en algún archivo, puedes cambiar el nombre de la clase de su <em>logger</em> por <code>sfFileLogger</code>:</p>

<div class="code yaml">
<pre class="yaml"><span class="co1"># apps/frontend/config/factories.yml</span><span class="co4">
logger</span>:<span class="co3">
  class</span><span class="sy2">: </span>sfFileLogger<span class="co4">
  param</span>:<span class="co3">
    level</span><span class="sy2">: </span>error<span class="co3">
    file</span><span class="sy2">: </span> <span class="co2">%SF_LOG_DIR%/%SF_APP%_%SF_ENVIRONMENT%.log</span></pre>
</div>

<div class="admonition note"><p><strong class="title">Nota</strong> En el archivo de configuración <code>factories.yml</code>, las cadenas de texto con el formato <code>%XXX%</code> se reemplazan por su valor correspondiente del objeto <code>sfConfig</code>. Por tanto, utilizar <code>%SF_APP%</code> en un archivo de configuración es equivalente a utilizar <code>sfConfig::get('sf_app')</code> en el código PHP. Esta notación también se puede utilizar en el archivo <code>app.yml</code>. Su principal utilidad es que permite hacer referencia a la ruta de un directorio sin tener que escribir la ruta completa en el archivo de configuración (simplemente debes indicar <code>SF_ROOT_DIR</code>, <code>SF_WEB_DIR</code>, etc.)</p></div>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_23/modificando_la_estructura_de_directorios.html">
                        <strong>&larr; Anterior</strong>
                        <small>23.4. Modificando la estructura de directorios</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_23/instalando_aplicaciones.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>23.6. Instalando aplicaciones</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Comenzando el proyecto</a>
            </li>
                                                                                                                                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> El proyecto</a>
            </li>
                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> El modelo de datos</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> El controlador y la vista</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> El sistema de enrutamiento</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> Profundizando en el modelo</a>
            </li>
                                                                                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Trabajando con la página de cada categoría</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Pruebas unitarias</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Pruebas funcionales</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Los formularios</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Probando los formularios</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> El generador de la parte de administración</a>
            </li>
                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> El usuario</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> El día de descanso</a>
            </li>
                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Canales Atom</a>
            </li>
                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> Servicios web</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> El buscador</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> AJAX</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> Internacionalización y localización</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>20.</span> <a href="../capitulo_20.html"> Plugins</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>21.</span> <a href="../capitulo_21.html"> El día del diseño</a>
            </li>
                                            <li class="level-1">
                <span>22.</span> <a href="../capitulo_22.html"> La cache</a>
            </li>
                                                                                                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_23.html">
                    <span>Capítulo 23.</span> Pasando a producción
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_23/preparando_el_servidor_de_produccion.html">
                    <span>23.1.</span> Preparando el servidor de producción
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_23/las_librerias_de_symfony.html">
                    <span>23.2.</span> Las librerías de Symfony
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_23/ajustando_la_configuracion.html">
                    <span>23.3.</span> Ajustando la configuración
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_23/modificando_la_estructura_de_directorios.html">
                    <span>23.4.</span> Modificando la estructura de directorios
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_23/las_factorias.html">
                    <span>23.5.</span> Las factorías
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_23/instalando_aplicaciones.html">
                    <span>23.6.</span> Instalando aplicaciones
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_23/nos_vemos_manana.html">
                    <span>23.7.</span> Nos vemos mañana
                </a>
            </li>
                                            <li class="level-1">
                <span>24.</span> <a href="../capitulo_24.html"> Un repaso a Symfony</a>
            </li>
                                                                                                                                                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
