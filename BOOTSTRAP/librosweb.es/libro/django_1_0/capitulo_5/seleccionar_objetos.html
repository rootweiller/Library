<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>5.11. Seleccionar objetos (El libro de Django 1.0)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_5/insertar_y_actualizar_datos.html" />
                    <link rel="next" href="../capitulo_5/acotar_datos.html" />
                <link rel="start" href="/libro/django_1_0/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="5.11. Seleccionar objetos (El libro de Django 1.0)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page django_1_0"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/django_1_0/" itemprop="url">
                    <span itemprop="title">El libro de Django 1.0</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/django_1_0/capitulo_5.html" itemprop="url">
                    <span itemprop="title">Capítulo 5. Interactuar con una base de datos: Modelos</span>
                </a>
            </li>
        
            <li class="active">
                <span>5.11. Seleccionar objetos</span>
            </li>
        </ol>
    </div>

    <h1 id="seleccionar_objetos" class="title">
        <span>5.11.</span> Seleccionar objetos
    </h1>

    

<p>La creación y actualización de datos seguro es divertida, pero también es
inútil sin una forma de tamizar los datos. Ya hemos visto una forma de examinar
todos los datos de un determinado modelo:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="kw2">all</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: Addison-Wesley<span class="sy0">&gt;,</span> <span class="sy0">&lt;</span>Publisher: O<span class="st0">'Reilly&gt;, &lt;Publisher: Apress Publishing&gt;]</span></pre>
</div>

<p>Eso se traslada a esto en SQL:</p>

<div class="code sql">
<pre class="sql"><span class="kw1">SELECT</span>
    id<span class="sy0">,</span> name<span class="sy0">,</span> address<span class="sy0">,</span> city<span class="sy0">,</span> state_province<span class="sy0">,</span> country<span class="sy0">,</span> website
<span class="kw1">FROM</span> book_publisher;</pre>
</div>

<div class="admonition note"><p><strong class="title">Nota</strong> Nota que Django no usa <code>SELECT *</code> cuando busca datos y en cambio lista
todos los campos explícitamente. Esto es una decisión de diseño: en
determinadas circunstancias <code>SELECT *</code> puede ser lento, y (más importante)
listar los campos sigue el principio del Zen de Python: "Explícito es mejor
que implícito".</p>

<p>Para más sobre el Zen de Python, intenta escribiendo <code>import this</code> en el
prompt de Python.</p></div>

<p>Echemos un vistazo a cada parte de esta linea <code>Publisher.objects.all()</code>:</p>

<ul>
<li>En primer lugar, tenemos nuestro modelo definido, <code>Publisher</code>. Aquí no
hay nada extraño: cuando quieras buscar datos, usa el modelo para esto.</li>
<li><p>Luego, tenemos <code>objects</code>. Técnicamente, esto es un <em>administrador</em>
(<em>manager</em>). Los administradores son discutidos en el Apéndice B. Por
ahora, todo lo que necesitas saber es que los administradores se encargan
de todas las operaciones a "nivel de tablas" sobre los datos incluidos, y
lo más importante, las consultas.</p>

<p>Todos los modelos automáticamente obtienen un administrador <code>objects</code>;
debes usar el mismo cada vez que quieras consultar sobre una instancia del
modelo.</p></li>
<li>Finalmente, tenemos <code>all()</code>. Este es un método del administrador
<code>objects</code> que retorna todas las filas de la base de datos. Aunque este
objeto se <em>parece</em> a una lista, es realmente un <em>QuerySet</em> — un objeto
que representa algún conjunto de filas de la base de datos. El Apéndice C
describe QuerySets en detalle. Para el resto de este capítulo, sólo
trataremos estos como listas emuladas.</li>
</ul>

<p>Cualquier búsqueda en base de datos va a seguir esta pauta general — llamaremos
métodos del administrador adjunto al modelo en el cual queremos hacer nuestra
consulta.</p>

<h3 id="filtrar_datos">5.11.1. Filtrar datos</h3>

<p>Aunque obtener todos los objetos es algo que ciertamente tiene su utilidad, la
mayoría de las veces lo que vamos a necesitar es manejarnos sólo con un
subconjunto de los datos. Para ello usaremos el método <code>filter()</code>:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="kw2">filter</span><span class="br0">&#40;</span>name<span class="sy0">=</span><span class="st0">&quot;Apress Publishing&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: Apress Publishing<span class="sy0">&gt;</span><span class="br0">&#93;</span></pre>
</div>

<p><code>filter()</code> toma argumentos de palabra clave que son traducidos en las
cláusulas SQL <code>WHERE</code> apropiadas. El ejemplo anterior sería traducido en algo
como:</p>

<div class="code sql">
<pre class="sql"><span class="kw1">SELECT</span>
    id<span class="sy0">,</span> name<span class="sy0">,</span> address<span class="sy0">,</span> city<span class="sy0">,</span> state_province<span class="sy0">,</span> country<span class="sy0">,</span> website
<span class="kw1">FROM</span> book_publisher
<span class="kw1">WHERE</span> name <span class="sy0">=</span> <span class="st0">'Apress Publishing'</span>;</pre>
</div>

<p>Puedes pasarle a <code>filter()</code> múltiples argumentos para reducir las cosas aún
más:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="kw2">filter</span><span class="br0">&#40;</span>country<span class="sy0">=</span><span class="st0">&quot;U.S.A.&quot;</span><span class="sy0">,</span> state_province<span class="sy0">=</span><span class="st0">&quot;CA&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: Apress Publishing<span class="sy0">&gt;</span><span class="br0">&#93;</span></pre>
</div>

<p>Esos múltiples argumentos son traducidos a cláusulas SQL <code>AND</code>. Por lo tanto
el ejemplo en el fragmento de código se traduce a lo siguiente:</p>

<div class="code sql">
<pre class="sql"><span class="kw1">SELECT</span>
    id<span class="sy0">,</span> name<span class="sy0">,</span> address<span class="sy0">,</span> city<span class="sy0">,</span> state_province<span class="sy0">,</span> country<span class="sy0">,</span> website
<span class="kw1">FROM</span> book_publisher
<span class="kw1">WHERE</span> country <span class="sy0">=</span> <span class="st0">'U.S.A.'</span> <span class="kw1">AND</span> state_province <span class="sy0">=</span> <span class="st0">'CA'</span>;</pre>
</div>

<p>Notar que por omisión la búsqueda usa el operador SQL <code>=</code> para realizar
búsquedas exactas. Existen también otros tipos de búsquedas:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="kw2">filter</span><span class="br0">&#40;</span>name__contains<span class="sy0">=</span><span class="st0">&quot;press&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: Apress Publishing<span class="sy0">&gt;</span><span class="br0">&#93;</span></pre>
</div>

<p>Notar el doble guión bajo entre <code>name</code> y <code>contains</code>. Del mismo modo que
Python, Django usa el doble guión bajo para indicar que algo "mágico" está
sucediendo — aquí la parte <code>__contains</code> es traducida por Django en una
sentencia SQL <code>LIKE</code>:</p>

<div class="code sql">
<pre class="sql"><span class="kw1">SELECT</span>
    id<span class="sy0">,</span> name<span class="sy0">,</span> address<span class="sy0">,</span> city<span class="sy0">,</span> state_province<span class="sy0">,</span> country<span class="sy0">,</span> website
<span class="kw1">FROM</span> book_publisher
<span class="kw1">WHERE</span> name <span class="kw1">LIKE</span> <span class="st0">'%press%'</span>;</pre>
</div>

<p>Hay disponibles varios otos tipos de búsqueda, incluyendo <code>icontains</code> (<code>LIKE</code> 
no sensible a diferencias de mayúsculas/minúsculas), <code>startswith</code> y <code>endswith</code>,
y <code>range</code> (consultas SQL <code>BETWEEN</code>). El Apéndice C describe en detalle todos
esos tipos de búsqueda.</p>

<h3 id="obtener_objetos_individuales">5.11.2. Obtener objetos individuales</h3>

<p>En ocasiones desearás obtener un único objeto. Para esto existe el método
<code>get()</code>:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">get</span><span class="br0">&#40;</span>name<span class="sy0">=</span><span class="st0">&quot;Apress Publishing&quot;</span><span class="br0">&#41;</span>
<span class="sy0">&lt;</span>Publisher: Apress Publishing<span class="sy0">&gt;</span></pre>
</div>

<p>En lugar de una lista (o más bien, un QuerySet), este método retorna un objeto
individual. Debido a eso, una consulta cuyo resultado sean múltiples objetos
causará una excepción:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">get</span><span class="br0">&#40;</span>country<span class="sy0">=</span><span class="st0">&quot;U.S.A.&quot;</span><span class="br0">&#41;</span>
Traceback <span class="br0">&#40;</span>most recent call last<span class="br0">&#41;</span>:
    ...
<span class="kw2">AssertionError</span>: get<span class="br0">&#40;</span><span class="br0">&#41;</span> returned more than one Publisher -- it returned <span class="nu0">2</span><span class="sy0">!</span></pre>
</div>

<p>Una consulta que no retorne objeto alguno también causará una excepción:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">get</span><span class="br0">&#40;</span>name<span class="sy0">=</span><span class="st0">&quot;Penguin&quot;</span><span class="br0">&#41;</span>
Traceback <span class="br0">&#40;</span>most recent call last<span class="br0">&#41;</span>:
    ...
<span class="me1">DoesNotExist</span>: Publisher matching query does <span class="kw1">not</span> exist.</pre>
</div>

<h3 id="ordenar_datos">5.11.3. Ordenar datos</h3>

<p>A medida que juegas con los ejemplos anteriores, podrías descubrir que los
objetos son devueltos en lo que parece ser un orden aleatorio. No estás
imaginándote cosas, hasta ahora no le hemos indicado a la base de datos cómo
ordenar sus resultados, de manera que simplemente estamos recibiendo datos con
algún orden arbitrario seleccionado por la base de datos.</p>

<p>Eso es, obviamente, un poco ingenuo. No quisiéramos que una página Web que
muestra una lista de editores estuviera ordenada aleatoriamente. Así que, en la
práctica, probablemente querremos usar <code>order_by()</code> para reordenar nuestros
datos en listas más útiles:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">order_by</span><span class="br0">&#40;</span><span class="st0">&quot;name&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: Addison-Wesley<span class="sy0">&gt;,</span> <span class="sy0">&lt;</span>Publisher: Apress Publishing<span class="sy0">&gt;,</span> <span class="sy0">&lt;</span>Publisher: O<span class="st0">'Reilly&gt;]</span></pre>
</div>

<p>Esto no se ve muy diferente del ejemplo de <code>all()</code> anterior, pero el SQL
incluye ahora un ordenamiento específico:</p>

<div class="code sql">
<pre class="sql"><span class="kw1">SELECT</span>
    id<span class="sy0">,</span> name<span class="sy0">,</span> address<span class="sy0">,</span> city<span class="sy0">,</span> state_province<span class="sy0">,</span> country<span class="sy0">,</span> website
<span class="kw1">FROM</span> book_publisher
<span class="kw1">ORDER</span> <span class="kw1">BY</span> name;</pre>
</div>

<p>Podemos ordenar por cualquier campo que deseemos:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">order_by</span><span class="br0">&#40;</span><span class="st0">&quot;address&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: O<span class="st0">'Reilly&gt;, &lt;Publisher: Apress Publishing&gt;, &lt;Publisher: Addison-Wesley&gt;]
&nbsp;
&gt;&gt;&gt; Publisher.objects.order_by(&quot;state_province&quot;)
[&lt;Publisher: Apress Publishing&gt;, &lt;Publisher: Addison-Wesley&gt;, &lt;Publisher: O'</span>Reilly<span class="sy0">&gt;</span><span class="br0">&#93;</span></pre>
</div>

<p>y por múltiples campos:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">order_by</span><span class="br0">&#40;</span><span class="st0">&quot;state_provice&quot;</span><span class="sy0">,</span> <span class="st0">&quot;address&quot;</span><span class="br0">&#41;</span>
 <span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: Apress Publishing<span class="sy0">&gt;,</span> <span class="sy0">&lt;</span>Publisher: O<span class="st0">'Reilly&gt;, &lt;Publisher: Addison-Wesley&gt;]</span></pre>
</div>

<p>También podemos especificar un ordenamiento inverso antecediendo al nombre del
campo un prefijo <code>-</code> (el símbolo menos):</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="me1">order_by</span><span class="br0">&#40;</span><span class="st0">&quot;-name&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: O<span class="st0">'Reilly&gt;, &lt;Publisher: Apress Publishing&gt;, &lt;Publisher: Addison-Wesley&gt;]</span></pre>
</div>

<p>Aunque esta flexibilidad es útil, usar <code>order_by()</code> todo el tiempo puede ser
demasiado repetitivo. La mayor parte del tiempo querrás ordenar por un
determinado campo. Es esos casos Django te permite anexar al modelo un 
ordenamiento por omisión para el mismo:</p>

<div class="code python">
<pre class="python"><span class="kw1">class</span> Publisher<span class="br0">&#40;</span>models.<span class="me1">Model</span><span class="br0">&#41;</span>:
    name <span class="sy0">=</span> models.<span class="me1">CharField</span><span class="br0">&#40;</span>maxlength<span class="sy0">=</span><span class="nu0">30</span><span class="br0">&#41;</span>
    address <span class="sy0">=</span> models.<span class="me1">CharField</span><span class="br0">&#40;</span>maxlength<span class="sy0">=</span><span class="nu0">50</span><span class="br0">&#41;</span>
    city <span class="sy0">=</span> models.<span class="me1">CharField</span><span class="br0">&#40;</span>maxlength<span class="sy0">=</span><span class="nu0">60</span><span class="br0">&#41;</span>
    state_province <span class="sy0">=</span> models.<span class="me1">CharField</span><span class="br0">&#40;</span>maxlength<span class="sy0">=</span><span class="nu0">30</span><span class="br0">&#41;</span>
    country <span class="sy0">=</span> models.<span class="me1">CharField</span><span class="br0">&#40;</span>maxlength<span class="sy0">=</span><span class="nu0">50</span><span class="br0">&#41;</span>
    website <span class="sy0">=</span> models.<span class="me1">URLField</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="kw1">def</span> <span class="kw4">__str__</span><span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
        <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">name</span>
&nbsp;
    <span class="kw1">class</span> Meta:
        ordering <span class="sy0">=</span> <span class="br0">&#91;</span><span class="st0">&quot;name&quot;</span><span class="br0">&#93;</span></pre>
</div>

<p>Este fragmento <code>ordering = ["name"]</code> le indica a Django que a menos que se
proporcione un ordenamiento mediante <code>order_by()</code>, todos los editores deberán
ser ordenados por su nombre.</p>

<div class="admonition note"><p><strong class="title">Nota</strong> Django usa esta <code>class Meta</code> interna como un lugar en el cual se pueden
especificar metadatos  adicionales acerca de un modelo. Es completamente
opcional, pero puede realizar algunas cosas muy útiles. Examina el Apéndice
B para conocer las opciones que puede poner bajo <code>Meta</code>.</p></div>

<h3 id="encadenar_busquedas">5.11.4. Encadenar búsquedas</h3>

<p>Has visto cómo puedes filtrar datos y has visto cómo ordenarlos. En ocasiones,
por supuesto, vas a desear realizar ambas cosas. En esos casos simplemente
"encadenas" las búsquedas entre sí:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> Publisher.<span class="me1">objects</span>.<span class="kw2">filter</span><span class="br0">&#40;</span>country<span class="sy0">=</span><span class="st0">&quot;U.S.A.&quot;</span><span class="br0">&#41;</span>.<span class="me1">order_by</span><span class="br0">&#40;</span><span class="st0">&quot;-name&quot;</span><span class="br0">&#41;</span>
<span class="br0">&#91;</span><span class="sy0">&lt;</span>Publisher: O<span class="st0">'Reilly&gt;, &lt;Publisher: Apress Publishing&gt;, &lt;Publisher: Addison-Wesley&gt;]</span></pre>
</div>

<p>Como podrías esperar, esto se traduce a una consulta SQL conteniendo tanto un
<code>WHERE</code> como un <code>ORDER BY</code>:</p>

<div class="code sql">
<pre class="sql"><span class="kw1">SELECT</span>
    id<span class="sy0">,</span> name<span class="sy0">,</span> address<span class="sy0">,</span> city<span class="sy0">,</span> state_province<span class="sy0">,</span> <span class="sy0">..</span> code<span class="sy0">-</span>block:: sqlcountry<span class="sy0">,</span> website
<span class="kw1">FROM</span> book_publisher
<span class="kw1">WHERE</span> country <span class="sy0">=</span> <span class="st0">'U.S.A.'</span>
<span class="kw1">ORDER</span> <span class="kw1">BY</span> name <span class="kw1">DESC</span>;</pre>
</div>

<p>Puedes encadenar consultas en forma consecutiva tantas veces como desees. No
existe un límite para esto.</p>



            <div class="module module-ad module-ad-responsive module-ad-bottom">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_5/insertar_y_actualizar_datos.html">
                        <strong>&larr; Anterior</strong>
                        <small>5.10. Insertar y actualizar datos</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_5/acotar_datos.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>5.12. Acotar datos</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Introducción a Django</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> Empezando</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Los principios de las páginas Web dinámicas</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> El sistema de plantillas de Django</a>
            </li>
                                                                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_5.html">
                    <span>Capítulo 5.</span> Interactuar con una base de datos: Modelos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/la_manera_simple_de_hacer_una_consulta_a_la_base_de_datos.html">
                    <span>5.1.</span> La manera simple de hacer una consulta a la base de datos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/el_patron_de_diseno_mtv.html">
                    <span>5.2.</span> El patrón de diseño MTV
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/configuracion_de_la_base_de_datos.html">
                    <span>5.3.</span> Configuración de la base de datos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/tu_primera_aplicacion.html">
                    <span>5.4.</span> Tu primera aplicación
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/definir_modelos_en_python.html">
                    <span>5.5.</span> Definir modelos en Python
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/tu_primer_modelo.html">
                    <span>5.6.</span> Tu primer modelo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/instalar_el_modelo.html">
                    <span>5.7.</span> Instalar el modelo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/acceso_basico_a_datos.html">
                    <span>5.8.</span> Acceso básico a datos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/agregar_strings_de_representacion_del_modelo.html">
                    <span>5.9.</span> Agregar strings de representación del modelo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/insertar_y_actualizar_datos.html">
                    <span>5.10.</span> Insertar y actualizar datos
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_5/seleccionar_objetos.html">
                    <span>5.11.</span> Seleccionar objetos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/acotar_datos.html">
                    <span>5.12.</span> Acotar datos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/realizar_cambios_en_el_esquema_de_una_base_de_datos.html">
                    <span>5.13.</span> Realizar cambios en el esquema de una base de datos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_5/que_sigue.html">
                    <span>5.14.</span> ¿Qué sigue?
                </a>
            </li>
                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> El sitio de Administración Django</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Procesamiento de formularios</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Vistas avanzadas y URLconfs</a>
            </li>
                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Vistas genéricas</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Extender el sistema de plantillas</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Generación de contenido no HTML</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Sesiones, usuario e inscripciones</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Cache</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> Otros sub-frameworks contribuidos</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Middleware</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> Integración con Base de datos y Aplicaciones existentes</a>
            </li>
                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> Extender la Interfaz de Administración de Django</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> Internacionalización</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> Seguridad</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>20.</span> <a href="../capitulo_20.html"> Puesta en marcha de Django en un servidor</a>
            </li>
                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
