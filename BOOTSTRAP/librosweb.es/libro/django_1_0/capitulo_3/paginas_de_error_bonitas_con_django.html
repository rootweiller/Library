<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>3.7. Páginas de error bonitas con Django (El libro de Django 1.0)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_3/tu_segunda_vista_urls_dinamicas.html" />
                    <link rel="next" href="../capitulo_3/que_sigue.html" />
                <link rel="start" href="/libro/django_1_0/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="3.7. Páginas de error bonitas con Django (El libro de Django 1.0)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page django_1_0"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/django_1_0/" itemprop="url">
                    <span itemprop="title">El libro de Django 1.0</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/django_1_0/capitulo_3.html" itemprop="url">
                    <span itemprop="title">Capítulo 3. Los principios de las páginas Web dinámicas</span>
                </a>
            </li>
        
            <li class="active">
                <span>3.7. Páginas de error bonitas con Django</span>
            </li>
        </ol>
    </div>

    <h1 id="paginas_de_error_bonitas_con_django" class="title">
        <span>3.7.</span> Páginas de error bonitas con Django
    </h1>

    

<p>Tomémonos un momento para admirar la bonita aplicación web que hemos creado
hasta ahora ... y ahora ¡rompámosla! Introduzcamos deliberadamente un error de
Python en el archivo <code>views.py</code> comentando la línea <code>offset = int(offset)</code>
de la vista <code>hours_ahead</code>:</p>

<div class="code python">
<pre class="python"><span class="kw1">def</span> hours_ahead<span class="br0">&#40;</span>request<span class="sy0">,</span> offset<span class="br0">&#41;</span>:
    <span class="co1">#offset = int(offset)</span>
    dt <span class="sy0">=</span> <span class="kw3">datetime</span>.<span class="kw3">datetime</span>.<span class="me1">now</span><span class="br0">&#40;</span><span class="br0">&#41;</span> + <span class="kw3">datetime</span>.<span class="me1">timedelta</span><span class="br0">&#40;</span>hours<span class="sy0">=</span>offset<span class="br0">&#41;</span>
    html <span class="sy0">=</span> <span class="st0">&quot;&lt;html&gt;&lt;body&gt;In %s hour(s), it will be %s.&lt;/body&gt;&lt;/html&gt;&quot;</span> % <span class="br0">&#40;</span>offset<span class="sy0">,</span> dt<span class="br0">&#41;</span>
    <span class="kw1">return</span> HttpResponse<span class="br0">&#40;</span>html<span class="br0">&#41;</span></pre>
</div>

<p>Ejecuta el servidor de desarrollo y navega a <code>/time/plus/3/</code>. Verás una página
de error con mucha información significativa, incluyendo el mensaje
<code>TypeError</code> mostrado en la parte superior de la página: <code>"unsupported type
for timedelta hours component: str"</code>.</p>

<p>¿Qué ha ocurrido? Bueno, la función <code>datetime.timedelta</code> espera que el
parámetro <code>hours</code> sea un entero, y hemos comentado la línea de código que
realiza la conversión del <code>offset</code> a entero. Eso causa que
<code>datetime.timedelta</code> lance un <code>TypeError</code>. Es el típico pequeño <em>bug</em> que
todo programador comete en algún momento.</p>

<p>El punto de este ejemplo fue demostrar la página de error de Django. Dediquemos
un momento a explorar esta página y descubrir las distintas piezas de
información que nos brinda.</p>

<p>Aquí comentamos algunas cosas a destacar:</p>

<ul>
<li>En la parte superior de la página se muestra la información clave de la
excepción: el tipo y cualquier parámetro de la excepción (el mensaje
<code>"unsupported type"</code> en este caso), el archivo en el cuál la excepción
fue lanzada, y el número de línea que contiene el error.</li>
<li><p>Abajo de la información clave de la excepción, la página muestra el
<strong><em>traceback</em></strong> de Python para dicha excepción. Este es el
<strong><em>traceback</em></strong> estándar que se obtiene en el interprete de Python, sólo
que más interactivo. Por cada marco de la pila, Django muestra el nombre
del archivo, el nombre de la función/método, el número de línea, y el
código fuente de esa línea.</p>

<p>Haz click en la línea de código (en gris oscuro) para ver varias líneas
anteriores y posteriores a la línea errónea, lo que nos brinda un poco de
contexto.</p>

<p>Haz click en <em>"Locals vars"</em> debajo de cualquier marco de la pila para
ver la tabla de todas las variables locales y sus valores, en ese marco y
en la posición exacta de código en el cual fue lanzada la excepción. Esta
información de depuración es invaluable.</p></li>
<li>Nota el texto <em>"Switch to copy-and-paste view"</em> debajo de la cabecera
<em>"Traceback"</em>. Haz click en esas palabras, y el <strong><em>traceback</em></strong> cambiará a
una versión que te permitirá fácilmente copiar y pegar. Usando esto para
cuando necesitemos compartir el traceback de la excepción con otros para
obtener soporte técnico — como los amables colegas que encontraremos en
el canal de IRC o la lista de correo de Django.</li>
<li>A continuación, la sección <em>"Request information"</em> incluye una gran
cantidad de información sobre la petición Web que provocó el error:
información GET y POST, valores de las cookies y meta información como
las cabeceras CGI. El Apéndice H es una completa referencia sobre toda la información que contienen los objetos peticiones.
Más abajo, la sección <em>"Settings"</em> lista la configuración de la
instalación de Django en particular. El Apéndice E, cubre en detalle
los ajustes de configuración disponibles. Por ahora, sólo mira los
ajustes para tener una idea de la información disponible.</li>
</ul>

<p>La página de error de Django es capaz de mostrar más información en ciertos
casos especiales, como por ejemplo, en el caso de error de sintaxis en las
plantillas. Lo abordaremos más tarde, cuando discutamos el sistema de 
plantillas de Django. Por ahora, quita el comentario en la línea
<code>offset = int(offset)</code> para que la función de vista funcione normalmente de 
nuevo.</p>

<p>¿Eres el tipo de programador al que le gusta depurar con la ayuda de sentencias
<code>print</code> cuidadosamente colocadas? Puedes usar la página de error de Django
para hacer eso — sin la sentencia <code>print</code>. En cualquier punto de la vista,
temporalmente podemos insertar un <code>assert False</code> para provocar una página de
error. Luego, podremos ver las variables locales y el estado del programa. (Hay
maneras más avanzadas de depurar las vista en Django, lo explicaremos más
adelante, pero esto es la forma más rápida y fácil).</p>

<p>Finalmente, es obvio que la mayor parte de la información es delicada — expone
las entrañas del código fuente de Python, como también de la configuración de
Django — y sería una estupidez mostrarla al público en Internet. Una persona
con malas intenciones podría usar esto para intentar aplicar ingeniería inversa
en la aplicación Web y hacer cosas maliciosas. Por esta razón, la página de
error es mostrada sólo cuando el proyecto está en modo depuración. Explicaremos
cómo desactivar este modo más adelante. Por ahora, hay que tener en claro que
todos los proyectos de Django están en modo depuración automáticamente cuando
son creados. (¿Suena familiar? Los errores <em>"Page not found"</em>, descritos en la
sección "Errores 404", trabajan de manera similar.)</p>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_3/tu_segunda_vista_urls_dinamicas.html">
                        <strong>&larr; Anterior</strong>
                        <small>3.6. Tu segunda Vista: URLs dinámicas</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_3/que_sigue.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>3.8. ¿Qué sigue?</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Introducción a Django</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> Empezando</a>
            </li>
                                                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_3.html">
                    <span>Capítulo 3.</span> Los principios de las páginas Web dinámicas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/tu_primera_vista_contenido_dinamico.html">
                    <span>3.1.</span> Tu primera Vista: Contenido dinámico
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/mapeando_urls_a_vistas.html">
                    <span>3.2.</span> Mapeando URLs a Vistas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/como_procesa_una_peticion_django.html">
                    <span>3.3.</span> Cómo procesa una petición Django
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/urlconfs_y_el_acoplamiento_debil.html">
                    <span>3.4.</span> URLconfs y el acoplamiento débil
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/errores_404.html">
                    <span>3.5.</span> Errores 404
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/tu_segunda_vista_urls_dinamicas.html">
                    <span>3.6.</span> Tu segunda Vista: URLs dinámicas
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_3/paginas_de_error_bonitas_con_django.html">
                    <span>3.7.</span> Páginas de error bonitas con Django
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_3/que_sigue.html">
                    <span>3.8.</span> ¿Qué sigue?
                </a>
            </li>
                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> El sistema de plantillas de Django</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> Interactuar con una base de datos: Modelos</a>
            </li>
                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> El sitio de Administración Django</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Procesamiento de formularios</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Vistas avanzadas y URLconfs</a>
            </li>
                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Vistas genéricas</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Extender el sistema de plantillas</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Generación de contenido no HTML</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Sesiones, usuario e inscripciones</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Cache</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> Otros sub-frameworks contribuidos</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Middleware</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> Integración con Base de datos y Aplicaciones existentes</a>
            </li>
                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> Extender la Interfaz de Administración de Django</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> Internacionalización</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> Seguridad</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>20.</span> <a href="../capitulo_20.html"> Puesta en marcha de Django en un servidor</a>
            </li>
                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
