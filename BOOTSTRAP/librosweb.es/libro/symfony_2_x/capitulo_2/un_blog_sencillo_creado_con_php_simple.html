<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>2.1. Un blog sencillo creado con PHP simple (Symfony 2.4, el libro oficial)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                            
        <link rel="canonical" href="/libro/symfony_2_x/capitulo_2/un_blog_sencillo_creado_con_php_simple.html"/>
                                    <link rel="prev" href="../capitulo_2.html" />
                    <link rel="next" href="../capitulo_2/agregando_una_pagina_show_al_blog.html" />
                <link rel="start" href="/libro/symfony_2_4/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="2.1. Un blog sencillo creado con PHP simple (Symfony 2.4, el libro oficial)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page symfony_2_4"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/symfony_2_4/" itemprop="url">
                    <span itemprop="title">Symfony 2.4, el libro oficial</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/symfony_2_4/capitulo_2.html" itemprop="url">
                    <span itemprop="title">Capítulo 2. De PHP a Symfony2</span>
                </a>
            </li>
        
            <li class="active">
                <span>2.1. Un blog sencillo creado con PHP simple</span>
            </li>
        </ol>
    </div>

    <h1 id="un_blog_sencillo_creado_con_php_simple" class="title">
        <span>2.1.</span> Un blog sencillo creado con PHP simple
    </h1>

    

<p>En este capítulo, crearemos la típica aplicación de blog utilizando sólo PHP simple.</p>

<p>Para empezar, crea una página que muestre las entradas del blog que se han persistido en la base de datos. Escribirla en PHP simple es rápido, pero un poco <em>sucio</em>:</p>

<div class="code php">
<pre class="php"><span class="kw2">&lt;?php</span>
<span class="co1">// index.php</span>
&nbsp;
<span class="re0">$link</span> <span class="sy0">=</span> <span class="kw3">mysql_connect</span><span class="br0">&#40;</span><span class="st_h">'localhost'</span><span class="sy0">,</span> <span class="st_h">'myuser'</span><span class="sy0">,</span> <span class="st_h">'mypassword'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">mysql_select_db</span><span class="br0">&#40;</span><span class="st_h">'blog_db'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$result</span> <span class="sy0">=</span> <span class="kw3">mysql_query</span><span class="br0">&#40;</span><span class="st_h">'SELECT id, title FROM post'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="sy1">?&gt;</span>
&nbsp;
    &lt;html&gt;
        &lt;head&gt;
        &lt;title&gt;List of Posts&lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
        &lt;h1&gt;List of Posts&lt;/h1&gt;
        &lt;ul&gt;
            <span class="kw2">&lt;?php</span> <span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="kw3">mysql_fetch_assoc</span><span class="br0">&#40;</span><span class="re0">$result</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">:</span> <span class="sy1">?&gt;</span>
            &lt;li&gt;
                &lt;a href=&quot;/show.php?id=<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$row</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>&quot;&gt;
                    <span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$row</span><span class="br0">&#91;</span><span class="st_h">'title'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>
                    &lt;/a&gt;
            &lt;/li&gt;
            <span class="kw2">&lt;?php</span> <span class="kw1">endwhile</span><span class="sy0">;</span> <span class="sy1">?&gt;</span>
        &lt;/ul&gt;
        &lt;/body&gt;
    &lt;/html&gt;
&nbsp;
<span class="kw2">&lt;?php</span>
<span class="kw3">mysql_close</span><span class="br0">&#40;</span><span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>El código anterior es fácil de escribir y se ejecuta muy rápido, pero en cuanto la aplicación crece, es muy difícil de mantener. Sus principales problemas son los siguientes:</p>

<ul>
<li><strong>No hay comprobación de errores</strong>: ¿qué sucede si falla la conexión a la base de datos?</li>
<li><strong>Organización deficiente</strong>: si la aplicación crece, este único archivo cada vez será más difícil de mantener, hasta que finalmente sea imposible. ¿Dónde se debe colocar el código para manejar los formularios? ¿Cómo se pueden validar los datos? ¿Dónde debe ir el código para enviar mensajes de correo electrónico?</li>
<li><strong>Es difícil reutilizar el código</strong>: ya que todo está en un archivo, no hay manera de volver a utilizar alguna parte de la aplicación en otras páginas del blog.</li>
</ul>

<div class="admonition note"><p><strong class="title">Nota</strong> Otro problema no mencionado aquí es el hecho de que la base de datos está vinculada a MySQL. Aunque no se ha tratado aquí, Symfony2 integra <a href="http://www.doctrine-project.org">Doctrine</a>, una librería que permite abstraer el acceso a la base de datos y el manejo de la información.</p></div>

<p>Vamos a trabajar a continuación en la solución de estos y muchos otros problemas más.</p>

<h3 id="aislando_la_parte_de_la_vista">2.1.1. Aislando la parte de la vista</h3>

<p>El código se puede mejorar fácilmente separando la lógica de la aplicación (código PHP puro) y <em>"la parte de la vista"</em> o <em>"presentación"</em>, que está formada por todo lo relacionado con el código HTML:</p>

<div class="code php">
<pre class="php"><span class="kw2">&lt;?php</span>
<span class="co1">// index.php</span>
&nbsp;
<span class="re0">$link</span> <span class="sy0">=</span> <span class="kw3">mysql_connect</span><span class="br0">&#40;</span><span class="st_h">'localhost'</span><span class="sy0">,</span> <span class="st_h">'myuser'</span><span class="sy0">,</span> <span class="st_h">'mypassword'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">mysql_select_db</span><span class="br0">&#40;</span><span class="st_h">'blog_db'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$result</span> <span class="sy0">=</span> <span class="kw3">mysql_query</span><span class="br0">&#40;</span><span class="st_h">'SELECT id, title FROM post'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$posts</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="kw3">mysql_fetch_assoc</span><span class="br0">&#40;</span><span class="re0">$result</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="re0">$posts</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="re0">$row</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw3">mysql_close</span><span class="br0">&#40;</span><span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// incluye el código HTML de la vista</span>
<span class="kw1">require</span> <span class="st_h">'templates/list.php'</span><span class="sy0">;</span></pre>
</div>

<p>Ahora el código HTML está guardado en un archivo separado (<code>templates/list.php</code>). Este archivo contiene todo el código HTML junto con algunas pocas instrucciones PHP que utilizan la sintaxis alternativa recomendada para las plantillas PHP:</p>

<div class="code php">
<pre class="php">&lt;html&gt;
    &lt;head&gt;
    &lt;title&gt;List of Posts&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;h1&gt;List of Posts&lt;/h1&gt;
    &lt;ul&gt;
        <span class="kw2">&lt;?php</span> <span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$posts</span> <span class="kw1">as</span> <span class="re0">$post</span><span class="br0">&#41;</span><span class="sy0">:</span> <span class="sy1">?&gt;</span>
        &lt;li&gt;
            &lt;a href=&quot;/read?id=<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$post</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>&quot;&gt;
                <span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$post</span><span class="br0">&#91;</span><span class="st_h">'title'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>
                &lt;/a&gt;
        &lt;/li&gt;
        <span class="kw2">&lt;?php</span> <span class="kw1">endforeach</span><span class="sy0">;</span> <span class="sy1">?&gt;</span>
    &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
</div>

<p>Por convención, el archivo que contiene toda la lógica de la aplicación (<code>index.php</code>) se conoce como <em>"controlador"</em>. El término <em>controlador</em> es una palabra que se utiliza mucho, independientemente del lenguaje o plataforma que utilices. Simplemente se refiere a la zona de tu código que procesa la petición del usuario y prepara la respuesta.</p>

<p>En este caso, nuestro controlador obtiene los datos de la base de datos y, luego los incluye en una plantilla para presentarlos al usuario. Con el controlador aislado, podríamos cambiar fácilmente sólo el archivo de la plantilla si queremos servir los contenidos del blog en otro formato (por ejemplo, <code>list.json.php</code> para el formato <em>JSON</em>).</p>

<h3 id="aislando_la_logica_de_la_aplicacion_el_dominio">2.1.2. Aislando la lógica de la aplicación (<em>el dominio</em>)</h3>

<p>Por ahora la aplicación sólo contiene una página. Pero ¿qué pasa si una segunda página necesita utilizar la misma conexión a la base de datos, e incluso el mismo resultado de la búsqueda de las entradas del blog? La solución consiste en refactorizar el código para que todas estas funciones básicas de acceso a datos de la aplicación estén aisladas en un nuevo archivo llamado <code>model.php</code>:</p>

<div class="code php">
<pre class="php"><span class="kw2">&lt;?php</span>
<span class="co1">// model.php</span>
&nbsp;
<span class="kw2">function</span> open_database_connection<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$link</span> <span class="sy0">=</span> <span class="kw3">mysql_connect</span><span class="br0">&#40;</span><span class="st_h">'localhost'</span><span class="sy0">,</span> <span class="st_h">'myuser'</span><span class="sy0">,</span> <span class="st_h">'mypassword'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw3">mysql_select_db</span><span class="br0">&#40;</span><span class="st_h">'blog_db'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">return</span> <span class="re0">$link</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">function</span> close_database_connection<span class="br0">&#40;</span><span class="re0">$link</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw3">mysql_close</span><span class="br0">&#40;</span><span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">function</span> get_all_posts<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$link</span> <span class="sy0">=</span> open_database_connection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$result</span> <span class="sy0">=</span> <span class="kw3">mysql_query</span><span class="br0">&#40;</span><span class="st_h">'SELECT id, title FROM post'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="re0">$posts</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$row</span> <span class="sy0">=</span> <span class="kw3">mysql_fetch_assoc</span><span class="br0">&#40;</span><span class="re0">$result</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re0">$posts</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="re0">$row</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    close_database_connection<span class="br0">&#40;</span><span class="re0">$link</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">return</span> <span class="re0">$posts</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>

<div class="admonition tip"><p><strong class="title">Truco</strong> Se utiliza el nombre <code>model.php</code> para el archivo porque el acceso a la lógica y los datos de una aplicación se conoce tradicionalmente como la capa del <em>"modelo"</em>. En una aplicación bien organizada, la mayoría del código que representa tu <em>"lógica de negocio"</em> debe estar en el modelo (en lugar del controlador). Y, a diferencia de este ejemplo, sólo una parte (o ninguna) del modelo realmente está interesada en acceder a la base de datos.</p></div>

<p>El controlador (<code>index.php</code>) ahora es muy sencillo:</p>

<div class="code php">
<pre class="php"><span class="kw2">&lt;?php</span>
<span class="kw1">require_once</span> <span class="st_h">'model.php'</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$posts</span> <span class="sy0">=</span> get_all_posts<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">require</span> <span class="st_h">'templates/list.php'</span><span class="sy0">;</span></pre>
</div>

<p>Ahora, la única tarea del controlador es conseguir los datos de la capa del modelo de la aplicación (el modelo) y utilizar una plantilla para mostrar los datos.</p>

<p>Este es un ejemplo muy simple del patrón <em>modelo - vista - controlador</em>.</p>

<h3 id="aislando_el_diseno">2.1.3. Aislando el diseño</h3>

<p>La aplicación ahora está dividida en tres partes distintas, lo que nos ofrece varias ventajas y la oportunidad de volver a utilizar casi todo en diferentes páginas.</p>

<p>La única parte del código que no se puede reutilizar es el diseño HTML + CSS de la página. Vamos a solucionar este problema creando un nuevo archivo llamado <code>base.php</code>:</p>

<div class="code php">
<pre class="php">&lt;!-- templates/base.php --&gt;
&lt;html&gt;
    &lt;head&gt;
    &lt;title&gt;<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$title</span> <span class="sy1">?&gt;</span>&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    <span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$content</span> <span class="sy1">?&gt;</span>
    &lt;/body&gt;
&lt;/html&gt;</pre>
</div>

<p>La plantilla original (<code>templates/list.php</code>) ahora se puede simplificar para que utilice el archivo <code>base.php</code> anterior como base:</p>

<div class="code php">
<pre class="php"><span class="kw2">&lt;?php</span> <span class="re0">$title</span> <span class="sy0">=</span> <span class="st_h">'List of Posts'</span> <span class="sy1">?&gt;</span>
&nbsp;
<span class="kw2">&lt;?php</span> <span class="kw3">ob_start</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>
    &lt;h1&gt;List of Posts&lt;/h1&gt;
    &lt;ul&gt;
        <span class="kw2">&lt;?php</span> <span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$posts</span> <span class="kw1">as</span> <span class="re0">$post</span><span class="br0">&#41;</span><span class="sy0">:</span> <span class="sy1">?&gt;</span>
        &lt;li&gt;
            &lt;a href=&quot;/read?id=<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$post</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>&quot;&gt;
                <span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$post</span><span class="br0">&#91;</span><span class="st_h">'title'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>
                &lt;/a&gt;
        &lt;/li&gt;
        <span class="kw2">&lt;?php</span> <span class="kw1">endforeach</span><span class="sy0">;</span> <span class="sy1">?&gt;</span>
    &lt;/ul&gt;
<span class="kw2">&lt;?php</span> <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw3">ob_get_clean</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>
&nbsp;
<span class="kw2">&lt;?php</span> <span class="kw1">include</span> <span class="st_h">'base.php'</span> <span class="sy1">?&gt;</span></pre>
</div>

<p>El código anterior introducido una metodología que nos permite reutilizar el diseño. Desafortunadamente, para conseguirlo estamos obligados a utilizar en la plantilla algunas funciones de PHP poco recomendables (<code>ob_start()</code>, <code>ob_get_clean()</code>). Symfony2 utiliza un componente de plantillas (<code>Templating</code>) que nos permite realizar esto de una manera más <em>limpia</em> y sencilla. En breve lo verás en acción.</p>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_2.html">
                        <strong>&larr; Anterior</strong>
                        <small>Capítulo 2. De PHP a Symfony2</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_2/agregando_una_pagina_show_al_blog.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>2.2. Agregando una página <code>show</code> al blog</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Symfony2 y los fundamentos de HTTP</a>
            </li>
                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_2.html">
                    <span>Capítulo 2.</span> De PHP a Symfony2
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_2/un_blog_sencillo_creado_con_php_simple.html">
                    <span>2.1.</span> Un blog sencillo creado con PHP simple
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_2/agregando_una_pagina_show_al_blog.html">
                    <span>2.2.</span> Agregando una página <code>show</code> al blog
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_2/el_controlador_frontal_al_rescate.html">
                    <span>2.3.</span> El controlador frontal al rescate
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_2/mejorando_las_plantillas.html">
                    <span>2.4.</span> Mejorando las plantillas
                </a>
            </li>
                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Instalando y configurando Symfony2</a>
            </li>
                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> Creando páginas en Symfony2</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> El controlador</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> El enrutamiento</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Creando y utilizando plantillas</a>
            </li>
                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> La base de datos y Doctrine</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> La base de datos y Propel</a>
            </li>
                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Tests unitarios y funcionales</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Validación</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Formularios</a>
            </li>
                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Seguridad</a>
            </li>
                                                                                                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> La caché de HTTP</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Internacionalización</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> El contenedor de servicios</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> Mejorando el rendimiento</a>
            </li>
                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> El interior de Symfony2</a>
            </li>
                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> La API estable de Symfony2</a>
            </li>
                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
