<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>12.2. Validando formularios (Symfony 2.1, el libro oficial)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                            
        <link rel="canonical" href="/libro/symfony_2_x/capitulo_12/validando_formularios.html"/>
                                    <link rel="prev" href="../capitulo_12/creando_un_formulario_sencillo.html" />
                    <link rel="next" href="../capitulo_12/tipos_de_campo_predefinidos.html" />
                <link rel="start" href="/libro/symfony_2_1/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="12.2. Validando formularios (Symfony 2.1, el libro oficial)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page symfony_2_1"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/symfony_2_1/" itemprop="url">
                    <span itemprop="title">Symfony 2.1, el libro oficial</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/symfony_2_1/capitulo_12.html" itemprop="url">
                    <span itemprop="title">Capítulo 12. Formularios</span>
                </a>
            </li>
        
            <li class="active">
                <span>12.2. Validando formularios</span>
            </li>
        </ol>
    </div>

    <h1 id="validando_formularios" class="title">
        <span>12.2.</span> Validando formularios
    </h1>

    

<p>En la sección anterior, aprendiste cómo se envían los formularios con datos válidos o inválidos. En Symfony2, la validación se aplica sobre el objeto que está manejando el formulario (en este caso, el objeto de tipo <code>Task</code>). En otras palabras, no importa si el formulario es válido o no, lo que importa es que el objeto <code>$task</code> contenga información válida. El método <code>$form-&gt;isValid()</code> en realidad es un atajo que pregunta al objeto <code>$task</code> si tiene datos válidos o no.</p>

<p>La validación se realiza añadiendo un conjunto de reglas (llamadas <em>constraints</em>) a una clase. Como ejemplo, añade restricciones de validación para que el campo <code>task</code> no pueda estar vacío y para que el campo <code>dueDate</code> no pueda estar vacío y deba ser un objeto <code>DateTime</code> válido.</p>

<div class="tabbable">
  <ul class="nav nav-tabs"><li id="select_tab_1_e8d9b" class="active"><a data-toggle="tab active" href="#select_tab_1_e8d9b" onclick="document.getElementById('select_tab_1_e8d9b').className='active'; document.getElementById('tab_1_e8d9b').className='tab-pane active';document.getElementById('select_tab_2_e8d9b').className='';  document.getElementById('tab_2_e8d9b').className='tab-pane';document.getElementById('select_tab_3_e8d9b').className='';  document.getElementById('tab_3_e8d9b').className='tab-pane';document.getElementById('select_tab_4_e8d9b').className='';  document.getElementById('tab_4_e8d9b').className='tab-pane';return false;">YAML</a></li><li id="select_tab_2_e8d9b"><a data-toggle="tab" href="#select_tab_2_e8d9b" onclick="document.getElementById('select_tab_1_e8d9b').className='';  document.getElementById('tab_1_e8d9b').className='tab-pane';document.getElementById('select_tab_2_e8d9b').className='active'; document.getElementById('tab_2_e8d9b').className='tab-pane active';document.getElementById('select_tab_3_e8d9b').className='';  document.getElementById('tab_3_e8d9b').className='tab-pane';document.getElementById('select_tab_4_e8d9b').className='';  document.getElementById('tab_4_e8d9b').className='tab-pane';return false;">PHP (anotaciones)</a></li><li id="select_tab_3_e8d9b"><a data-toggle="tab" href="#select_tab_3_e8d9b" onclick="document.getElementById('select_tab_1_e8d9b').className='';  document.getElementById('tab_1_e8d9b').className='tab-pane';document.getElementById('select_tab_2_e8d9b').className='';  document.getElementById('tab_2_e8d9b').className='tab-pane';document.getElementById('select_tab_3_e8d9b').className='active'; document.getElementById('tab_3_e8d9b').className='tab-pane active';document.getElementById('select_tab_4_e8d9b').className='';  document.getElementById('tab_4_e8d9b').className='tab-pane';return false;">XML</a></li><li id="select_tab_4_e8d9b"><a data-toggle="tab" href="#select_tab_4_e8d9b" onclick="document.getElementById('select_tab_1_e8d9b').className='';  document.getElementById('tab_1_e8d9b').className='tab-pane';document.getElementById('select_tab_2_e8d9b').className='';  document.getElementById('tab_2_e8d9b').className='tab-pane';document.getElementById('select_tab_3_e8d9b').className='';  document.getElementById('tab_3_e8d9b').className='tab-pane';document.getElementById('select_tab_4_e8d9b').className='active'; document.getElementById('tab_4_e8d9b').className='tab-pane active';return false;">PHP</a></li></ul>
  <div class="tab-content">
    <div class="tab-pane active" id="tab_1_e8d9b">
<div class="code yaml">
<pre class="yaml"><span class="co1"># Acme/TaskBundle/Resources/config/validation.yml</span><span class="co4">
Acme\TaskBundle\Entity\Task</span>:<span class="co4">
    properties</span>:<span class="co4">
        task</span>:<span class="co3">
            - NotBlank</span><span class="sy2">: </span>~<span class="co4">
        dueDate</span>:<span class="co3">
            - NotBlank</span><span class="sy2">: </span>~<span class="co3">
            - Type</span><span class="sy2">: </span>\DateTime</pre>
</div>
</div>


<div class="tab-pane" id="tab_2_e8d9b">
<div class="code php">
<pre class="php"><span class="co1">// Acme/TaskBundle/Entity/Task.php</span>
<span class="kw2">use</span> Symfony\Component\Validator\Constraints <span class="kw1">as</span> <span class="kw3">Assert</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> Task
<span class="br0">&#123;</span>
    <span class="co4">/**
     * @Assert\NotBlank()
     */</span>
    <span class="kw2">public</span> <span class="re0">$task</span><span class="sy0">;</span>
&nbsp;
    <span class="co4">/**
     * @Assert\NotBlank()
     * @Assert\Type(&quot;\DateTime&quot;)
     */</span>
    <span class="kw2">protected</span> <span class="re0">$dueDate</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>
</div>


<div class="tab-pane" id="tab_3_e8d9b">
<div class="code xml">
<pre class="xml"><span class="sc-1">&lt;!-- Acme/TaskBundle/Resources/config/validation.xml --&gt;</span>
<span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">charset</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;constraint-mapping</span> <span class="re0">xmlns</span>=<span class="st0">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span> <span class="re0">xmlns:xsi</span>=<span class="st0">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="re0">xsi:schemaLocation</span>=<span class="st0">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;class</span> <span class="re0">name</span>=<span class="st0">&quot;Acme\TaskBundle\Entity\Task&quot;</span><span class="re2">&gt;</span></span>
        <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;task&quot;</span><span class="re2">&gt;</span></span>
            <span class="sc3"><span class="re1">&lt;constraint</span> <span class="re0">name</span>=<span class="st0">&quot;NotBlank&quot;</span> <span class="re2">/&gt;</span></span>
        <span class="sc3"><span class="re1">&lt;/property<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;dueDate&quot;</span><span class="re2">&gt;</span></span>
            <span class="sc3"><span class="re1">&lt;constraint</span> <span class="re0">name</span>=<span class="st0">&quot;NotBlank&quot;</span> <span class="re2">/&gt;</span></span>
            <span class="sc3"><span class="re1">&lt;constraint</span> <span class="re0">name</span>=<span class="st0">&quot;Type&quot;</span><span class="re2">&gt;</span></span>\DateTime<span class="sc3"><span class="re1">&lt;/constraint<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;/property<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/class<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/constraint-mapping<span class="re2">&gt;</span></span></span></pre>
</div>
</div>


<div class="tab-pane" id="tab_4_e8d9b">
<div class="code php">
<pre class="php"><span class="co1">// Acme/TaskBundle/Entity/Task.php</span>
<span class="kw2">use</span> Symfony\Component\Validator\Mapping\ClassMetadata<span class="sy0">;</span>
<span class="kw2">use</span> Symfony\Component\Validator\Constraints\NotBlank<span class="sy0">;</span>
<span class="kw2">use</span> Symfony\Component\Validator\Constraints\Type<span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> Task
<span class="br0">&#123;</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="kw2">public</span> static <span class="kw2">function</span> loadValidatorMetadata<span class="br0">&#40;</span>ClassMetadata <span class="re0">$metadata</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$metadata</span><span class="sy0">-&gt;</span><span class="me1">addPropertyConstraint</span><span class="br0">&#40;</span><span class="st_h">'task'</span><span class="sy0">,</span> <span class="kw2">new</span> NotBlank<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="re0">$metadata</span><span class="sy0">-&gt;</span><span class="me1">addPropertyConstraint</span><span class="br0">&#40;</span><span class="st_h">'dueDate'</span><span class="sy0">,</span> <span class="kw2">new</span> NotBlank<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="re0">$metadata</span><span class="sy0">-&gt;</span><span class="me1">addPropertyConstraint</span><span class="br0">&#40;</span><span class="st_h">'dueDate'</span><span class="sy0">,</span> <span class="kw2">new</span> Type<span class="br0">&#40;</span><span class="st_h">'\DateTime'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div>
</div>

  </div>
</div>

<p>¡Y ya está! Si ahora vuelves a enviar el formulario con datos no válidos, verás los correspondientes errores de validación en el formulario.</p>

<div class="admonition sidebar"><p><strong class="title"> Validación HTML5</strong> Al utilizar HTML5, muchos navegadores pueden aplicar reglas de validación sobre los formularios. La validación más común es la que se produce cuando un campo de formulario contiene el atributo <code>required</code> (que indica que es obligatorio rellenarlo). Los navegadores compatibles con HTML5 hacen que estos campos muestren un mensaje de error especial si el usuario trata de enviar el formulario sin rellenarlos.</p>

<p>Los formularios generados por Symfony2 aprovechan al máximo esta nueva característica añadiendo atributos HTML que provoquen la validación en el propio navegador. Esta validación del navegador se puede desactivar añadiendo el atributo <code>novalidate</code> de la etiqueta <code>&lt;form&gt;</code> o <code>formnovalidate</code> al botón de envío del formulario. Esto es especialmente útil cuando deseas probar cómo aplica la validación tu aplicación y el navegador no te deja enviar formularios con campos vacíos o mal rellenados.</p></div>

<p>La validación es una característica muy poderosa de Symfony2 y tiene su propio capítulo.</p>

<h3 id="grupos_de_validacion">12.2.1. Grupos de validación</h3>

<div class="admonition tip"><p><strong class="title">Truco</strong> Si no utilizas grupos en la validación de tus entidades y objetos, puedes saltarte esta sección.</p></div>

<p>Si tu objeto utiliza la validación de grupos, tendrás que especificar qué grupo debe utilizar el formulario para validar la información:</p>

<div class="code php">
<pre class="php"><span class="re0">$form</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">createFormBuilder</span><span class="br0">&#40;</span><span class="re0">$users</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span>
    <span class="st_h">'validation_groups'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'registration'</span><span class="br0">&#41;</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">add</span><span class="br0">&#40;</span><span class="sy0">...</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>Si además utilizas clases para definir los formularios (una buena práctica recomendada que se explica más adelante) entonces tendrás que agregar lo siguiente al método <code>setDefaultOptions()</code>:</p>

<div class="code php">
<pre class="php"><span class="kw2">use</span> Symfony\Component\OptionsResolver\OptionsResolverInterface<span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">function</span> setDefaultOptions<span class="br0">&#40;</span>OptionsResolverInterface <span class="re0">$resolver</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$resolver</span><span class="sy0">-&gt;</span><span class="me1">setDefaults</span><span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span>
        <span class="st_h">'validation_groups'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'registration'</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>

<p>En ambos casos, sólo se utilizará el grupo de validación <code>registration</code> para validar el objeto manejado por el formulario.</p>

<h3 id="grupos_que_dependen_de_la_informacion_enviada">12.2.2. Grupos que dependen de la información enviada</h3>

<p>También es posible utilizar un <em>callback</em> o un <em>closure</em> en la opción <code>validation_groups</code> para determinar el grupo de validación que se aplica utilizando lógica PHP:</p>

<div class="code php">
<pre class="php"><span class="kw2">use</span> Symfony\Component\OptionsResolver\OptionsResolverInterface<span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">function</span> setDefaultOptions<span class="br0">&#40;</span>OptionsResolverInterface <span class="re0">$resolver</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$resolver</span><span class="sy0">-&gt;</span><span class="me1">setDefaults</span><span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span>
        <span class="st_h">'validation_groups'</span> <span class="sy0">=&gt;</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Acme\\AcmeBundle\\Entity\\Client'</span><span class="sy0">,</span> <span class="st_h">'determineValidationGroups'</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>

<p>El código anterior hace que se ejecute el método estático <code>determineValidationGroups()</code>de la clase <code>Client</code> después de que haya comenzado el procesamiento del formulario enviado pero antes de que se ejecute la validación.</p>

<p>Este método recibe como argumento el objeto que representa al formulario. Si lo prefieres, puedes utilizar un <em>closure</em> en vez de el método de una clase para indicar toda la lógica directamente:</p>

<div class="code php">
<pre class="php"><span class="kw2">use</span> Symfony\Component\Form\FormInterface<span class="sy0">;</span>
<span class="kw2">use</span> Symfony\Component\OptionsResolver\OptionsResolverInterface<span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">function</span> setDefaultOptions<span class="br0">&#40;</span>OptionsResolverInterface <span class="re0">$resolver</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$resolver</span><span class="sy0">-&gt;</span><span class="me1">setDefaults</span><span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span>
        <span class="st_h">'validation_groups'</span> <span class="sy0">=&gt;</span> <span class="kw2">function</span><span class="br0">&#40;</span>FormInterface <span class="re0">$form</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="re0">$data</span> <span class="sy0">=</span> <span class="re0">$form</span><span class="sy0">-&gt;</span><span class="me1">getData</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span>Entity\Client<span class="sy0">::</span><span class="me2">TYPE_PERSON</span> <span class="sy0">==</span> <span class="re0">$data</span><span class="sy0">-&gt;</span><span class="kw3">getType</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'person'</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'company'</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_12/creando_un_formulario_sencillo.html">
                        <strong>&larr; Anterior</strong>
                        <small>12.1.  Creando un formulario sencillo</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_12/tipos_de_campo_predefinidos.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>12.3. Tipos de campo predefinidos</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Symfony2 y los fundamentos de HTTP</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> De PHP a Symfony2</a>
            </li>
                                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Instalando y configurando Symfony2</a>
            </li>
                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> Creando páginas en Symfony2</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> El controlador</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> El enrutamiento</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Creando y utilizando plantillas</a>
            </li>
                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> La base de datos y Doctrine</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> La base de datos y Propel</a>
            </li>
                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Tests unitarios y funcionales</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Validación</a>
            </li>
                                                                                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_12.html">
                    <span>Capítulo 12.</span> Formularios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/creando_un_formulario_sencillo.html">
                    <span>12.1.</span>  Creando un formulario sencillo
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_12/validando_formularios.html">
                    <span>12.2.</span> Validando formularios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/tipos_de_campo_predefinidos.html">
                    <span>12.3.</span> Tipos de campo predefinidos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/deduciendo_el_tipo_de_campo.html">
                    <span>12.4.</span> Deduciendo el tipo de campo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/mostrando_un_formulario_en_una_plantilla.html">
                    <span>12.5.</span> Mostrando un formulario en una plantilla
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/creando_clases_de_formulario.html">
                    <span>12.6.</span> Creando clases de formulario
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/definiendo_formularios_como_servicios.html">
                    <span>12.7.</span> Definiendo formularios como servicios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/formularios_y_doctrine.html">
                    <span>12.8.</span> Formularios y Doctrine
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/embebiendo_formularios.html">
                    <span>12.9.</span> Embebiendo formularios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/temas_para_formularios.html">
                    <span>12.10.</span> Temas para formularios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/proteccion_csrf.html">
                    <span>12.11.</span> Protección CSRF
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/usando_un_formulario_sin_clase.html">
                    <span>12.12.</span> Usando un formulario sin clase
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_12/consideraciones_finales.html">
                    <span>12.13.</span> Consideraciones finales
                </a>
            </li>
                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Seguridad</a>
            </li>
                                                                                                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> La caché de HTTP</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Internacionalización</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> El contenedor de servicios</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> Mejorando el rendimiento</a>
            </li>
                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> El interior de Symfony2</a>
            </li>
                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> La API estable de Symfony2</a>
            </li>
                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
