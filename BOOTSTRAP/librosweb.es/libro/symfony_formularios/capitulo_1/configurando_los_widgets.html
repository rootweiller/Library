<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>1.3. Configurando los widgets (Los formularios de Symfony 1.4)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_1/widgets.html" />
                    <link rel="next" href="../capitulo_2.html" />
                <link rel="start" href="/libro/symfony_formularios/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="1.3. Configurando los widgets (Los formularios de Symfony 1.4)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page symfony_formularios"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/symfony_formularios/" itemprop="url">
                    <span itemprop="title">Los formularios de Symfony 1.4</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/symfony_formularios/capitulo_1.html" itemprop="url">
                    <span itemprop="title">Capítulo 1. Creación de formularios</span>
                </a>
            </li>
        
            <li class="active">
                <span>1.3. Configurando los widgets</span>
            </li>
        </ol>
    </div>

    <h1 id="configurando_los_widgets" class="title">
        <span>1.3.</span> Configurando los widgets
    </h1>

    

<h3 id="opciones_de_los_widgets">1.3.1. Opciones de los widgets</h3>

<p>Si el sitio web que muestra el formulario de contacto dispone de varios responsables, puede ser interesante añadir una lista desplegable con diferentes temas de contacto para redirigir cada mensaje al responsable adecuado (ver figura 1-7). El listado 1-9 añade un nuevo campo llamado <code>asunto</code> mediante una lista desplegable creada con un widget de tipo <code>sfWidgetFormSelect</code>.</p>

<div class="figure" id="figure_1_7">
    <img src="/img/symfony_formularios/f0107.png" alt="Añadiendo un campo asunto en el formulario" />

    <p class="caption"><strong>Figura 1.7</strong> Añadiendo un campo asunto en el formulario</p>
</div>


<p><strong>Listado 1-9 - Añadiendo un campo <code>asunto</code> en el formulario</strong></p>

<div class="code php">
<pre class="php"><span class="kw2">class</span> ContactoForm <span class="kw2">extends</span> sfForm
<span class="br0">&#123;</span>
  <span class="kw2">protected</span> static <span class="re0">$asuntos</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'Asunto A'</span><span class="sy0">,</span> <span class="st_h">'Asunto B'</span><span class="sy0">,</span> <span class="st_h">'Asunto C'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">&#40;</span><span class="br0">&#41;</span>
  <span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">setWidgets</span><span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span>
      <span class="st_h">'nombre'</span>  <span class="sy0">=&gt;</span> <span class="kw2">new</span> sfWidgetFormInput<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span>
      <span class="st_h">'email'</span>   <span class="sy0">=&gt;</span> <span class="kw2">new</span> sfWidgetFormInput<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span>
      <span class="st_h">'asunto'</span>  <span class="sy0">=&gt;</span> <span class="kw2">new</span> sfWidgetFormSelect<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'choices'</span> <span class="sy0">=&gt;</span> <span class="kw2">self</span><span class="sy0">::</span><span class="re0">$asuntos</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span>
      <span class="st_h">'mensaje'</span> <span class="sy0">=&gt;</span> <span class="kw2">new</span> sfWidgetFormTextarea<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">widgetSchema</span><span class="sy0">-&gt;</span><span class="me1">setNameFormat</span><span class="br0">&#40;</span><span class="st_h">'contacto[%s]'</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div>

<div class="admonition sidebar"><p><strong class="title">La opción <code>choices</code> del widget <code>sfWidgetFormSelect</code></strong> PHP no considera diferentes los arrays normales y los arrays asociativos, por lo que el array utilizado en la opción <code>asunto</code> del código anterior es idéntico al siguiente:</p>

<div class="code php">
<pre class="php"><span class="re0">$asuntos</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="nu0">0</span> <span class="sy0">=&gt;</span> <span class="st_h">'Asunto A'</span><span class="sy0">,</span> <span class="nu0">1</span> <span class="sy0">=&gt;</span> <span class="st_h">'Asunto B'</span><span class="sy0">,</span> <span class="nu0">2</span> <span class="sy0">=&gt;</span> <span class="st_h">'Asunto C'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>El widget generado toma la clave del array como el atributo <code>value</code> de la etiqueta <code>&lt;option&gt;</code> y el valor del array como el contenido de la etiqueta:</p>

<div class="code html5">
<pre class="html5"><span class="sc2">&lt;<span class="kw2">select</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;contacto[asunto]&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;contacto_asunto&quot;</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">option</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;0&quot;</span>&gt;</span>Asunto A<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">option</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">option</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;1&quot;</span>&gt;</span>Asunto B<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">option</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">option</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;2&quot;</span>&gt;</span>Asunto C<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">option</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">select</span>&gt;</span></pre>
</div>

<p>Si quieres modificar el valor de los atributos <code>value</code>, debes añadir claves en el array utilizado:</p>

<div class="code php">
<pre class="php"><span class="re0">$asuntos</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'A'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Asunto A'</span><span class="sy0">,</span> <span class="st_h">'B'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Asunto B'</span><span class="sy0">,</span> <span class="st_h">'C'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Asunto C'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>Si se utiliza el array anterior, el código HTML generado es el siguiente:</p>

<div class="code html5">
<pre class="html5"><span class="sc2">&lt;<span class="kw2">select</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;contacto[asunto]&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;contacto_asunto&quot;</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">option</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;A&quot;</span>&gt;</span>Asunto A<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">option</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">option</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;B&quot;</span>&gt;</span>Asunto B<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">option</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">option</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;C&quot;</span>&gt;</span>Asunto C<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">option</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">select</span>&gt;</span></pre>
</div>

<p></p></div>

<p>El widget <code>sfWidgetFormSelect</code>, como todos los demás widgets, acepta como primer argumento una lista de opciones. A pesar de su nombre, las opciones pueden ser opcionales u obligatorios. El widget <code>sfWidgetFormSelect</code> dispone de una opción obligatoria llamada <code>choices</code>. A continuación se muestran las opciones disponibles para los widgets que ya hemos utilizado:</p>

<div class="table" id="table_1_2">

    <table>
<thead>
<tr>
  <th>Widget</th>
  <th>Opciones obligatorias</th>
  <th>Otras opciones</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>sfWidgetFormInput</code></td>
  <td>-</td>
  <td><code>type</code>: tipo de campo (por defecto, <code>text</code>)&#92; <code>is_hidden</code>: indica si el campo es oculto (por defecto, <code>false</code>)</td>
</tr>
<tr>
  <td><code>sfWidgetFormSelect</code></td>
  <td><code>choices</code>: opciones de la lista desplegable</td>
  <td><code>multiple</code>: la lista permite selecciones múltiples (por defecto, <code>false</code>)</td>
</tr>
<tr>
  <td><code>sfWidgetFormTextarea</code></td>
  <td>-</td>
  <td>-</td>
</tr>
</tbody>
</table>
</div>


<div class="admonition note"><p><strong class="title">Nota</strong> Si quieres conocer todas las opciones de un widget, puedes consultar la documentación de la API disponible online en http://www.symfony-project.org/api/1_2/. En la API se explican todas las opciones y todos sus valores por defecto. Para consultar por ejemplo las opciones del widget <code>sfWidgetFormSelect</code> debes acceder a http://www.symfony-project.org/api/1_2/sfWidgetFormSelect</p></div>

<h3 id="los_atributos_html_de_los_widgets">1.3.2. Los atributos HTML de los widgets</h3>

<p>Los widgets también aceptan como segundo argumento una lista de atributos HTML. De esta forma, esta opción permite personalizar las etiquetas HTML generadas para el formulario. El listado 1-10 muestra como añadir un atributo <code>class</code> al campo <code>email</code>.</p>

<p><strong>Listado 1-10 - Definiendo atributos HTML para un widget</strong></p>

<div class="code php">
<pre class="php"><span class="re0">$widgetEmail</span> <span class="sy0">=</span> <span class="kw2">new</span> sfWidgetFormInput<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'class'</span> <span class="sy0">=&gt;</span> <span class="st_h">'email'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Código HTML generado</span>
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;contacto[email]&quot;</span> <span class="kw2">class</span><span class="sy0">=</span><span class="st0">&quot;email&quot;</span> id<span class="sy0">=</span><span class="st0">&quot;contacto_email&quot;</span> <span class="sy0">/&gt;</span></pre>
</div>

<p>Los atributos HTML también permiten redefinir los identificadores generados automáticamente, como se muestra en el listado 1-11.</p>

<p><strong>Listado 1-11 - Redefiniendo el atributo <code>id</code></strong></p>

<div class="code php">
<pre class="php"><span class="re0">$widgetEmail</span> <span class="sy0">=</span> <span class="kw2">new</span> sfWidgetFormInput<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'class'</span> <span class="sy0">=&gt;</span> <span class="st_h">'email'</span><span class="sy0">,</span> <span class="st_h">'id'</span> <span class="sy0">=&gt;</span> <span class="st_h">'email'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Código HTML generado</span>
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;contacto[email]&quot;</span> <span class="kw2">class</span><span class="sy0">=</span><span class="st0">&quot;email&quot;</span> id<span class="sy0">=</span><span class="st0">&quot;email&quot;</span> <span class="sy0">/&gt;</span></pre>
</div>

<p>También es posible establecer el valor que muestran por defecto los campos utilizando el atributo <code>value</code> como se muestra en el listado 1-12.</p>

<p><strong>Listado 1-12 - Establecer valores por defecto de los widgets utilizando atributos HTML</strong></p>

<div class="code php">
<pre class="php"><span class="re0">$widgetEmail</span> <span class="sy0">=</span> <span class="kw2">new</span> sfWidgetFormInput<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'value'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Escribe tu email'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Código HTML generado</span>
<span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;contacto[email]&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;Escribe tu email&quot;</span> id<span class="sy0">=</span><span class="st0">&quot;contacto_email&quot;</span> <span class="sy0">/&gt;</span></pre>
</div>

<p>Esta opción funciona bien para los widgets de tipo <code>input</code>, pero es difícil de aplicar en los widgets de tipo <code>checkbox</code> o <code>radio</code> e incluso es imposible para uno de tipo <code>textarea</code>. La clase <code>sfForm</code> incluye métodos específicos para definir los valores por defecto de cada campo de una forma uniforme para cualquier tipo de widget.</p>

<div class="admonition note"><p><strong class="title">Nota</strong> Una buena práctica consiste en definir los atributos de HTML dentro de la plantilla y no en el formulario (donde también es posible hacerlo), para mantener la separación de las capas tal y como se verá en el capítulo 3.</p></div>

<h3 id="definir_los_valores_por_defecto_de_los_campos">1.3.3. Definir los valores por defecto de los campos</h3>

<p>En ocasiones es conveniente definir un valor por defecto para cada campo. El ejemplo típico es el mensaje de ayuda que se muestra en cada campo del formulario y que se oculta cuando el usuario se situa en ese campo. El listado 1-13 muestra cómo definir los valores por defecto a través de los métodos <code>setDefault()</code> y <code>setDefaults()</code>.</p>

<p><strong>Listado 1-13 - Establecer los valores por defecto en los widgets mediante los métodos <code>setDefault()</code> y <code>setDefaults()</code></strong></p>

<div class="code php">
<pre class="php"><span class="kw2">class</span> ContactoForm <span class="kw2">extends</span> sfForm
<span class="br0">&#123;</span>
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">&#40;</span><span class="br0">&#41;</span>
  <span class="br0">&#123;</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">setDefault</span><span class="br0">&#40;</span><span class="st_h">'email'</span><span class="sy0">,</span> <span class="st_h">'Escribe tu email'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">setDefaults</span><span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'email'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Escribe tu email'</span><span class="sy0">,</span> <span class="st_h">'nombre'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Escribe tu nombre'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div>

<p>Los métodos <code>setDefault()</code> y <code>setDefaults()</code> son muy útiles para definir los mismos valores por defecto para cada instancia del mismo formulario. Si se quiere modificar un objeto existente utilizando un formulario, los valores por defecto dependen de la instancia y por tanto, deben ser dinámicos. El listado 1-14 muestra cómo el constructor de la clase <code>sfForm</code> dispone de un primer argumento que establece dinámicamente los valores por defecto.</p>

<p><strong>Listado 1-14 - Establecer los valores por defecto de los widgets mediante el constructor de <code>sfForm</code></strong></p>

<div class="code php">
<pre class="php"><span class="kw2">public</span> <span class="kw2">function</span> executeIndex<span class="br0">&#40;</span><span class="re0">$peticion</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
  <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">formulario</span> <span class="sy0">=</span> <span class="kw2">new</span> ContactoForm<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="st_h">'email'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Escribe tu email'</span><span class="sy0">,</span> <span class="st_h">'nombre'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Escribe tu nombre'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  <span class="co1">// ...</span>
<span class="br0">&#125;</span></pre>
</div>

<div class="admonition sidebar"><p><strong class="title">Protección frente a XSS (Cross-Site Scripting)</strong> Cuando se establecen atributos HTML para los widgets o cuando se definen valores por defecto, la clase <code>sfForm</code> protege automáticamente estos valores contra ataques XSS al generar el código HTML. Esta protección no depende de la opción <code>escaping_strategy</code> configurada en el archivo <code>settings.yml</code>. Si el contenido ya ha sido protegido por otro método, no se le aplica ninguna otra protección.</p>

<p>La clase <code>sfForm</code> también protege los caracteres <code>'</code> y <code>"</code>, ya que pueden provocar que el código HTML generado no sea válido.</p>

<p>A continuación se muestra un ejemplo de esta protección:</p>

<div class="code php">
<pre class="php"><span class="re0">$widgetEmail</span> <span class="sy0">=</span> <span class="kw2">new</span> sfWidgetFormInput<span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">&#40;</span>
  <span class="st_h">'value'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Hola &quot;Mundo&quot;!'</span><span class="sy0">,</span>
  <span class="st_h">'class'</span> <span class="sy0">=&gt;</span> <span class="st_h">'&lt;script&gt;alert(&quot;hola&quot;)&lt;/script&gt;'</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Código HTML generado</span>
<span class="sy0">&lt;</span>input
  value<span class="sy0">=</span><span class="st0">&quot;Hola &amp;quot;Mundo!&amp;quot;&quot;</span>
  <span class="kw2">class</span><span class="sy0">=</span><span class="st0">&quot;&amp;lt;script&amp;gt;alert(&amp;quot;hola&amp;quot;)&amp;lt;/script&amp;gt;&quot;</span>
  type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;contacto[email]&quot;</span> id<span class="sy0">=</span><span class="st0">&quot;contacto_email&quot;</span>
<span class="sy0">/&gt;</span></pre>
</div>

<p></p></div>


            <div class="module module-ad module-ad-responsive module-ad-bottom">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_1/widgets.html">
                        <strong>&larr; Anterior</strong>
                        <small>1.2. Widgets</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_2.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>Capítulo 2. Validación de formularios</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1 ">
                <a href="../capitulo_1.html">
                    <span>Capítulo 1.</span> Creación de formularios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_1/antes_de_empezar.html">
                    <span>1.1.</span> Antes de empezar
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_1/widgets.html">
                    <span>1.2.</span> Widgets
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_1/configurando_los_widgets.html">
                    <span>1.3.</span> Configurando los widgets
                </a>
            </li>
                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> Validación de formularios</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Formularios para diseñadores web</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> Integración con Propel</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> Sin título</a>
            </li>
                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> Sin título</a>
            </li>
                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Sin título</a>
            </li>
                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Internacionalización y localización</a>
            </li>
                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Sin título</a>
            </li>
                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Sin título</a>
            </li>
                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Integrando Doctrine</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Referencia de Widgets</a>
            </li>
                                                                                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Validadores</a>
            </li>
                                                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
