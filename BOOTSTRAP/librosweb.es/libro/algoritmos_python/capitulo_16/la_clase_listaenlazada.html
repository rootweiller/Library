<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>16.3. La clase &lt;code&gt;ListaEnlazada&lt;/code&gt; (Algoritmos de Programación con Python)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_16/tipos_abstractos_de_datos.html" />
                    <link rel="next" href="../capitulo_16/invariantes_de_objetos.html" />
                <link rel="start" href="/libro/algoritmos_python/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="16.3. La clase &lt;code&gt;ListaEnlazada&lt;/code&gt; (Algoritmos de Programación con Python)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page algoritmos_python"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/algoritmos_python/" itemprop="url">
                    <span itemprop="title">Algoritmos de Programación con Python</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/algoritmos_python/capitulo_16.html" itemprop="url">
                    <span itemprop="title">Capítulo 16. Listas enlazadas</span>
                </a>
            </li>
        
            <li class="active">
                <span>16.3. La clase <code>ListaEnlazada</code></span>
            </li>
        </ol>
    </div>

    <h1 id="la_clase_listaenlazada" class="title">
        <span>16.3.</span> La clase <code>ListaEnlazada</code>
    </h1>

    

<p>Basándonos en los nodos implementados anteriormente, pero buscando
deslindar al programador que desea usar la lista de la
responsabilidad de manipular las referencias, definiremos ahora la
clase <code>ListaEnlazada</code>, de modo tal que no haya que operar mediante las
referencias internas de los nodos, sino que se lo pueda hacer a
través de operaciones de lista.</p>

<p>Más allá de la implementación en particular, se podrá notar que
implementaremos los mismos métodos de las listas de Python, de modo
que más allá del funcionamiento interno, ambas serán <strong>listas</strong>.</p>

<p>Definimos a continuación las operaciones que inicialmente deberá
cumplir la clase <code>ListaEnlazada</code>.</p>

<ul>
<li><code>__str__</code>, para mostrar la lista.</li>
<li><code>__len__</code>, para calcular la longitud de la lista.</li>
<li><code>append(x)</code>, para agregar un elemento al final de la lista.</li>
<li><code>insert(i, x)</code>, para agregar el elemento <code>x</code> en la posición <code>i</code>
(levanta una excepción si la posición <code>i</code> es inválida).</li>
<li><code>remove(x)</code>, para eliminar la primera aparición de <code>x</code> en la lista
(levanta una excepción si <code>x</code> no está).</li>
<li><code>pop([i])</code>, para borrar el elemento que está en la posición <code>i</code> y devolver
su valor. Si no se especifica el valor de <code>i</code>, <code>pop()</code> elimina y devuelve
el elemento que está en el último lugar de la lista (levanta una
excepción si se hace referencia a una posición no válida de la lista).</li>
<li><code>index(x)</code>, devuelve la posición de la primera aparición de <code>x</code> en la
lista (levanta una excepción si <code>x</code> no está).</li>
</ul>

<p>Más adelante podrán agregarse a la lista otros métodos que también
están implementados por las listas de Python.</p>

<p>Valen ahora algunas consideraciones más antes de empezar a implementar
la clase:</p>

<ul>
<li>Por lo dicho anteriormente, es claro que la lista deberá tener como
atributo la referencia al primer nodo que la compone.</li>
<li>Como vamos a incluir un método <code>__len__</code>, consideramos que no tiene
sentido recorrer la lista cada vez que se lo llame, para contar
cuántos elementos tiene, alcanza con agregar un atributo más (la
longitud de la lista), que se inicializa en <code>0</code> cuando se crea la lista
vacía, se incrementa en <code>1</code> cada vez que se agrega un elemento y se
decrementa en <code>1</code> cada vez que se borra un elemento.</li>
<li>Por otro lado, como vamos a incluir todas las operaciones de listas
que sean necesarias para operar con ellas, no es necesario que la
clase <code>Nodo</code> esté disponible para que otros programadores puedan
modificar (y romper) las listas a voluntad usando operaciones de
nodos. Para eso incluiremos la clase <code>Nodo</code> de manera <em>privada</em> (es
decir oculta), de modo que la podamos usar nosotros como dueños
(fabricantes) de la clase, pero no cualquier programador que utilice
la lista.</li>
</ul>

<p>Python tiene una convención para hacer que atributos, métodos o clases
dentro de una clase dada no puedan ser usados por los usuarios, y sólo
tengan acceso a ellos quienes programan la clase: su nombre tiene que
empezar con un guión bajo y terminar sin guión bajo. Así que para
hacer que los nodos sean privados, nombraremos a esa clase como
<code>_Nodo</code>, y la dejaremos tal como hasta ahora.</p>

<div class="admonition note"><p><strong class="title">Nota</strong> Se trata sólo de una convención, aún con el nombre <code>_Nodo</code> la clase
está disponible, pero respetaremos esa convención de aquí en adelnte.</p></div>

<h3 id="construccion_de_la_lista">16.3.1. Construcción de la lista</h3>

<p>Empezamos escribiendo la clase con su constructor.</p>

<div class="code python">
<pre class="python"><span class="kw1">class</span> ListaEnlazada<span class="br0">&#40;</span><span class="kw2">object</span><span class="br0">&#41;</span>:
    <span class="st0">&quot; Modela una lista enlazada, compuesta de Nodos. &quot;</span>
&nbsp;
    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
        <span class="st0">&quot;&quot;&quot; Crea una lista enlazada vacía. &quot;&quot;&quot;</span>
        <span class="co1"># prim: apuntará al primer nodo -None con la lista vacía</span>
        <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> <span class="kw2">None</span>
        <span class="co1"># len: longitud de la lista - 0 con la lista vacía</span>
        <span class="kw2">self</span>.<span class="kw2">len</span> <span class="sy0">=</span> <span class="nu0">0</span></pre>
</div>

<p>Nuestra estructura ahora será como la representada por la Figura 16.2.</p>

<div class="figure" id="figure_16_2">
    <img src="/img/algoritmos_python/f1602.png" alt="Una lista enlazada" />

    <p class="caption"><strong>Figura 16.2</strong> Una lista enlazada</p>
</div>


<p><strong>Ejercicio 16.1.</strong> Escribir los métodos <code>__str__</code> y <code>__len__</code> para
la lista.</p>

<div class="admonition note"><p><strong class="title">Nota</strong> Una característica importante de la implementación de lista enlazadas es que borrar el primer elemento es una operación de <em>tiempo constante</em>, es decir que no depende del largo de la lista, a diferencia de las listas de Python, en las que esta operación requiere un <em>tiempo proporcional a la longitud de la lista</em>).</p>

<p>Sin embargo no todo es tan positivo: el acceso a la posición p se realiza en <em>tiempo proporcional a p</em>, mientras que en las listas de Python esta operación se realiza en <em>tiempo constante</em>.</p>

<p>Conociendo las ventajas y desventajas podremos elegir el tipo de lista que necesitemos según los requerimientos de cada problema.</p></div>

<h3 id="eliminar_un_elemento_de_una_posicion">16.3.2. Eliminar un elemento de una posición</h3>

<p>Analizaremos a continuación <code>pop([i])</code>, que borra el elemento que está
en la posición <code>i</code> y devuelve su valor. Si no se especifica el valor de
<code>i</code>, <code>pop()</code> elimina y devuelve el elemento que está en el último lugar de
la lista. Por otro lado, levanta una excepción si se hace referencia a
una posición no válida de la lista.</p>

<p>Dado que se trata de una función con cierta complejidad, separaremos
el código en las diversas consideraciones a tener en cuenta.</p>

<p>Si la posición es inválida (<code>i</code> menor que <code>0</code> o mayor o igual a la
longitud de la lista), se considera error y se levanta la excepción
<code>ValueError</code>.</p>

<p>Esto se resuelve con este fragmento de código:</p>

<div class="code python">
<pre class="python"><span class="co1"># Verificación de los límites</span>
<span class="kw1">if</span> <span class="br0">&#40;</span>i <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="kw1">or</span> <span class="br0">&#40;</span>i <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="kw2">len</span><span class="br0">&#41;</span>:
    <span class="kw1">raise</span> <span class="kw2">IndexError</span><span class="br0">&#40;</span><span class="st0">&quot;Índice fuera de rango&quot;</span><span class="br0">&#41;</span></pre>
</div>

<p>Si no se indica posición, <code>i</code> toma la última posición de la lista.
Esto se resuelve con este fragmento de código:</p>

<div class="code python">
<pre class="python"><span class="co1"># Si no se recibió i, se devuelve el último.</span>
<span class="kw1">if</span> i <span class="sy0">==</span> <span class="kw2">None</span>:
    i <span class="sy0">=</span> <span class="kw2">self</span>.<span class="kw2">len</span> - <span class="nu0">1</span></pre>
</div>

<p>Cuando la posición es <code>0</code> se trata de un caso particular, ya que en ese
caso, además de borrar el nodo, hay que cambiar la referencia de
<code>self.prim</code> para que apunte al nodo siguiente. Es decir, pasar de
<code>self.prim → nodo0 → nodo1</code> a <code>self.prim → nodo1</code>).</p>

<p>Esto se resuelve con este fragmento de código:</p>

<div class="code python">
<pre class="python"><span class="co1"># Caso particular, si es el primero,</span>
<span class="co1"># hay que saltear la cabecera de la lista</span>
<span class="kw1">if</span> i <span class="sy0">==</span> <span class="nu0">0</span>:
    dato <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">dato</span>
    <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">prox</span></pre>
</div>

<p>Vemos ahora el caso general:</p>

<p>Mediante un ciclo, se deben ubicar los nodos <em>npi - 1</em> y <em>npi</em> que
están en las posiciones <em>i − 1</em> e <em>i</em> de la lista, respectivamente, de
modo de poder ubicar no sólo el nodo que se borrará, sino también estar en 
condiciones de saltear el nodo borrado en los enlaces de la lista. La lista 
debe pasar de contener el camino <em>npi - 1 → npi → npi.prox</em> a contener el camino <em>npi-1 → npi.prox</em>.</p>

<p>Nos basaremos un esquema muy simple (y útil) que se denomina <em>máquina
de parejas</em>:</p>

<p>Si nuestra secuencia tiene la forma ABCDE, se itera sobre ella de modo
de tener las parejas AB, BC, CD, DE. En la pareja XY, llamaremos a X
el <em>elemento anterior</em> y a Y el <em>elemento actual</em>. En general estos
ciclos terminan o bien cuando no hay más parejas que formar, o bien
cuando el elemento actual cumple con una determinada condición.</p>

<p>En nuestro problema, tenemos la siguiente situación:</p>

<ul>
<li>Las parejas son parejas de nodos.</li>
<li>Para avanzar en la secuencia se usa la referencia al próximo nodo de
la lista.</li>
<li>La condición de terminación es siempre que la posición del nodo en
la lista sea igual al valor buscado. En este caso particular no
debemos preocuparnos por la terminación de la lista porque la
validez del índice buscado ya fue verificada más arriba.</li>
</ul>

<p>Esta es la porción de código correspondiente a la búsqueda:</p>

<div class="code python">
<pre class="python">n_ant <span class="sy0">=</span> elf.<span class="me1">prim</span>
n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
<span class="kw1">for</span> pos <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> i<span class="br0">&#41;</span>:
    n_ant <span class="sy0">=</span> n_act
    n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span></pre>
</div>

<p>Al finalizar el ciclo, <code>n_ant</code> será una referencia al nodo <code>i − 1</code> y
<code>n_act</code> una referencia al nodo <code>i</code>.</p>

<p>Una vez obtenidas las referencias, se obtiene el dato y se cambia el
camino según era necesario:</p>

<div class="code python">
<pre class="python"><span class="co1"># Guarda el dato y elimina el nodo a borrar</span>
dato <span class="sy0">=</span> n_act.<span class="me1">dato</span>
n_ant.<span class="me1">prox</span> <span class="sy0">=</span> n_act.<span class="me1">prox</span></pre>
</div>

<p>Finalmente, en todos los casos de éxito, se debe devolver el dato que
contenía el nodo eliminado y decrementar la longitud en <code>1</code>:</p>

<div class="code python">
<pre class="python"><span class="co1"># hay que restar 1 de len</span>
<span class="kw2">self</span>.<span class="kw2">len</span> -<span class="sy0">=</span> <span class="nu0">1</span>
&nbsp;
<span class="co1"># y devolver el valor borrado</span>
<span class="kw1">return</span> dato</pre>
</div>

<p>Finalmente, en el código 16.1 se incluye el código completo del método
pop.</p>

<h3 id="eliminar_un_elemento_por_su_valor">16.3.3. Eliminar un elemento por su valor</h3>

<p>Análogamente se resuelve <code>remove(self,x)</code>, que debe eliminar la primera
aparición de <code>x</code> en la lista, o bien levantar una excepción si <code>x</code> no se
encuentra en la lista.</p>

<p>Nuevamente, dado que se trata de un método de cierta complejidad, lo
resolveremos por partes, teniendo en cuenta los casos particulares y
el caso general.</p>

<div class="code python">
<pre class="python"><span class="co1"># Código 16.1: pop: Método pop de la lista enlazada</span>
&nbsp;
<span class="kw1">def</span> pop<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> i <span class="sy0">=</span> <span class="kw2">None</span><span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Elimina el nodo de la posición i, y devuelve el dato contenido.
        Si i está fuera de rango, se levanta la excepción IndexError.
        Si no se recibe la posición, devuelve el último elemento. &quot;&quot;&quot;</span>
&nbsp;
    <span class="co1"># Si no se recibió i, se devuelve el último.</span>
    <span class="kw1">if</span> i <span class="kw1">is</span> <span class="kw2">None</span>:
        i <span class="sy0">=</span> <span class="kw2">self</span>.<span class="kw2">len</span> - <span class="nu0">1</span>
&nbsp;
    <span class="co1"># Verificación de los límites</span>
    <span class="kw1">if</span> <span class="kw1">not</span> <span class="br0">&#40;</span><span class="nu0">0</span> <span class="sy0">&lt;=</span> i <span class="sy0">&lt;</span> <span class="kw2">self</span>.<span class="kw2">len</span><span class="br0">&#41;</span>:
        <span class="kw1">raise</span> <span class="kw2">IndexError</span><span class="br0">&#40;</span><span class="st0">&quot;Índice fuera de rango&quot;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Caso particular, si es el primero,</span>
    <span class="co1"># hay que saltear la cabecera de la lista</span>
    <span class="kw1">if</span> i <span class="sy0">==</span> <span class="nu0">0</span>:
        dato <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">dato</span>
        <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">prox</span>
&nbsp;
    <span class="co1"># Para todos los demás elementos, busca la posición</span>
    <span class="kw1">else</span>:
        n_ant <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
        n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
        <span class="kw1">for</span> pos <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> i<span class="br0">&#41;</span>:
            n_ant <span class="sy0">=</span> n_act
            n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
&nbsp;
        <span class="co1"># Guarda el dato y elimina el nodo a borrar</span>
        dato <span class="sy0">=</span> n_act.<span class="me1">dato</span>
        n_ant.<span class="me1">prox</span> <span class="sy0">=</span> n_act.<span class="me1">prox</span>
&nbsp;
    <span class="co1"># hay que restar 1 de len</span>
    <span class="kw2">self</span>.<span class="kw2">len</span> -<span class="sy0">=</span> <span class="nu0">1</span>
    <span class="co1"># y devolver el valor borrado</span>
    <span class="kw1">return</span> dato</pre>
</div>

<p>Los casos particulares son: la lista vacía, que es un error y hay que
levantar una excepción; y el caso en el que <code>x</code> está en el primer nodo,
en este caso hay que saltear el primer nodo desde la cabecera de la
lista.</p>

<p>El fragmento de código que resuelve estos casos es:</p>

<div class="code python">
<pre class="python"><span class="kw1">if</span> <span class="kw2">self</span>.<span class="kw2">len</span> <span class="sy0">==</span> <span class="nu0">0</span>:
    <span class="co1"># Si la lista está vacía, no hay nada que borrar.</span>
    <span class="kw1">raise</span> <span class="kw2">ValueError</span><span class="br0">&#40;</span><span class="st0">&quot;Lista vacía&quot;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Caso particular, x esta en el primer nodo</span>
<span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">dato</span> <span class="sy0">==</span> x:
    <span class="co1"># Se descarta la cabecera de la lista</span>
    <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">prox</span></pre>
</div>

<p>El caso general también implica un recorrido con máquina de parejas,
sólo que esta vez la condición de terminación es: o bien la lista se
terminó o bien encontramos un nodo con el valor (<code>x</code>) buscado.</p>

<div class="code python">
<pre class="python"><span class="co1"># Obtiene el nodo anterior al que contiene a x (n_ant)</span>
n_ant <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
<span class="kw1">while</span> n_act <span class="sy0">!=</span> <span class="kw2">None</span> <span class="kw1">and</span> n_act.<span class="me1">dato</span> <span class="sy0">!=</span> x:
    n_ant <span class="sy0">=</span> n_act
    n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span></pre>
</div>

<p>En este caso, al terminarse el ciclo será necesario corroborar si se
terminó porque llegó al final de la lista, y de ser así levantar una
excepción; o si se terminó porque encontró el dato, y de ser así
eliminarlo.</p>

<div class="code python">
<pre class="python"><span class="co1"># Si no se encontró a x en la lista, levanta la excepción</span>
<span class="kw1">if</span> n_act <span class="sy0">==</span> <span class="kw2">None</span>:
    <span class="kw1">raise</span> <span class="kw2">ValueError</span><span class="br0">&#40;</span><span class="st0">&quot;El valor no ester en la lista.&quot;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Si encontró a x, debe pasar de n_ant -&gt; n_x -&gt; n_x.prox</span>
<span class="co1"># a n_ant -&gt; n_x.prox</span>
<span class="kw1">else</span>:
    n_ant.<span class="me1">prox</span> <span class="sy0">=</span> n_act.<span class="me1">prox</span></pre>
</div>

<p>Finalmente, en todos los casos de éxito debemos decrementar en <code>1</code> el
valor de <code>self.len</code>. En el código 16.2 se incluye el código completo del
método <code>remove</code>.</p>

<h3 id="insertar_nodos">16.3.4. Insertar nodos</h3>

<p>Debemos programar ahora <code>insert(i, x)</code>, que debe agregar el elemento <code>x</code> en
la posición <code>i</code> (y levantar una excepción si la posición <code>i</code> es inválida).</p>

<p>Veamos qué debemos tener en cuenta para programar esta función.</p>

<p>Si se intenta insertar en una posición menor que cero o mayor que la
longitud de la lista debe levantarse una excepción.</p>

<div class="code python">
<pre class="python"><span class="co1"># Código 16.2: remove: Método remove de la lista enlazada</span>
&nbsp;
<span class="kw1">def</span> remove<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> x<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Borra la primera aparición del valor x en la lista.
        Si x no está en la lista, levanta ValueError &quot;&quot;&quot;</span>
&nbsp;
    <span class="kw1">if</span> <span class="kw2">self</span>.<span class="kw2">len</span> <span class="sy0">==</span> <span class="nu0">0</span>:
        <span class="co1"># Si la lista está vacía, no hay nada que borrar.</span>
        <span class="kw1">raise</span> <span class="kw2">ValueError</span><span class="br0">&#40;</span><span class="st0">&quot;Lista vacía&quot;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Caso particular, x esta en el primer nodo</span>
    <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">dato</span> <span class="sy0">==</span> x:
        <span class="co1"># Se descarta la cabecera de la lista</span>
        <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>.<span class="me1">prox</span>
&nbsp;
    <span class="co1"># En cualquier otro caso, hay que buscar a x</span>
    <span class="kw1">else</span>:
        <span class="co1"># Obtiene el nodo anterior al que contiene a x (n_ant)</span>
        n_ant <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
        n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
        <span class="kw1">while</span> n_act <span class="sy0">!=</span> <span class="kw2">None</span> <span class="kw1">and</span> n_act.<span class="me1">dato</span> <span class="sy0">!=</span> x:
            n_ant <span class="sy0">=</span> n_act
            n_act <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
&nbsp;
        <span class="co1"># Si no se encontró a x en la lista, levanta la excepción</span>
        <span class="kw1">if</span> n_act <span class="sy0">==</span> <span class="kw2">None</span>:
            <span class="kw1">raise</span> <span class="kw2">ValueError</span><span class="br0">&#40;</span><span class="st0">&quot;El valor no ester en la lista.&quot;</span><span class="br0">&#41;</span>
&nbsp;
        <span class="co1"># Si encontró a x, debe pasar de n_ant -&gt; n_x -&gt; n_x.prox</span>
        <span class="co1"># a n_ant -&gt; n_x.prox</span>
        <span class="kw1">else</span>:
            n_ant.<span class="me1">prox</span> <span class="sy0">=</span> n_act.<span class="me1">prox</span>
&nbsp;
    <span class="co1"># Si no levantó excepción, hay que restar 1 del largo</span>
    <span class="kw2">self</span>.<span class="kw2">len</span> -<span class="sy0">=</span> <span class="nu0">1</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span>i <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="kw2">len</span><span class="br0">&#41;</span> <span class="kw1">or</span> <span class="br0">&#40;</span>i <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span>:
        <span class="co1"># error</span>
        <span class="kw1">raise</span> <span class="kw2">IndexError</span><span class="br0">&#40;</span><span class="st0">&quot;Posición inválida&quot;</span><span class="br0">&#41;</span></pre>
</div>

<p>Para los demás casos, hay que crear un nodo, que será el que se
insertará en la posición que corresponda. Construimos un nodo <code>nuevo</code>
cuyo dato sea <code>x</code>.</p>

<div class="code python">
<pre class="python"><span class="co1"># Crea nuevo nodo, con x como dato:</span>
nuevo <span class="sy0">=</span> _Nodo<span class="br0">&#40;</span>x<span class="br0">&#41;</span></pre>
</div>

<p>Si se quiere insertar en la posición <code>0</code>, hay que cambiar la referencia de
<code>self.prim</code>.</p>

<div class="code python">
<pre class="python"><span class="co1"># Insertar al principio (caso particular)</span>
<span class="kw1">if</span> i <span class="sy0">==</span> <span class="nu0">0</span>:
    <span class="co1"># el siguiente del nuevo pasa a ser el que era primero</span>
    nuevo.<span class="me1">prox</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
    <span class="co1"># el nuevo pasa a ser el primero de la lista</span>
    <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> nuevo</pre>
</div>

<p>Para los demás casos, nuevamente será necesaria la máquina de parejas.
Obtenemos el nodo anterior a la posición en la que queremos insertar.</p>

<div class="code python">
<pre class="python"><span class="co1"># Insertar en cualquier lugar &gt; 0</span>
<span class="kw1">else</span>:
    <span class="co1"># Recorre la lista hasta llegar a la posición deseada</span>
    n_ant <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
    <span class="kw1">for</span> pos <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span>i<span class="br0">&#41;</span>:
        n_ant <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
&nbsp;
    <span class="co1"># Intercala nuevo y obtiene n_ant -&gt; nuevo -&gt; n_ant.prox</span>
    nuevo.<span class="me1">prox</span> <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
    n_ant.<span class="me1">prox</span> <span class="sy0">=</span> nuevo</pre>
</div>

<p>En todos los casos de éxito se debe incrementar en 1 la longitud de la
lista.</p>

<div class="code python">
<pre class="python"><span class="co1"># En cualquier caso, incrementar en 1 la longitud</span>
<span class="co1"># self.len += 1</span></pre>
</div>

<p>En el Código 16.3 se incluye el código resultante del método <code>insert</code>.</p>

<p><strong>Ejercicio 16.2.</strong> Completar la clase <code>ListaEnlazada</code> con los métodos
que faltan: <code>append</code> e <code>index</code>.</p>

<p><strong>Ejercicio 16.3.</strong> En los bucles de <em>máquina de parejas</em> mostrados
anteriormente, no siempre es necesario tener la referencia al nodo
actual, puede alcanzar con la referencia al nodo anterior. Donde sea
posible, eliminar la referencia al nodo actual. Una vez hecho esto,
analizar el código resultante, ¿Es más elegante?</p>

<p><strong>Ejercicio 16.4. Mantenimiento:</strong> Con esta representación conseguimos
que la inserción en la posición 0 se realice en tiempo constante, sin
embargo ahora <code>append</code> es líneal en la longitud de la lista. Como
nuestro cliente no está satisfecho con esto debemos agregar un atributo más
a los objetos de la clase, la referencia al último nodo, y modificar
<code>append</code> para que se pueda ejecutar en tiempo constante. Por supuesto
que además hay que modificar todos los métodos de la clase para que se
mantenga la propiedad de que ese atributo siempre es una referencia al
útimo nodo.</p>

<div class="code python">
<pre class="python"><span class="co1"># Código 16.3: insert: Método insert de la lista enlazada</span>
<span class="kw1">def</span> insert<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> i<span class="sy0">,</span> x<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Inserta el elemento x en la posición i.
        Si la posición es inválida, levanta IndexError &quot;&quot;&quot;</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span>i <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="kw2">len</span><span class="br0">&#41;</span> <span class="kw1">or</span> <span class="br0">&#40;</span>i <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span>:
        <span class="co1"># error</span>
        <span class="kw1">raise</span> <span class="kw2">IndexError</span><span class="br0">&#40;</span><span class="st0">&quot;Posición inválida&quot;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Crea nuevo nodo, con x como dato:</span>
    nuevo <span class="sy0">=</span> _Nodo<span class="br0">&#40;</span>x<span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Insertar al principio (caso particular)</span>
    <span class="kw1">if</span> i <span class="sy0">==</span> <span class="nu0">0</span>:
        <span class="co1"># el siguiente del nuevo pasa a ser el que era primero</span>
        nuevo.<span class="me1">prox</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
        <span class="co1"># el nuevo pasa a ser el primero de la lista</span>
        <span class="kw2">self</span>.<span class="me1">prim</span> <span class="sy0">=</span> nuevo
&nbsp;
<span class="co1"># Insertar en cualquier lugar &gt; 0</span>
<span class="kw1">else</span>:
    <span class="co1"># Recorre la lista hasta llegar a la posición deseada</span>
    n_ant <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">prim</span>
    <span class="kw1">for</span> pos <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span>i<span class="br0">&#41;</span>:
        n_ant <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
&nbsp;
    <span class="co1"># Intercala nuevo y obtiene n_ant -&gt; nuevo -&gt; n_ant.prox</span>
    nuevo.<span class="me1">prox</span> <span class="sy0">=</span> n_ant.<span class="me1">prox</span>
    n_ant.<span class="me1">prox</span> <span class="sy0">=</span> nuevo
&nbsp;
<span class="co1"># En cualquier caso, incrementar en 1 la longitud</span>
<span class="kw2">self</span>.<span class="kw2">len</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre>
</div>



            <div class="module module-ad module-ad-responsive module-ad-bottom">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_16/tipos_abstractos_de_datos.html">
                        <strong>&larr; Anterior</strong>
                        <small>16.2. Tipos abstractos de datos</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_16/invariantes_de_objetos.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>16.4. Invariantes de objetos</small>
                    </a>
                            </li>
        </ul>
    </div>

            <div id="book-legal-notice">
            Copyright (c) 2011-2014 Rosita Wachenchauzer, Margarita Manterola,
Maximiliano Curia, Marcos Medrano, Nicolás Paez.
La copia y redistribución de esta página se permite bajo los términos
de la licencia Creative Commons Atribución - Compartir Obras Derivadas
Igual 3.0 siempre que se conserve esta nota de copyright.

        </div>
                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Algunos conceptos básicos</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> Programas sencillos</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Funciones</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> Decisiones</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> Más sobre ciclos</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> Cadenas de caracteres</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Tuplas y listas</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Algoritmos de búsqueda</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Diccionarios</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Contratos y Mutabilidad</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Manejo de archivos</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Manejo de errores y excepciones</a>
            </li>
                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Procesamiento de archivos</a>
            </li>
                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> Objetos</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Polimorfismo, Herencia y Delegación</a>
            </li>
                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_16.html">
                    <span>Capítulo 16.</span> Listas enlazadas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/una_clase_sencilla_de_vagones.html">
                    <span>16.1.</span> Una clase sencilla de <em>vagones</em>
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/tipos_abstractos_de_datos.html">
                    <span>16.2.</span> Tipos abstractos de datos
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_16/la_clase_listaenlazada.html">
                    <span>16.3.</span> La clase <code>ListaEnlazada</code>
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/invariantes_de_objetos.html">
                    <span>16.4.</span> Invariantes de objetos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/otras_listas_enlazadas.html">
                    <span>16.5.</span> Otras listas enlazadas
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/iteradores.html">
                    <span>16.6.</span> Iteradores
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/resumen.html">
                    <span>16.7.</span> Resumen
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_16/ejercicios.html">
                    <span>16.8.</span> Ejercicios
                </a>
            </li>
                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> Pilas y colas</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> Modelo de ejecución de funciones y recursividad</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> Ordenar listas</a>
            </li>
                                                                                            <li class="level-1">
                <span>20.</span> <a href="../capitulo_20.html"> Algunos ordenamientos recursivos</a>
            </li>
                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
