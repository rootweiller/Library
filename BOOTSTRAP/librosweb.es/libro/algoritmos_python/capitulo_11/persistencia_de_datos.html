<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>11.7. Persistencia de datos (Algoritmos de Programación con Python)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_11/manipular_un_archivo_en_forma_binaria.html" />
                    <link rel="next" href="../capitulo_11/directorios.html" />
                <link rel="start" href="/libro/algoritmos_python/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="11.7. Persistencia de datos (Algoritmos de Programación con Python)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page algoritmos_python"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/algoritmos_python/" itemprop="url">
                    <span itemprop="title">Algoritmos de Programación con Python</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/algoritmos_python/capitulo_11.html" itemprop="url">
                    <span itemprop="title">Capítulo 11. Manejo de archivos</span>
                </a>
            </li>
        
            <li class="active">
                <span>11.7. Persistencia de datos</span>
            </li>
        </ol>
    </div>

    <h1 id="persistencia_de_datos" class="title">
        <span>11.7.</span> Persistencia de datos
    </h1>

    

<p>Se llama <strong>persistencia</strong> a la capacidad de guardar la información de
un programa para poder volver a utilizarla en otro momento. Es lo que
los usuarios conocen como <em>Guardar el archivo</em> y después <em>Abrir el
archivo</em>. Pero para un programador puede significar más cosas y suele
involucrar un proceso de <em>serialización</em> de los datos a un archivo o
a una base de datos o a algún otro medio similar, y el proceso inverso
de recuperar los datos a partir de la información <em>serializada</em>.</p>

<p>Por ejemplo, supongamos que en el desarrollo de un juego se quiere
guardar en un archivo la información referente a los ganadores, el
puntaje máximo obtenido y el tiempo de juego en el que obtuvieron ese
puntaje.</p>

<p>En el juego, esa información podría estar almacenada en una lista de
tuplas:</p>

<div class="code python">
<pre class="python"><span class="br0">&#91;</span><span class="br0">&#40;</span>nombre1<span class="sy0">,</span> puntaje1<span class="sy0">,</span> tiempo1<span class="br0">&#41;</span><span class="sy0">,</span> <span class="br0">&#40;</span>nombre2<span class="sy0">,</span> puntaje2<span class="sy0">,</span> tiempo2<span class="br0">&#41;</span><span class="sy0">,</span> ...<span class="br0">&#93;</span></pre>
</div>

<p>Esta información se puede guardar en un archivo de muchas formas
distintas. En este caso, para facilitar la lectura del archivo de
puntajes para los humanos, se decide guardarlos en un archivo de
texto, donde cada tupla ocupará una línea y los valores de las tuplas
estarán separados por comas.</p>

<p>En el código 11.6 se muestra un módulo capaz de guardar y recuperar
los puntajes en el formato especificado.</p>

<p>Dadas las especificaciones del problema al guardar los valores en el
archivo, es necesario convertir el puntaje (que es un valor numérico)
en una cadena, y al abrir el archivo es necesario convertirlo
nuevamente en un valor numérico.</p>

<div class="admonition note"><p><strong class="title">Nota</strong> Es importante notar que tanto la función que almacena los datos como
la que los recupera requieren que la información se encuentre de una
forma determinada y de no ser así, fallarán. Es por eso que estas
condiciones se indican en la documentación de las funciones como sus
precondiciones. En próximas unidades veremos cómo evitar que falle una
función si alguna de sus condiciones no se cumple.</p></div>

<p>Es bastate sencillo probar el módulo programado y ver que lo que se
guarda es igual que lo que se recupera:</p>

<div class="code python">
<pre class="python"><span class="co1"># Código 11.6: puntajes.py: Módulo para guardar y recuperar puntajes en un archivo</span>
&nbsp;
<span class="co1">#! /usr/bin/env python</span>
<span class="co1"># encoding: latin1</span>
&nbsp;
<span class="kw1">def</span> guardar_puntajes<span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> puntajes<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Guarda la lista de puntajes en el archivo.
    Pre: nombre_archivo corresponde a un archivo válido,
         puntajes corresponde a una lista de tuplas de 3 elementos.
    Post: se guardaron los valores en el archivo,
          separados por comas.
    &quot;&quot;&quot;</span>
&nbsp;
    archivo <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> <span class="st0">&quot;w&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">for</span> nombre<span class="sy0">,</span> puntaje<span class="sy0">,</span> tiempo <span class="kw1">in</span> puntajes:
        archivo.<span class="me1">write</span><span class="br0">&#40;</span>nombre+<span class="st0">&quot;,&quot;</span>+<span class="kw2">str</span><span class="br0">&#40;</span>puntaje<span class="br0">&#41;</span>+<span class="st0">&quot;,&quot;</span>+tiempo+<span class="st0">&quot;<span class="es0">\\</span>n&quot;</span><span class="br0">&#41;</span>
    archivo.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">def</span> recuperar_puntajes<span class="br0">&#40;</span>nombre_archivo<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Recupera los puntajes a partir del archivo provisto.
        Devuelve una lista con los valores de los puntajes.
    Pre: el archivo contiene los puntajes en el formato esperado,
         separados por comas
    Post: la lista devuelta contiene los puntajes en el formato:
          [(nombre1,puntaje1,tiempo1),(nombre2,puntaje2,tiempo2)].
    &quot;&quot;&quot;</span>
&nbsp;
    puntajes <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>
    archivo <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> <span class="st0">&quot;r&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">for</span> línea <span class="kw1">in</span> archivo:
        nombre<span class="sy0">,</span> puntaje<span class="sy0">,</span> tiempo <span class="sy0">=</span> línea.<span class="me1">rstrip</span><span class="br0">&#40;</span><span class="st0">&quot;<span class="es0">\\</span>n&quot;</span><span class="br0">&#41;</span>.<span class="me1">split</span><span class="br0">&#40;</span><span class="st0">&quot;,&quot;</span><span class="br0">&#41;</span>
        puntajes.<span class="me1">append</span><span class="br0">&#40;</span><span class="br0">&#40;</span>nombre<span class="sy0">,</span><span class="kw2">int</span><span class="br0">&#40;</span>puntaje<span class="br0">&#41;</span><span class="sy0">,</span>tiempo<span class="br0">&#41;</span><span class="br0">&#41;</span>
    archivo.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">return</span> puntajes</pre>
</div>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> <span class="kw1">import</span> puntajes
<span class="sy0">&gt;&gt;&gt;</span> valores <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#40;</span><span class="st0">&quot;Pepe&quot;</span><span class="sy0">,</span> <span class="nu0">108</span><span class="sy0">,</span> <span class="st0">&quot;4:16&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="br0">&#40;</span><span class="st0">&quot;Juana&quot;</span><span class="sy0">,</span> <span class="nu0">2315</span><span class="sy0">,</span> <span class="st0">&quot;8:42&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
<span class="sy0">&gt;&gt;&gt;</span> puntajes.<span class="me1">guardar_puntajes</span><span class="br0">&#40;</span><span class="st0">&quot;puntajes.txt&quot;</span><span class="sy0">,</span> valores<span class="br0">&#41;</span>
<span class="sy0">&gt;&gt;&gt;</span> recuperado <span class="sy0">=</span> puntajes.<span class="me1">recuperar_puntajes</span><span class="br0">&#40;</span><span class="st0">&quot;puntajes.txt&quot;</span><span class="br0">&#41;</span>
<span class="sy0">&gt;&gt;&gt;</span> <span class="kw1">print</span> recuperado
<span class="br0">&#91;</span><span class="br0">&#40;</span><span class="st0">'Pepe'</span><span class="sy0">,</span> <span class="nu0">108</span><span class="sy0">,</span> <span class="st0">'4:16'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="br0">&#40;</span><span class="st0">'Juana'</span><span class="sy0">,</span> <span class="nu0">2315</span><span class="sy0">,</span> <span class="st0">'8:42'</span><span class="br0">&#41;</span><span class="br0">&#93;</span></pre>
</div>

<p>Guardar el estado de un programa se puede hacer tanto en un archivo de
texto, como en un archivo binario. En muchas situaciones es preferible
guardar la información en un archivo de texto, ya que de esta manera
es posible modificarlo fácilmente desde cualquier editor de textos.</p>

<p>En general, los archivos de texto van a desperdiciar un poco más de
espacio, pero son más faciles de entender y fáciles de usar desde
cualquier programa.</p>

<p>Por otro lado, en un archivo binario bien definido se puede evitar el
desperdicio de espacio, o también hacer que sea más rápido acceder a
los datos. Además, para ciertas aplicaciones como archivos de sonido o
video, tendría poco sentido almacenarlos en archivos de texto.</p>

<p>En definitiva, la decisión de qué formato usar queda a discreción del
programador. Es im-portante recordar que el sentido común es el valor
más preciado en un programador.</p>

<h3 id="persistencia_en_archivos_csv">11.7.1. Persistencia en archivos CSV</h3>

<p>Un formato que suele usarse para transferir datos entre programas es
<strong>CSV</strong> (del inglés <em>comma separated values</em>: valores separados por
comas) es un formato bastante sencillo, tanto para leerlo como para
procesarlo desde el código, se parece al formato visto en el ejemplo
anteriormente.</p>

<div class="code csv">
<pre class="csv">Nombre,Apellido,Telefono,Cumpleaños
&quot;John&quot;,&quot;Smith&quot;,&quot;555-0101&quot;,&quot;1973-11-24&quot;
&quot;Jane&quot;,&quot;Smith&quot;,&quot;555-0101&quot;,&quot;1975-06-12&quot;</pre>
</div>

<p>En el ejemplo se puede ver una pequeña base de datos. En la primera
línea del archivo tenemos los nombres de los campos, un dato opcional
desde el punto de vista del procesamiento de la información, pero que
facilita entender el archivo.</p>

<p>En las siguientes líneas se ingresan los datos de la base de datos,
cada campo separado por comas. Los campos que son cadenas se suelen
escribir entre comillas dobles, si alguna cadena contiene alguna
comilla doble se la reemplaza por <code>\"</code> y una contrabarra se escribe
como <code>\\</code>.</p>

<p>En Python es bastante sencillo procesar de este tipo de archivos,
tanto para la lectura como para la escritura, mediante el módulo <code>csv</code>
que ya se encuentra preparado para eso.</p>

<p>La funciones del ejemplo anterior podría programarse mediante el
módulo csv. En el Código 11.7 se muestra una posible implementación
que utiliza este módulo.</p>

<p>Si se prueba este código, se obtiene un resultado idéntico al obtenido
anteriormente:</p>

<div class="code python">
<pre class="python"><span class="sy0">&gt;&gt;&gt;</span> <span class="kw1">import</span> puntajes_csv                                                     
<span class="sy0">&gt;&gt;&gt;</span> valores <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#40;</span><span class="st0">&quot;Pepe&quot;</span><span class="sy0">,</span> <span class="nu0">108</span><span class="sy0">,</span> <span class="st0">&quot;4:16&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="br0">&#40;</span><span class="st0">&quot;Juana&quot;</span><span class="sy0">,</span> <span class="nu0">2315</span><span class="sy0">,</span> <span class="st0">&quot;8:42&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
<span class="sy0">&gt;&gt;&gt;</span> puntajes_csv.<span class="me1">guardar_puntajes</span><span class="br0">&#40;</span><span class="st0">&quot;puntajes.txt&quot;</span><span class="sy0">,</span> valores<span class="br0">&#41;</span>
<span class="sy0">&gt;&gt;&gt;</span> recuperado <span class="sy0">=</span> puntajes_csv.<span class="me1">recuperar_puntajes</span><span class="br0">&#40;</span><span class="st0">&quot;puntajes.txt&quot;</span><span class="br0">&#41;</span>
<span class="sy0">&gt;&gt;&gt;</span> <span class="kw1">print</span> recuperado
<span class="br0">&#91;</span><span class="br0">&#40;</span><span class="st0">'Pepe'</span><span class="sy0">,</span> <span class="nu0">108</span><span class="sy0">,</span> <span class="st0">'4:16'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="br0">&#40;</span><span class="st0">'Juana'</span><span class="sy0">,</span> <span class="nu0">2315</span><span class="sy0">,</span> <span class="st0">'8:42'</span><span class="br0">&#41;</span><span class="br0">&#93;</span></pre>
</div>

<p>El código, en este caso, es muy similar, ya que en el ejemplo original
se hacían muy pocas consideraciones al respecto de los valores: se
asumía que el primero y el tercero eran cadenas mientras que el
segundo necesitaba ser convertido a cadena.</p>

<div class="code python">
<pre class="python"><span class="co1"># Código 11.7: puntajes_csv.py: Módulo para guardar y recuperar puntajes en un archivo que usa csv</span>
&nbsp;
<span class="co1">#! /usr/bin/env python</span>
<span class="co1"># encoding: latin1</span>
&nbsp;
<span class="kw1">import</span> <span class="kw3">csv</span>
&nbsp;
<span class="kw1">def</span> guardar_puntajes<span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> puntajes<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Guarda la lista de puntajes en el archivo.
    Pre: nombre_archivo corresponde a un archivo válido,
         puntajes corresponde a una lista de secuencias de elementos.
    Post: se guardaron los valores en el archivo,
          separados por comas.
    &quot;&quot;&quot;</span>
&nbsp;
    archivo <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> <span class="st0">&quot;w&quot;</span><span class="br0">&#41;</span>
    archivo_csv <span class="sy0">=</span> <span class="kw3">csv</span>.<span class="me1">writer</span><span class="br0">&#40;</span>archivo<span class="br0">&#41;</span>
    archivo_csv.<span class="me1">writerows</span><span class="br0">&#40;</span>puntajes<span class="br0">&#41;</span>
    archivo.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">def</span> recuperar_puntajes<span class="br0">&#40;</span>nombre_archivo<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Recupera los puntajes a partir del archivo provisto.
        Devuelve una lista con los valores de los puntajes.
    Pre: el archivo contiene los puntajes en el formato esperado,
         separados por comas
    Post: la lista devuelta contiene los puntajes en el formato:
          [(nombre1,puntaje1,tiempo1),(nombre2,puntaje2,tiempo2)].
&quot;&quot;&quot;</span>
&nbsp;
puntajes <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>
archivo <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> <span class="st0">&quot;r&quot;</span><span class="br0">&#41;</span>
archivo_csv <span class="sy0">=</span> <span class="kw3">csv</span>.<span class="me1">reader</span><span class="br0">&#40;</span>archivo<span class="br0">&#41;</span>
<span class="kw1">for</span> nombre<span class="sy0">,</span> puntaje<span class="sy0">,</span> tiempo <span class="kw1">in</span> archivo_csv:
    puntajes.<span class="me1">append</span><span class="br0">&#40;</span><span class="br0">&#40;</span>nombre<span class="sy0">,</span> <span class="kw2">int</span><span class="br0">&#40;</span>puntaje<span class="br0">&#41;</span><span class="sy0">,</span> tiempo<span class="br0">&#41;</span><span class="br0">&#41;</span>
archivo.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="kw1">return</span> puntajes</pre>
</div>

<div class="admonition note"><p><strong class="title">Nota</strong> Es importante notar, entonces, que al utilizar el módulo csv en lugar
de hacer el procesamiento en forma manual, se obtiene un
comportamiento más robusto, ya que el módulo <code>csv</code> tiene en cuenta
muchos más casos que nuestro código original no. Por ejemplo, el
código anterior no tenía en cuenta que el nombre pudiera contener una
coma.</p></div>

<p>En el apéndice de esta unidad puede verse una aplicación completa de
una agenda, que almacena los datos del programa en archivos csv.</p>

<h3 id="persistencia_en_archivos_binarios">11.7.2. Persistencia en archivos binarios</h3>

<p>En el caso de que decidiéramos grabar los datos en un archivo binario,
Python incluye una herramienta llamada <strong>pickle</strong> que permite hacerlo
de forma muy sencilla. Hay que tener en cuenta, sin embargo, que no es
nada simple acceder a un archivo en este formato desde un programa que
no esté escrito en Python.</p>

<p>En el Código 11.8 se muestra el mismo ejemplo de almacenamiento de
puntajes, utilizando el módulo <code>pickle</code>.</p>

<div class="code python">
<pre class="python"><span class="co1"># Código 11.8: puntajes_pickle.py: Módulo para guardar y recuperar puntajes en un archivo que usa pickle</span>
&nbsp;
<span class="co1">#! /usr/bin/env python</span>
<span class="co1"># encoding: latin1</span>
&nbsp;
<span class="kw1">import</span> <span class="kw3">pickle</span>
&nbsp;
<span class="kw1">def</span> guardar_puntajes<span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> puntajes<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Guarda la lista de puntajes en el archivo.
    Pre: nombre_archivo corresponde a un archivo válido,
         puntajes corresponde a los valores a guardar
    Post: se guardaron los valores en el archivo en formato pickle.
    &quot;&quot;&quot;</span>
&nbsp;
    archivo <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> <span class="st0">&quot;w&quot;</span><span class="br0">&#41;</span>
    <span class="kw3">pickle</span>.<span class="me1">dump</span><span class="br0">&#40;</span>puntajes<span class="sy0">,</span> archivo<span class="br0">&#41;</span>
    archivo.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">def</span> recuperar_puntajes<span class="br0">&#40;</span>nombre_archivo<span class="br0">&#41;</span>:
    <span class="st0">&quot;&quot;&quot; Recupera los puntajes a partir del archivo provisto.
        Devuelve una lista con los valores de los puntajes.
    Pre: el archivo contiene los puntajes en formato pickle
    Post: la lista devuelta contiene los puntajes en el
          mismo formato que se los almacenó.
    &quot;&quot;&quot;</span>
&nbsp;
    archivo <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>nombre_archivo<span class="sy0">,</span> <span class="st0">&quot;r&quot;</span><span class="br0">&#41;</span>
    puntajes <span class="sy0">=</span> <span class="kw3">pickle</span>.<span class="me1">load</span><span class="br0">&#40;</span>archivo<span class="br0">&#41;</span>
    archivo.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">return</span> puntajes</pre>
</div>

<p>El funcionamiento de este programa será idéntico a los anteriores.
Pero el archivo generado será muy distinto a los archivos generados
anteriormente. En lugar de ser un archivo de fácil lectura, tendrá la
forma:</p>

<div class="code code">
<pre class="code">(lp0
(S'Pepe'
p1
I108
S'4:16'
p2
tp3
a(S'Juana'
p4
I2315
S'8:42'
p5
tp6</pre>
</div>

<p>En el apéndice de esta unidad puede verse una aplicación completa de
una agenda, que utiliza pickle para almacenar datos en archivos.</p>



            <div class="module module-ad module-ad-responsive module-ad-bottom">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_11/manipular_un_archivo_en_forma_binaria.html">
                        <strong>&larr; Anterior</strong>
                        <small>11.6. Manipular un archivo en forma binaria</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_11/directorios.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>11.8. Directorios</small>
                    </a>
                            </li>
        </ul>
    </div>

            <div id="book-legal-notice">
            Copyright (c) 2011-2014 Rosita Wachenchauzer, Margarita Manterola,
Maximiliano Curia, Marcos Medrano, Nicolás Paez.
La copia y redistribución de esta página se permite bajo los términos
de la licencia Creative Commons Atribución - Compartir Obras Derivadas
Igual 3.0 siempre que se conserve esta nota de copyright.

        </div>
                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Algunos conceptos básicos</a>
            </li>
                                                                                                                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> Programas sencillos</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Funciones</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> Decisiones</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> Más sobre ciclos</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> Cadenas de caracteres</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Tuplas y listas</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Algoritmos de búsqueda</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>9.</span> <a href="../capitulo_9.html"> Diccionarios</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Contratos y Mutabilidad</a>
            </li>
                                                                                                                            <li class="level-1 ">
                <a href="../capitulo_11.html">
                    <span>Capítulo 11.</span> Manejo de archivos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/cerrar_un_archivo.html">
                    <span>11.1.</span> Cerrar un archivo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/ejemplo_de_procesamiento_de_archivos.html">
                    <span>11.2.</span> Ejemplo de procesamiento de archivos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/modo_de_apertura_de_los_archivos.html">
                    <span>11.3.</span> Modo de apertura de los archivos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/escribir_en_un_archivo.html">
                    <span>11.4.</span> Escribir en un archivo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/agregar_informacion_a_un_archivo.html">
                    <span>11.5.</span> Agregar información a un archivo
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/manipular_un_archivo_en_forma_binaria.html">
                    <span>11.6.</span> Manipular un archivo en forma binaria
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_11/persistencia_de_datos.html">
                    <span>11.7.</span> Persistencia de datos
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/directorios.html">
                    <span>11.8.</span> Directorios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/resumen.html">
                    <span>11.9.</span> Resumen
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/ejercicios.html">
                    <span>11.10.</span> Ejercicios
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_11/apendice.html">
                    <span>11.11.</span> Apéndice
                </a>
            </li>
                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Manejo de errores y excepciones</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Procesamiento de archivos</a>
            </li>
                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> Objetos</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Polimorfismo, Herencia y Delegación</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>16.</span> <a href="../capitulo_16.html"> Listas enlazadas</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>17.</span> <a href="../capitulo_17.html"> Pilas y colas</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>18.</span> <a href="../capitulo_18.html"> Modelo de ejecución de funciones y recursividad</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>19.</span> <a href="../capitulo_19.html"> Ordenar listas</a>
            </li>
                                                                                            <li class="level-1">
                <span>20.</span> <a href="../capitulo_20.html"> Algunos ordenamientos recursivos</a>
            </li>
                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
