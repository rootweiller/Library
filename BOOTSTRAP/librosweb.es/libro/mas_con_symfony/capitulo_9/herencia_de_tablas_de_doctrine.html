<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>9.1. Herencia de tablas de Doctrine (Más con Symfony)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="../capitulo_9.html" />
                    <link rel="next" href="../capitulo_9/integracion_de_la_herencia_de_tablas_en_symfony.html" />
                <link rel="start" href="/libro/mas_con_symfony/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="9.1. Herencia de tablas de Doctrine (Más con Symfony)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page mas_con_symfony"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/mas_con_symfony/" itemprop="url">
                    <span itemprop="title">Más con Symfony</span>
                </a>
            </li>

                    <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/mas_con_symfony/capitulo_9.html" itemprop="url">
                    <span itemprop="title">Capítulo 9. Utilizando la herencia de tablas de Doctrine</span>
                </a>
            </li>
        
            <li class="active">
                <span>9.1. Herencia de tablas de Doctrine</span>
            </li>
        </ol>
    </div>

    <h1 id="herencia_de_tablas_de_doctrine" class="title">
        <span>9.1.</span> Herencia de tablas de Doctrine
    </h1>

    

<p>Aunque la herencia de tablas no es muy conocida ni utilizada por la mayoría de
programadores, se trata de una de las características más interesantes de
Doctrine. La herencia de tablas permite al programador crear tablas de base de
datos que heredan de otras tablas de la misma forma que las clases pueden
heredar de otras clases en los lenguajes orientados a objetos. La herencia de
tablas es una forma sencilla de que dos o más tablas compartan información en
una única tabla padre. Observa el siguiente diagrama para comprender mejor el
funcionamiento de la herencia de tablas.</p>

<div class="figure" id="figure_9_1">
    <img src="/img/mas_con_symfony/01_table_inheritance.png" alt="Esquema de la herencia de tablas de Doctrine" title="Esquema de la herencia de tablas de Doctrine" />

    <p class="caption"><strong>Figura 9.1</strong> Esquema de la herencia de tablas de Doctrine</p>
</div>


<p>Doctrine incluye tres estrategias diferentes para gestionar la herencia de tablas
en función de las necesidades de la aplicación (rendimiento, atomicidad,
simplicidad...): <code>__simple__</code>, <code>__column aggregation__</code> y <code>__concrete__</code>. Aunque
todas estas estrategias se describen en el
<a href="http://www.doctrine-project.org/documentation/1_2/en">libro de Doctrine</a>, las
siguientes secciones explican cada una de ellas y las circunstancias en las que
son útiles.</p>

<h3 id="la_estrategia_simple_de_herencia_de_tablas">9.1.1. La estrategia simple de herencia de tablas</h3>

<p>La estrategia simple de herencia de tablas es la más básica ya que guarda todas
las columnas, incluso las de las tablas hijo, dentro de la tabla padre. Si el
esquema del modelo es como el siguiente código YAML, Doctrine genera una tabla
llamada <code>Person</code> que incluye tanto las columnas de la tabla <code>Professor</code> como
las de la tabla <code>Student</code>.</p>

<div class="code yaml">
<pre class="yaml"><span class="co4">Person</span>:<span class="co4">
  columns</span>:<span class="co4">
    first_name</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true<span class="co4">
    last_name</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true
<span class="co4">
Professor</span>:<span class="co4">
  inheritance</span>:<span class="co3">
    type</span><span class="sy2">: </span>            simple<span class="co3">
    extends</span><span class="sy2">: </span>         Person<span class="co4">
  columns</span>:<span class="co4">
    specialty</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true
<span class="co4">
Student</span>:<span class="co4">
  inheritance</span>:<span class="co3">
    type</span><span class="sy2">: </span>            simple<span class="co3">
    extends</span><span class="sy2">: </span>         Person<span class="co4">
  columns</span>:<span class="co4">
    graduation</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true<span class="co4">
    promotion</span>:<span class="co3">
      type</span><span class="sy2">: </span>          integer<span class="br0">&#40;</span><span class="nu0">4</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true</pre>
</div>

<p>En la estrategia simple de herencia de tablas, las columnas <code>specialty</code>, <code>graduation</code>
y <code>promotion</code> se añaden automáticamente en el modelo <code>Person</code> aunque Doctrine
genera una clase de modelo tanto para <code>Student</code> como para <code>Professor</code>.</p>

<div class="figure" id="figure_9_2">
    <img src="/img/mas_con_symfony/02_simple_tables_inheritance.png" alt="Esquema de la herencia simple de tablas" title="Esquema de la herencia simple de Doctrine" />

    <p class="caption"><strong>Figura 9.2</strong> Esquema de la herencia simple de tablas</p>
</div>


<p>El inconveniente de esta estrategia es que la tabla padre <code>Person</code> no incluye
ninguna columna que identifique el tipo de cada registro. En otras palabras,
no es posible obtener solamente los objetos de tipo <code>Professor</code> o <code>Student</code>.
La siguiente instrucción de Doctrine devuelve un objeto <code>Doctrine_Collection</code>
con todos los registros de la tabla (registros <code>Student</code> y <code>Professor</code>).</p>

<div class="code php">
<pre class="php"><span class="re0">$professors</span> <span class="sy0">=</span> Doctrine_Core<span class="sy0">::</span><span class="me2">getTable</span><span class="br0">&#40;</span><span class="st_h">'Professor'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">findAll</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>La estrategia estrategia simple de herencia de tablas no suele ser muy útil en
los ejemplos del mundo real, ya que normalmente es necesario seleccionar objetos
de un determinado tipo. Así que no se usará más esta estrategia en este capítulo.</p>

<h3 id="la_estrategia_de_agregacion_de_columnas_en_la_herencia_de_tablas">9.1.2. La estrategia de agregación de columnas en la herencia de tablas</h3>

<p>La ~estrategia de agregación de columnas~ en la herencia de tablas es similar a
la estrategia simple excepto por el hecho de que añade una columna llamada <code>type</code>
que identifica los diferentes tipos de registros. De esta forma, cuando se
guarda un objeto en la base de datos, se añade automáticamente un valor a la
columna <code>type</code> que indica el tipo de clase del objeto.</p>

<div class="code yaml">
<pre class="yaml"><span class="co4">Person</span>:<span class="co4">
  columns</span>:<span class="co4">
    first_name</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true<span class="co4">
    last_name</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true
<span class="co4">
Professor</span>:<span class="co4">
  inheritance</span>:<span class="co3">
    type</span><span class="sy2">: </span>            column_aggregation<span class="co3">
    extends</span><span class="sy2">: </span>         Person<span class="co3">
    keyField</span><span class="sy2">: </span>        type<span class="co3">
    keyValue</span><span class="sy2">: </span>        <span class="nu0">1</span><span class="co4">
  columns</span>:<span class="co4">
    specialty</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true
<span class="co4">
Student</span>:<span class="co4">
  inheritance</span>:<span class="co3">
    type</span><span class="sy2">: </span>            column_aggregation<span class="co3">
    extends</span><span class="sy2">: </span>         Person<span class="co3">
    keyField</span><span class="sy2">: </span>        type<span class="co3">
    keyValue</span><span class="sy2">: </span>        <span class="nu0">2</span><span class="co4">
  columns</span>:<span class="co4">
    graduation</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true<span class="co4">
    promotion</span>:<span class="co3">
      type</span><span class="sy2">: </span>          integer<span class="br0">&#40;</span><span class="nu0">4</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true</pre>
</div>

<p>En el esquema YAML anterior se ha modificado el tipo de herencia al valor
<code>column_aggregation</code> y se han añadido dos nuevos atributos. El primer
atributo se denomina <code>keyField</code> y especifica la columna que se crea para guardar
el tipo de información del registro. El atributo <code>keyField</code> es una columna de
de texto llamada <code>type</code>, que es el nombre por defecto cuando no se
especifica el atributo <code>keyField</code>. El segundo atributo (<code>keyValue</code>) define el
valor del tipo de cada registro que pertenece a la clase <code>Professor</code> o <code>Student</code>.</p>

<div class="figure" id="figure_9_3">
    <img src="/img/mas_con_symfony/03_columns_aggregation_tables_inheritance.png" alt="Esquema de la herencia de tablas basada en la agregación de columnas" title="Esquema de la herencia de tablas basada en la agregación de columnas" />

    <p class="caption"><strong>Figura 9.3</strong> Esquema de la herencia de tablas basada en la agregación de columnas</p>
</div>


<p>La estrategia de agregación de columnas es una forma de herencia de tablas muy
interesante porque crea una única tabla (<code>Person</code>) que contiene todos los campos
definidos además del campo <code>type</code> adicional. De esta forma, no es necesario crear
varias tablas para unirlas después mediante una consulta SQL. A continuación
se muestran algunos ejemplos de cómo realizar consultas en las tablas y el tipo
de resultados devueltos:</p>

<div class="code php">
<pre class="php"><span class="co1">// Devuelve un Doctrine_Collection de objetos Professor</span>
<span class="re0">$professors</span> <span class="sy0">=</span> Doctrine_Core<span class="sy0">::</span><span class="me2">getTable</span><span class="br0">&#40;</span><span class="st_h">'Professor'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">findAll</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Devuelve un Doctrine_Collection de objetos Student</span>
<span class="re0">$students</span> <span class="sy0">=</span> Doctrine_Core<span class="sy0">::</span><span class="me2">getTable</span><span class="br0">&#40;</span><span class="st_h">'Student'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">findAll</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Devuelve un objeto Professor</span>
<span class="re0">$professor</span> <span class="sy0">=</span> Doctrine_Core<span class="sy0">::</span><span class="me2">getTable</span><span class="br0">&#40;</span><span class="st_h">'Professor'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">findOneBySpeciality</span><span class="br0">&#40;</span><span class="st_h">'physics'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Devuelve un objeto Student</span>
<span class="re0">$student</span> <span class="sy0">=</span> Doctrine_Core<span class="sy0">::</span><span class="me2">getTable</span><span class="br0">&#40;</span><span class="st_h">'Student'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">find</span><span class="br0">&#40;</span><span class="nu0">42</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Devuelve un onjeto Student</span>
<span class="re0">$student</span> <span class="sy0">=</span> Doctrine_Core<span class="sy0">::</span><span class="me2">getTable</span><span class="br0">&#40;</span><span class="st_h">'Person'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">findOneByIdAndType</span><span class="br0">&#40;</span><span class="kw3">array</span><span class="br0">&#40;</span><span class="nu0">42</span><span class="sy0">,</span> <span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>Cuando se obtienen datos de una subclase (<code>Professor</code>, <code>Student</code>), Doctrine
añade automáticamente la cláusula <code>WHERE</code> necesaria de SQL para realizar la
consulta con el valor correspondiente de la columna <code>type</code>.</p>

<p>No obstante, en algunos casos la agregación de columnas presenta inconvenientes.
En primer lugar, la agregación de columnas impide que los campos de cada sub-tabla
puedan ser configurados como <code>required</code>. Dependiendo de cuantos campos haya, la
 tabla <code>Person</code> puede contener registros con varios campos vacíos.</p>

<p>El segundo inconveniente está relacionado con el número de sub-tablas y campos.
Si el esquema declara muchas sub-tablas y cada una declara a su vez muchos
campos, la tabla padre final contendrá un gran número de columnas. Por tanto,
esta tabla padre puede ser difícil de mantener.</p>

<h3 id="la_estrategia_concreta_de_herencia_de_tablas">9.1.3. La estrategia concreta de herencia de tablas</h3>

<p>La estrategia concreta de herencia de tablas es un compromiso entre las ventajas
de la agregación de columnas, el rendimiento de la aplicación y su facilidad de
mantenimiento. Efectivamente, esta estrategia crea una tabla independiente por
cada subclase conteniendo todas las columnas: tanto las columnas compartidas
como las columnas exclusivas de cada modelo.</p>

<div class="code yaml">
<pre class="yaml"><span class="co4">Person</span>:<span class="co4">
  columns</span>:<span class="co4">
    first_name</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true<span class="co4">
    last_name</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true
<span class="co4">
Professor</span>:<span class="co4">
  inheritance</span>:<span class="co3">
    type</span><span class="sy2">: </span>            concrete<span class="co3">
    extends</span><span class="sy2">: </span>         Person<span class="co4">
  columns</span>:<span class="co4">
    specialty</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true
<span class="co4">
Student</span>:<span class="co4">
  inheritance</span>:<span class="co3">
    type</span><span class="sy2">: </span>            concrete<span class="co3">
    extends</span><span class="sy2">: </span>         Person<span class="co4">
  columns</span>:<span class="co4">
    graduation</span>:<span class="co3">
      type</span><span class="sy2">: </span>          string<span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true<span class="co4">
    promotion</span>:<span class="co3">
      type</span><span class="sy2">: </span>          integer<span class="br0">&#40;</span><span class="nu0">4</span><span class="br0">&#41;</span><span class="co3">
      notnull</span><span class="sy2">: </span>       true</pre>
</div>

<p>El esquema anterior genera una tabla <code>Professor</code> con los siguientes campos:
<code>id</code>, <code>first_name</code>, <code>last_name</code> y <code>specialty</code>.</p>

<div class="figure" id="figure_9_4">
    <img src="/img/mas_con_symfony/04_concrete_tables_inheritance.png" alt="Esquema de la herencia concreta de tablas" title="Esquema de la herencia concreta de tablas" />

    <p class="caption"><strong>Figura 9.4</strong> Esquema de la herencia concreta de tablas</p>
</div>


<p>Esta estrategia tiene varias ventajas respecto de las anteriores. La primera es
que cada tabla permanece aislada y es independiente de las otras tablas. Además,
ya no se guardan columnas vacías y tampoco se incluye la columna adicional <code>type</code>.
El resultado es que cada tabla es mucho más pequeña y está aislada del resto.</p>

<div class="admonition note"><p><strong class="title">Nota</strong> El hecho de que las columnas comunes estén duplicadas en las sub-tablas es
una mejora del rendimiento y de la escalabilidad, ya que Doctrine no tiene que
hacer uniones SQL automáticas con la tabla padre para obtener los datos
compartidos que pertenecen a un registro de una sub-tabla.</p></div>

<p>Las únicas dos desventajas de la herencia concreta de tabla son la duplicación
de las columnas compartidas (aunque la duplicación es buena para mejorar el
rendimiento) y el hecho de que la tabla padre generada siempre estará vacía.
Efectivamente, Doctrine genera una tabla <code>Person</code> aunque nunca guarde información
en ella ni la utilice en las consultas. Como toda la información se guarda en
las sub-tablas, esta tabla padre no se utilizará en ninguna consulta.</p>

<p>Hasta ahora sólo se han presentado las tres estrategias de herencias de tablas
de Doctrine, pero todavía no se han utilizado en ningún proyecto real desarrollado
con Symfony. La siguiente parte de este capítulo explica cómo aprovechar la
herencia de tablas de Doctrine en Symfony 1.3, sobre todo en el modelo y en
el framework de formularios.</p>



            <div class="module module-ad module-ad-responsive module-ad-bottom">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="../capitulo_9.html">
                        <strong>&larr; Anterior</strong>
                        <small>Capítulo 9. Utilizando la herencia de tablas de Doctrine</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="../capitulo_9/integracion_de_la_herencia_de_tablas_en_symfony.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>9.2. Integración de la herencia de tablas en Symfony</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="../capitulo_1.html"> Introducción</a>
            </li>
                                                                                                            <li class="level-1">
                <span>2.</span> <a href="../capitulo_2.html"> Enrutamiento avanzado</a>
            </li>
                                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="../capitulo_3.html"> Mejora tu productividad</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>4.</span> <a href="../capitulo_4.html"> Emails</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>5.</span> <a href="../capitulo_5.html"> Widgets y validadores propios</a>
            </li>
                                                                                                            <li class="level-1">
                <span>6.</span> <a href="../capitulo_6.html"> Formularios avanzados</a>
            </li>
                                                                                                                                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="../capitulo_7.html"> Mejorando la barra de depuración web</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="../capitulo_8.html"> Uso avanzado de Doctrine</a>
            </li>
                                                                                            <li class="level-1 ">
                <a href="../capitulo_9.html">
                    <span>Capítulo 9.</span> Utilizando la herencia de tablas de Doctrine
                </a>
            </li>
                                            <li class="level-2 active">
                <a href="../capitulo_9/herencia_de_tablas_de_doctrine.html">
                    <span>9.1.</span> Herencia de tablas de Doctrine
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_9/integracion_de_la_herencia_de_tablas_en_symfony.html">
                    <span>9.2.</span> Integración de la herencia de tablas en Symfony
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="../capitulo_9/conclusion.html">
                    <span>9.3.</span> Conclusión
                </a>
            </li>
                                            <li class="level-1">
                <span>10.</span> <a href="../capitulo_10.html"> Funcionamiento interno de Symfony</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>11.</span> <a href="../capitulo_11.html"> Windows y Symfony</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>12.</span> <a href="../capitulo_12.html"> Desarrollando aplicaciones Facebook</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>13.</span> <a href="../capitulo_13.html"> Descubriendo el poder de la línea de comandos</a>
            </li>
                                                                                                                                                                                                                                                                                                                                            <li class="level-1">
                <span>14.</span> <a href="../capitulo_14.html"> Jugando con la cache de configuración de Symfony</a>
            </li>
                                                                                                                                                                                                                            <li class="level-1">
                <span>15.</span> <a href="../capitulo_15.html"> Trabajando con la comunidad Symfony</a>
            </li>
                                                                                            <li class="level-1">
                <span>A.</span> <a href="../apendice_a.html"> Código JavaScript de sfWidgetFormGMapAddress</a>
            </li>
                                            <li class="level-1">
                <span>B.</span> <a href="../apendice_b.html"> Ejemplo de instalador propio</a>
            </li>
                                            <li class="level-1">
                <span>C.</span> <a href="../apendice_c.html"> Licencia</a>
            </li>
                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
