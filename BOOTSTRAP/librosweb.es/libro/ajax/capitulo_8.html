<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Capítulo 8. Técnicas básicas con AJAX (Introducción a AJAX)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="./capitulo_7/seguridad.html" />
                    <link rel="next" href="./capitulo_8/teclado_virtual.html" />
                <link rel="start" href="/libro/ajax/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Capítulo 8. Técnicas básicas con AJAX (Introducción a AJAX)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page ajax"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
            <div class="module module-ad module-ad-responsive module-ad-top">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/ajax/" itemprop="url">
                    <span itemprop="title">Introducción a AJAX</span>
                </a>
            </li>

        
            <li class="active">
                <span>Capítulo 8. Técnicas básicas con AJAX</span>
            </li>
        </ol>
    </div>

    <h1 id="tecnicas_basicas_con_ajax" class="title">
        <span>Capítulo 8.</span> Técnicas básicas con AJAX
    </h1>

    <h2 id="listas_desplegables_encadenadas">8.1. Listas desplegables encadenadas</h2>


<h3 id="contexto">8.1.1. Contexto</h3>

<p>Algunas aplicaciones web disponen de varias listas desplegables encadenadas. En este tipo de listas, cuando se selecciona un elemento de la primera lista desplegable, se cargan en la segunda lista unos valores que dependen del valor seleccionado en la primera lista.</p>

<p>El mayor inconveniente de este tipo de listas se produce cuando existen un gran número de opciones posibles. Si se considera por ejemplo el caso de una tienda, en la primera lista desplegable se pueden mostrar decenas de productos y en la segunda lista se muestran los diferentes modelos de cada producto y sus precios.</p>

<p>Si todos los elementos de las listas desplegables se almacenan mediante arrays de JavaScript en la propia página, los tiempos de carga se pueden disparar y hacerlo completamente inviable.</p>

<p>Por otra parte, se puede optar por recargar completamente la página cada vez que se selecciona un valor diferente en la primera lista desplegable. Sin embargo, recargar la página entera cada vez que se selecciona un valor, aumenta la carga en el servidor y el tiempo de espera del usuario.</p>

<p>Una posible solución intermedia consiste en actualizar las listas desplegables mediante AJAX. Los valores de la primera lista se incluyen en la página web y cuando se selecciona un valor de esta lista, se realiza una consulta al servidor que devuelve los valores que se deben mostrar en la otra lista desplegable.</p>

<h3 id="solucion_propuesta">8.1.2. Solución propuesta</h3>

<p>A continuación se muestra el esquema gráfico del funcionamiento de la solución propuesta:</p>

<div class="figure left" id="figure_8_1">
    <img src="/img/ajax/f0801.gif" alt="Solución propuesta para las listas encadenadas con AJAX" />

    <p class="caption"><strong>Figura 8.1</strong> Solución propuesta para las listas encadenadas con AJAX</p>
</div>


<p><div class="exercise"><p class="title">Ejercicio 16</p> <p>Crear un script que cargue de forma dinámica mediante AJAX la lista de provincias de un país y la lista de los municipios de cada provincia seleccionada.</p>

<p>1) Definir el código HTML de las dos listas desplegables vacías.</p>

<p>2) Cuando se cargue la página, cargar la lista de provincias en la primera lista desplegable. El script del servidor se llama <code>cargaProvinciasXML.php</code>. El formato de la respuesta es XML, con la siguiente estructura:</p>

<div class="code xml">
<pre class="xml"><span class="sc3"><span class="re1">&lt;provincias<span class="re2">&gt;</span></span></span>
  <span class="sc3"><span class="re1">&lt;provincia<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;codigo<span class="re2">&gt;</span></span></span>01<span class="sc3"><span class="re1">&lt;/codigo<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;nombre<span class="re2">&gt;</span></span></span>Álava<span class="sc3"><span class="re1">&lt;/nombre<span class="re2">&gt;</span></span></span>
  <span class="sc3"><span class="re1">&lt;/provincia<span class="re2">&gt;</span></span></span>
  ...
<span class="sc3"><span class="re1">&lt;/provincias<span class="re2">&gt;</span></span></span></pre>
</div>

<p>Para insertar las opciones en la lista desplegable, se pueden utilizar dos técnicas:</p>

<ol>
<li>Propiedad <code>innerHTML</code> de la lista y código HTML de cada etiqueta <code>&lt;option&gt;</code>.</li>
<li>Crear elementos de tipo opción (<code>new Option(nombre, valor)</code>) y añadirlo al array <code>options[]</code> de la lista desplegable.</li>
</ol>

<p>3) Añadir de forma semántica el evento adecuado a la lista de provincias para que cuando se seleccione una provincia, se carguen automáticamente todos sus municipios en la otra lista.</p>

<p>4) Cuando se seleccione una determinada provincia, se carga mediante AJAX la lista completa de municipios en la otra lista desplegable. El script del servidor se llama <code>cargaMunicipiosXML.php</code>. El parámetro que se debe enviar al servidor es el código de la provincia y el parámetro se llama <code>provincia</code>. El método que espera el servidor es <code>POST</code>. El formato de la respuesta es XML, con la siguiente estructura:</p>

<div class="code xml">
<pre class="xml"><span class="sc3"><span class="re1">&lt;municipios<span class="re2">&gt;</span></span></span>
  <span class="sc3"><span class="re1">&lt;municipio<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;codigo<span class="re2">&gt;</span></span></span>0014<span class="sc3"><span class="re1">&lt;/codigo<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;nombre<span class="re2">&gt;</span></span></span>Alegría-Dulantzi<span class="sc3"><span class="re1">&lt;/nombre<span class="re2">&gt;</span></span></span>
  <span class="sc3"><span class="re1">&lt;/municipio<span class="re2">&gt;</span></span></span>
  ...
<span class="sc3"><span class="re1">&lt;/municipios<span class="re2">&gt;</span></span></span></pre>
</div>

<p><a href="/ejercicios/ajax/ejercicio16/ejercicio16.zip">Descargar archivo ZIP con los scripts cargaProvinciasXML.php y cargaMunicipiosXML.php</a></p>

<p><a href="http://www.librosweb.es/ajax/capitulo14/ejercicio_16.html">Ver solución</a></p></div></p>

<p><div class="exercise"><p class="title">Ejercicio 17</p> <p>Modificar el ejercicio anterior para soportar las respuestas del servidor en formato JSON. Los cambios introducidos son los siguientes:</p>

<p>1) El script del servidor utilizado para cargar las provincias se llama <code>cargaProvinciasJSON.php</code> y la respuesta del servidor tiene el siguiente formato:</p>

<div class="code javascript">
<pre class="javascript"><span class="br0">&#123;</span> <span class="st0">&quot;01&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Álava/Araba&quot;</span><span class="sy0">,</span>  <span class="st0">&quot;02&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Albacete&quot;</span><span class="sy0">,</span>  <span class="st0">&quot;03&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Alicante/Alacant&quot;</span><span class="sy0">,</span> ...  <span class="br0">&#125;</span></pre>
</div>

<p>2) El script del servidor utilizado para cargar los municipios se llama <code>cargaMunicipiosJSON.php</code> y la respuesta del servidor tiene el siguiente formato:</p>

<div class="code javascript">
<pre class="javascript"><span class="br0">&#123;</span> <span class="st0">&quot;0014&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Alegría-Dulantzi&quot;</span><span class="sy0">,</span>  <span class="st0">&quot;0029&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Amurrio&quot;</span><span class="sy0">,</span>  ...  <span class="br0">&#125;</span></pre>
</div>

<p><a href="/ejercicios/ajax/ejercicio17/ejercicio17.zip">Descargar archivo ZIP con los scripts cargaProvinciasJSON.php y cargaMunicipiosJSON.php</a></p>

<p><a href="http://www.librosweb.es/ajax/capitulo14/ejercicio_17.html">Ver solución</a></p></div></p>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="./capitulo_7/seguridad.html">
                        <strong>&larr; Anterior</strong>
                        <small>7.7. Seguridad</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="./capitulo_8/teclado_virtual.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>8.2. Teclado virtual</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="./capitulo_1.html"> Introducción a AJAX</a>
            </li>
                                            <li class="level-1">
                <span>2.</span> <a href="./capitulo_2.html"> JavaScript básico</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="./capitulo_3.html"> JavaScript avanzado</a>
            </li>
                                                                            <li class="level-1">
                <span>4.</span> <a href="./capitulo_4.html"> DOM (Document Object Model)</a>
            </li>
                                                                                            <li class="level-1">
                <span>5.</span> <a href="./capitulo_5.html"> BOM (Browser Object Model)</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="./capitulo_6.html"> Eventos</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="./capitulo_7.html"> Primeros pasos con AJAX</a>
            </li>
                                                                                                                                            <li class="level-1 active">
                <a href="./capitulo_8.html">
                    <span>Capítulo 8.</span> Técnicas básicas con AJAX
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="./capitulo_8/teclado_virtual.html">
                    <span>8.2.</span> Teclado virtual
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="./capitulo_8/autocompletar.html">
                    <span>8.3.</span> Autocompletar
                </a>
            </li>
                                            <li class="level-1">
                <span>9.</span> <a href="./capitulo_9.html"> Técnicas avanzadas con AJAX</a>
            </li>
                                                                                            <li class="level-1">
                <span>10.</span> <a href="./capitulo_10.html"> Frameworks y librerías</a>
            </li>
                                                                                                            <li class="level-1">
                <span>11.</span> <a href="./capitulo_11.html"> Otras utilidades</a>
            </li>
                                                                                                            <li class="level-1">
                <span>12.</span> <a href="./capitulo_12.html"> Recursos útiles</a>
            </li>
                                            <li class="level-1">
                <span>13.</span> <a href="./capitulo_13.html"> Bibliografía</a>
            </li>
                                            <li class="level-1">
                <span>14.</span> <a href="./capitulo_14.html"> Ejercicios resueltos</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
