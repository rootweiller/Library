<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Capítulo 9. Técnicas avanzadas con AJAX (Introducción a AJAX)</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                    <link rel="prev" href="./capitulo_8/autocompletar.html" />
                    <link rel="next" href="./capitulo_9/lector_rss.html" />
                <link rel="start" href="/libro/ajax/" />
                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Capítulo 9. Técnicas avanzadas con AJAX (Introducción a AJAX)">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-1-2" class="books book_page ajax"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                        
    
    <div id="book-toc-anchor" class="well visible-xs">
        <a href="#indice">
            <i class="fa fa-book"></i> Ver índice de contenidos del libro
        </a>
    </div>

    <div id="breadcrumb" class="hidden-xs">
        <ol>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libros/" itemprop="url">
                    <span itemprop="title">Libros</span>
                </a>
            </li>

            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                <a href="/libro/ajax/" itemprop="url">
                    <span itemprop="title">Introducción a AJAX</span>
                </a>
            </li>

        
            <li class="active">
                <span>Capítulo 9. Técnicas avanzadas con AJAX</span>
            </li>
        </ol>
    </div>

    <h1 id="tecnicas_avanzadas_con_ajax" class="title">
        <span>Capítulo 9.</span> Técnicas avanzadas con AJAX
    </h1>

    <h2 id="monitorizacion_de_servidores_remotos">9.1. Monitorización de servidores remotos</h2>


<h3 id="contexto">9.1.1. Contexto</h3>

<p>Las aplicaciones JavaScript ejecutadas en los navegadores tienen unas restricciones muy estrictas en cuanto a su seguridad. Además de no poder acceder a recursos locales como archivos y directorios, los scripts solamente pueden realizar conexiones de red con el mismo dominio al que pertenece la aplicación JavaScript.</p>

<h3 id="solucion_propuesta">9.1.2. Solución propuesta</h3>

<p><div class="exercise"><p class="title">Ejercicio 20</p> <p>Se propone la realización de una consola básica de monitorización de equipos de red. Los servidores que se van a monitorizar pertenecen a dominios conocidos de Internet y por tanto, externos a la aplicación JavaScript.</p>

<p>En otras palabras, se trata de <em>"hacer un ping"</em> a través de la red mediante AJAX para comprobar los equipos que se quieren monitorizar.</p>

<p>1) Cuando se cargue la página, se debe construir <em>"el mapa de red"</em> que muestra todos los servidores que se van a monitorizar. Para construir este mapa, se proporciona la página web básica y un objeto llamado <code>nodos</code>, que contiene los datos correspondientes a los equipos que se quieren monitorizar.</p>

<p>Para mostrar cada nodo que se van a monitorizar, se crean dinámicamente elementos de tipo <code>&lt;div&gt;</code> que muestran el nombre de cada nodo, su URL y una zona de datos en la que se mostrará más adelante cierta información del nodo. A continuación se muestra un ejemplo del posible código XHTML que se puede utilizar:</p>

<div class="code html5">
<pre class="html5"><span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;nodo0&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;normal&quot;</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">strong</span>&gt;</span>Nombre<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">strong</span>&gt;</span>
  <span class="sc2">&lt;<span class="kw2">br</span><span class="sy0">/</span>&gt;</span>
  URL
  <span class="sc2">&lt;<span class="kw2">span</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;datos0&quot;</span>&gt;&lt;<span class="sy0">/</span><span class="kw2">span</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span></pre>
</div>

<div class="figure" id="figure_9_1">
    <img src="/img/ajax/f0901.gif" alt="Aspecto inicial de la consola de monitorización mostrando todos los servidores remotos que se van a monitorizar" />

    <p class="caption"><strong>Figura 9.1</strong> Aspecto inicial de la consola de monitorización mostrando todos los servidores remotos que se van a monitorizar</p>
</div>


<p>2) La consola de monitorización se controla mediante dos botones. De esta forma, se deben establecer los eventos adecuados en los botones <code>Monitorizar</code> y <code>Detener</code>.</p>

<p>3) Al pulsar sobre el botón <code>Monitorizar</code> debe comenzar la ejecución periódica (por ejemplo cada 10 segundos) de la función que realiza las conexiones con los servidores y procesa su respuesta. Al pulsar sobre el botón <code>Detener</code>, se debe impedir la ejecución periódica de esa función.</p>

<p>4) La función que se ejecuta de forma periódica (por ejemplo cada 10 segundos) debe realizar un <em>"ping"</em> a cada uno de los equipos. Hacer un <em>ping</em> consiste en intentar establecer una conexión con el servidor utilizando el método <code>HEAD</code> de HTTP (en vez de los tradicionales métodos <code>GET</code> o <code>POST</code>).</p>

<p>Si se intenta acceder a la página principal de un sitio web utilizando el método <code>HEAD</code> y la petición es correcta, el servidor devuelve las cabeceras HTTP. De esta forma, para comprobar si el servidor ha respondido de forma correcta, se puede intentar obtener el valor de alguna cabecera enviada por el servidor, como por ejemplo <code>Date</code>.</p>

<p>Para realizar las peticiones, se puede utilizar la utilidad <code>net.CargadorContenidosCompleto</code> y establecer de forma adecuada las funciones que se encargan de procesar las respuestas correctas y las respuestas erróneas.</p>

<p>5) La función que procesa las respuestas correctamente recibidas, debe obtener el valor de alguna cabecera HTTP como por ejemplo <code>Date</code>. Si la respuesta es correcta, mostrar en la zona <code>&lt;span id="datos"&gt;&lt;/span&gt;</code> de cada nodo el valor de la cabecera <code>Server</code>, que indica el tipo de servidor web que utiliza el nodo remoto.</p>

<p>6) También es importante mostrar visualmente la monitorización que se está realizando, por lo que se van a modificar las propiedades CSS de cada nodo para indicar el estado en el que se encuentra:</p>

<ul>
<li>Cuando se está realizando una consulta al servidor, la propiedad <code>border</code> de CSS debe ser igual a <code>3px solid #000000</code>.</li>
<li>Cuando la respuesta recibida es correcta, la clase CSS del <code>&lt;div&gt;</code> es <code>"on"</code> y el valor de la propiedad <code>border</code> es <code>3px solid #00FF00</code>.</li>
<li>Cuando la respuesta es errónea, la clase CSS del <code>&lt;div&gt;</code> es <code>"off"</code> y el valor de la propiedad <code>border</code> es <code>3px solid #FF0000</code>.</li>
</ul>

<div class="figure" id="figure_9_2">
    <img src="/img/ajax/f0902.gif" alt="La consola de monitorización muestra visualmente el estado de cada nodo y también muestra parte de la información devuelta por el servidor" />

    <p class="caption"><strong>Figura 9.2</strong> La consola de monitorización muestra visualmente el estado de cada nodo y también muestra parte de la información devuelta por el servidor</p>
</div>


<p><a href="/ejercicios/ajax/ejercicio20/ejercicio20.zip">Descargar archivo ZIP con la página HTML</a></p>

<p><a href="http://www.librosweb.es/ajax/capitulo14/ejercicio_20.html">Ver solución</a></p></div></p>

<p>Al ejecutar la aplicación en Internet Explorer, se muestra un aviso al usuario sobre si desea dar permiso a la aplicación para realizar conexiones externas:</p>

<div class="figure" id="figure_9_3">
    <img src="/img/ajax/f0903.gif" alt="Mensaje de aviso que muestra Internet Explorer al intentar establecer conexiones de red con servidores remotos" />

    <p class="caption"><strong>Figura 9.3</strong> Mensaje de aviso que muestra Internet Explorer al intentar establecer conexiones de red con servidores remotos</p>
</div>


<p>Para poder ejecutar correctamente la aplicación en los navegadores de tipo Firefox, se debe firmar digitalmente el script y solicitar permiso de forma expresa al usuario. Para más información, se puede consultar el siguiente recurso: http://www.mozilla.org/projects/security/components/signed-scripts.html</p>



    
    <div id="book-pager">
        <ul class="row pager">
            <li class="col-xs-6 previous ">
                                    <a href="./capitulo_8/autocompletar.html">
                        <strong>&larr; Anterior</strong>
                        <small>8.3. Autocompletar</small>
                    </a>
                            </li>

            <li class="col-xs-6 next ">
                                    <a href="./capitulo_9/lector_rss.html">
                        <strong>Siguiente &rarr;</strong>
                        <small>9.2. Lector RSS</small>
                    </a>
                            </li>
        </ul>
    </div>

                        </div>

                    <div id="sidebar" class="col-sm-3">
                        
            <div class="module module-share">
        <h3>Compartir</h3>
        <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = '{{ item_social_title }}';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

    </div>

            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    
    <div id="book-toc" class="module">
        <a id="indice"></a>

        <h3>Indice de contenidos</h3>
        <ul class="toc text-links">
                                            <li class="level-1">
                <span>1.</span> <a href="./capitulo_1.html"> Introducción a AJAX</a>
            </li>
                                            <li class="level-1">
                <span>2.</span> <a href="./capitulo_2.html"> JavaScript básico</a>
            </li>
                                                                                                                                                            <li class="level-1">
                <span>3.</span> <a href="./capitulo_3.html"> JavaScript avanzado</a>
            </li>
                                                                            <li class="level-1">
                <span>4.</span> <a href="./capitulo_4.html"> DOM (Document Object Model)</a>
            </li>
                                                                                            <li class="level-1">
                <span>5.</span> <a href="./capitulo_5.html"> BOM (Browser Object Model)</a>
            </li>
                                                                                                                            <li class="level-1">
                <span>6.</span> <a href="./capitulo_6.html"> Eventos</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>7.</span> <a href="./capitulo_7.html"> Primeros pasos con AJAX</a>
            </li>
                                                                                                                                            <li class="level-1">
                <span>8.</span> <a href="./capitulo_8.html"> Técnicas básicas con AJAX</a>
            </li>
                                                                            <li class="level-1 active">
                <a href="./capitulo_9.html">
                    <span>Capítulo 9.</span> Técnicas avanzadas con AJAX
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="./capitulo_9/lector_rss.html">
                    <span>9.2.</span> Lector RSS
                </a>
            </li>
                                            <li class="level-2 ">
                <a href="./capitulo_9/google_maps.html">
                    <span>9.3.</span> Google Maps
                </a>
            </li>
                                            <li class="level-1">
                <span>10.</span> <a href="./capitulo_10.html"> Frameworks y librerías</a>
            </li>
                                                                                                            <li class="level-1">
                <span>11.</span> <a href="./capitulo_11.html"> Otras utilidades</a>
            </li>
                                                                                                            <li class="level-1">
                <span>12.</span> <a href="./capitulo_12.html"> Recursos útiles</a>
            </li>
                                            <li class="level-1">
                <span>13.</span> <a href="./capitulo_13.html"> Bibliografía</a>
            </li>
                                            <li class="level-1">
                <span>14.</span> <a href="./capitulo_14.html"> Ejercicios resueltos</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                        </ul>
    </div>
                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
