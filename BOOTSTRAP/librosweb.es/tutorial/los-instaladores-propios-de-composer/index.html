<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml" xml:lang="es" lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Los instaladores propios de Composer</title>
                                    <link rel="stylesheet" href="/css/app.css" />
                        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82842-2', 'librosweb.es');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
                        <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon.png">
        <meta name="apple-mobile-web-app-title" content="LibrosWeb">
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <meta name="site-version" content="a7f65a4">
                <link rel="publisher" href="http://plus.google.com/112008023125011571577">
                                                <meta name="twitter:site" content="@librosweb">
                <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="LibrosWeb">
                <meta property="fb:page_id" content="437758756273955">
                <meta property="fb:app_id" content="437758756273955">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Los instaladores propios de Composer">
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200">
                <meta name="msapplication-TileColor" content="#CC1414">
        <meta name="application-name" content="LibrosWeb">
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web.">
    </head>

    <body id="p-2-1" class="tutorials"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
        <div class="content-background"></div>

        <div id="header">
            <div class="navbar navbar-default navbar-static-top">
              <div class="container">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-menu">
                    <span class="sr-only">Desplegar menú</span>
                    <i class="fa fa-menu"></i>
                  </button>
                  <a class="navbar-brand" href="/" title="LibrosWeb.es">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 132 32" preserveAspectRatio="xMinYMin meet">
<g fill="#CC1414" transform="translate(-21.738 -21.148)">
<path d="m24.062 23.486v28h9.64v-5h-4.04v-23h-5.6"/>
<path d="m40.796 23.486h-5.6v28h5.6v-28"/>
<path d="m53.932 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32 1-1 1h-1.32v-6.64h1.32c0.68 0 1 0.32 1 1m-2.32 10.32h1.4c0.68 0 1 0.32 1 1v5.08c0 0.68-0.32 1-1 1h-1.4v-7.08"/>
<path d="m69.284 38.246c1.52-0.56 2.4-1.76 2.4-4.16v-5.4c0-3.48-1.72-5.2-5.2-5.2h-8.36v28h5.6v-10.6h1.4c0.68 0 1 0.32 1 1v9.6h5.6v-9.64c0-2.04-0.72-3.12-2.44-3.6m-3.2-8.88v5.76c0 0.68-0.32 1-1 1h-1.36v-7.76h1.36c0.68 0 1 0.32 1 1"/>
<path d="m87.513 46.526v-18.08c0-3.48-1.72-5.2-5.2-5.2h-3.6c-3.48 0-5.2 1.72-5.2 5.2v18.08c0 3.48 1.72 5.2 5.2 5.2h3.6c3.48 0 5.2-1.72 5.2-5.2m-5.6-17.48v16.88c0 0.68-0.32 1-1 1h-0.8c-0.68 0-1-0.32-1-1v-16.88c0-0.68 0.32-1 1-1h0.8c0.68 0 1 0.32 1 1"/>
<path d="m100.57 36.966-4.8-3.56c-0.68-0.48-0.96-0.92-0.96-1.8v-2.64c0-0.68 0.32-1 1-1h0.44c0.68 0 1 0.32 1 1v4.6h5.48v-5.12c0-3.48-1.72-5.2-5.2-5.2h-3.04c-3.48 0-5.2 1.72-5.2 5.2v4.44c0 2 0.52 3.16 2.24 4.4l4.8 3.56c0.68 0.48 0.96 0.92 0.96 1.8v3.36c0 0.68-0.32 1-1 1h-0.52c-0.68 0-1-0.32-1-1v-5.44h-5.48v5.96c0 3.48 1.72 5.2 5.2 5.2h3.12c3.48 0 5.2-1.72 5.2-5.2v-5.16c0-2.08-0.52001-3.16-2.24-4.4"/>
<path d="m106.98 51.486h6.16l1.44-12.72 1.44 12.72h6.16l3.4-28h-4.96l-1.44 14.88-1.6-14.88h-5.28l-1.6 14.92-1.44-14.92h-5.68l3.4 28"/>
<path d="m126.87 23.486v28h10.48v-5h-4.88v-6.72h4.6v-5h-4.6v-6.28h4.8v-5h-10.4"/>
<path d="m150.26 37.006c1.48-0.56 2.32-1.76 2.32-4.16v-4.16c0-3.48-1.72-5.2-5.2-5.2h-8.24v28h8.32c3.48 0 5.2-1.72 5.2-5.2v-5.68c0-2.04-0.72001-3.12-2.4-3.6m-3.24-7.72v4.64c0 0.68-0.32001 1-1 1h-1.32v-6.64h1.32c0.67999 0 1 0.32 1 1m-2.32 10.32h1.4c0.67999 0 1 0.32 1 1v5.08c0 0.68-0.32001 1-1 1h-1.4v-7.08"/>
</g>
</svg>
                      <span>LibrosWeb</span>
                  </a>
                </div>

                <div class="collapse navbar-collapse navbar-right" id="header-menu">
                  <ul class="nav navbar-nav pull-right">
                    
                                                <li class="">
                            <a href="/">
                                Inicio
                            </a>
                        </li>
                                                <li class="">
                            <a href="/libros/">
                                Libros
                            </a>
                        </li>
                                                <li class="active">
                            <a href="/tutoriales/">
                                Tutoriales
                            </a>
                        </li>
                                                <li class="">
                            <a href="/eventos/">
                                Eventos
                            </a>
                        </li>
                                                <li class="">
                            <a href="/foro/">
                                Foro
                            </a>
                        </li>
                                                <li class="">
                            <a href="/buscar">
                                Buscar
                            </a>
                        </li>
                                          </ul>
                </div>
              </div>
            </div>
        </div>

        <div id="wrapper" class="container">

            <div id="content" class="row">
                                    <div id="main" class="col-sm-9">
                            <h1 class="title">Los instaladores propios de Composer</h1>

    <p>En ocasiones, los paquetes instalados mediante Composer necesitan realizar algunas tareas durante su instalación, como por ejemplo instalar elementos fuera del directorio <code>vendor/</code> por defecto.</p>
<p>Composer permite crear instaladores propios para definir toda esta lógica específica de cada paquete.</p>
<h2>Ejecutando un instalador propio</h2>
<p>Suponiendo que ya hayas definido un instalador propio tal y como se explica en la siguiente sección, utilizarlo es tan sencillo como definir el valor adecuado en la propiedad <code>type</code> del archivo <code>composer.json</code> del paquete.</p>
<p>Como cada instalador propio define el tipo de paquete que es capaz de instalar, en cuanto Composer encuentra un instalador capaz de instalar un tipo concreto de paquete, se descarta el instalador normal y se ejecuta el instalador propio.</p>
<p>Un ejemplo práctico de la utilidad de los instaladores propios es la librería <code>phpDocumentor</code>, que contiene varias plantillas que deben instalarse fuera del tradicional directorio <code>vendor/</code>. Para ello, sus creadores han decidido definir un tipo especial de paquete llamado <code>phpdocumentor-template</code> y crear un instalador propio que instale las plantillas en el directorio correcto.</p>
<p>El siguiente ejemplo muestra el archivo <code>composer.json</code> de un paquete de este tipo que contenga plantillas:</p>
<pre class="javascript code"><span class="br0">&#123;</span>
    <span class="st0">&quot;name&quot;</span><span class="sy0">:</span> <span class="st0">&quot;phpdocumentor/template-responsive&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;type&quot;</span><span class="sy0">:</span> <span class="st0">&quot;phpdocumentor-template&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;require&quot;</span><span class="sy0">:</span> <span class="br0">&#123;</span>
        <span class="st0">&quot;phpdocumentor/template-installer&quot;</span><span class="sy0">:</span> <span class="st0">&quot;*&quot;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<p>Para asegurarte de que el instalador propio está disponible al instalar un paquete de ese tipo, es <strong>muy importante</strong> que el paquete añada a su instalador como dependencia mediante la propiedad <code>require</code>.</p>
<h2>Creando un instalador propio</h2>
<p>Los instaladores propios son simplemente clases que implementan la interfaz <code>Composer\Installer\InstallerInterface</code> y se encuentran dentro de algún paquete de Composer de tipo <code>composer-installer</code>.</p>
<p>Por lo tanto, un instalador sencillo está compuesto por dos archivos:</p>
<ol>
<li>El archivo <code>composer.json</code> que define el paquete.</li>
<li>La clase del instalador, como por ejemplo <code>My\Project\Composer\Installer.php</code> (y que implementa la interfaz <code>Composer\Installer\InstallerInterface</code>).</li>
</ol>
<h3>El archivo composer.json</h3>
<p>El archivo <code>composer.json</code> es igual que el de cualquier otro paquete normal de Composer, salvo por las dos siguientes restricciones:</p>
<ol>
<li>La propiedad <code>type</code> debe ser <code>composer-installer</code>.</li>
<li>La propiedad <code>extra</code> debe contener una propiedad llamada <code>class</code> y cuyo valor define el nombre completo de la clase del instalador (también es necesario incluir el <em>namespace</em> de la clase). Si el paquete define varios instaladores propios, este valor debe ser un array de nombres de clases.</li>
</ol>
<p>Ejemplo:</p>
<pre class="javascript code"><span class="br0">&#123;</span>
    <span class="st0">&quot;name&quot;</span><span class="sy0">:</span> <span class="st0">&quot;phpdocumentor/template-installer&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;type&quot;</span><span class="sy0">:</span> <span class="st0">&quot;composer-installer&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;license&quot;</span><span class="sy0">:</span> <span class="st0">&quot;MIT&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;autoload&quot;</span><span class="sy0">:</span> <span class="br0">&#123;</span>
        <span class="st0">&quot;psr-0&quot;</span><span class="sy0">:</span> <span class="br0">&#123;</span><span class="st0">&quot;phpDocumentor<span class="es0">\\</span>Composer&quot;</span><span class="sy0">:</span> <span class="st0">&quot;src/&quot;</span><span class="br0">&#125;</span>
    <span class="br0">&#125;</span><span class="sy0">,</span>
    <span class="st0">&quot;extra&quot;</span><span class="sy0">:</span> <span class="br0">&#123;</span>
        <span class="st0">&quot;class&quot;</span><span class="sy0">:</span> <span class="st0">&quot;phpDocumentor<span class="es0">\\</span>Composer<span class="es0">\\</span>TemplateInstaller&quot;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<h3>La clase del instalador</h3>
<p>La clase que define el instalador propio debe implementar la interfaz <code>Composer\Installer\InstallerInterface</code> o extender de algún otro instalador que implemente esa interfaz.</p>
<p>Puedes utilizar cualquier nombre para esta clase y puedes colocarla en cualquier directorio, siempre que se pueda cargar de forma automática y su <em>namespace</em> sea el que se indica en la propiedad <code>extra.class</code> del archivo <code>composer.json</code>.</p>
<p>En esta clase también se define el tipo concreto de paquete (en este caso, tipo de instalador) mediante la comprobación que se realiza en el método <code>supports()</code>.</p>
<p>Ten mucho cuidado al elegir el valor de la propiedad <code>type</code>, ya que podría entrar en conflicto con los tipos definidos por otros paquetes ajenos a tí. Para evitar posibles colisiones, se recomienda que su valor siga el formato <code>vendor-type</code> (primero el nombre de la persona o empresa que hace el paquete y después, el tipo de paquete concreto), como por ejemplo: <code>phpdocumentor-template</code>.</p>
<p>La clase <code>InstallerInterface</code> define los siguientes métodos (no olvides consultar su código fuente para ver en detalle los parámetros de cada método):</p>
<ul>
<li><code>supports()</code>, permite comprobar si el valor de la propiedad <code>type</code> coincide con el tipo de paquete definido en el archivo <code>composer.json</code> (observa cómo se realiza esta comprobación en el ejemplo siguiente).</li>
<li><code>isInstalled()</code>, indica si el paquete ya se encuentra instalado o no.</li>
<li><code>install()</code>, este es el método más importante, ya que incluye toda la lógica propia que se debe ejecutar al instalar el paquete.</li>
<li><code>update()</code>, este es el segundo método más importante, ya que incluye la lógica propia que se ejecuta cuando Composer se invoca con el comando <code>update</code> en vez de <code>install</code>.</li>
<li><code>uninstall()</code>, define la lógica que se ejecuta cuando se desinstala el paquete. Asegúrate de borrar y eliminar cualquier archivo o directorio propio de este paquete para dejar el proyecto tal y como estaba antes de instalar este paquete.</li>
<li><code>getInstallPath()</code>, devuelve la ruta donde se va a instalar el paquete. Esta ruta es relativa respecto del directorio donde se encuentr el archivo <code>composer.json</code>.</li>
</ul>
<p>Ejemplo:</p>
<pre class="php code"><span class="kw2">namespace</span> phpDocumentor\Composer<span class="sy0">;</span>
&nbsp;
<span class="kw2">use</span> Composer\Package\PackageInterface<span class="sy0">;</span>
<span class="kw2">use</span> Composer\Installer\LibraryInstaller<span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> TemplateInstaller <span class="kw2">extends</span> LibraryInstaller
<span class="br0">&#123;</span>
    <span class="co4">/**
     * {@inheritDoc}
     */</span>
    <span class="kw2">public</span> <span class="kw2">function</span> getInstallPath<span class="br0">&#40;</span>PackageInterface <span class="re0">$package</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$prefix</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">&#40;</span><span class="re0">$package</span><span class="sy0">-&gt;</span><span class="me1">getPrettyName</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">23</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span><span class="st_h">'phpdocumentor/template-'</span> <span class="sy0">!==</span> <span class="re0">$prefix</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">throw</span> <span class="kw2">new</span> \InvalidArgumentException<span class="br0">&#40;</span>
                <span class="st_h">'Unable to install template, phpdocumentor templates '</span>
                <span class="sy0">.</span><span class="st_h">'should always start their package name with '</span>
                <span class="sy0">.</span><span class="st_h">'&quot;phpdocumentor/template-&quot;'</span>
            <span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="kw1">return</span> <span class="st_h">'data/templates/'</span><span class="sy0">.</span><span class="kw3">substr</span><span class="br0">&#40;</span><span class="re0">$package</span><span class="sy0">-&gt;</span><span class="me1">getPrettyName</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">23</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co4">/**
     * {@inheritDoc}
     */</span>
    <span class="kw2">public</span> <span class="kw2">function</span> supports<span class="br0">&#40;</span><span class="re0">$packageType</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="st_h">'phpdocumentor-template'</span> <span class="sy0">===</span> <span class="re0">$packageType</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<p>Este ejemplo muestra lo sencillo que es extender el instalador <code>LibraryInstaller</code> para ajustarse a las necesidades particulares de una librería. En este caso, la librería elimina el prefijo <code>phpdocumentor/template-</code> para instalar el paquete en un directorio completamente distinto al original.</p>
<p>El resultado es que en vez de instalarse en el directorio por defecto <code>/vendor</code>, cualquier paquete de este tipo se instalará en el directorio <code>/data/templates/&lt;nombre_corto&gt;</code>.</p>

                    </div>

                    <div id="sidebar" class="col-sm-3">
                            <div class="module module-ad module-ad-responsive module-ad-sidebar">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1491000300253750"
         data-ad-slot="3770792827"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>


    <div class="module module-share">
    <h3>Compartir</h3>
    <ul>
    <li><a id="share_twitter" href="#" title="Compartir en Twitter">Twitter</a></li>
    <li><a id="share_facebook" href="#" title="Compartir en Facebook">Facebook</a></li>
    <li><a id="share_google" href="#" title="Compartir en Google+">Google+</a></li>
</ul>

<script type="text/javascript">
var title    = 'Los instaladores propios de Composer';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) {
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;

            ga('send', 'social', {
                'socialNetwork' : a.id.substr(6),
                'socialAction'  : 'share',
                'socialTarget'  : window.location
            });

            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

</div>


    
<div class="module module-tags">
    <h3>Etiquetas populares</h3>
    <ul class="tags-list">
                    <li class="">
                <a href="/tutoriales/composer/">composer</a>
            </li>
                    <li class="">
                <a href="/tutoriales/css/">css</a>
            </li>
                    <li class="">
                <a href="/tutoriales/dise%C3%B1o/">diseño</a>
            </li>
                    <li class="">
                <a href="/tutoriales/html/">html</a>
            </li>
                    <li class="">
                <a href="/tutoriales/javascript/">javascript</a>
            </li>
                    <li class="">
                <a href="/tutoriales/php/">php</a>
            </li>
                    <li class="">
                <a href="/tutoriales/programaci%C3%B3n/">programación</a>
            </li>
                    <li class="">
                <a href="/tutoriales/sistemas/">sistemas</a>
            </li>
                    <li class="">
                <a href="/tutoriales/symfony/">symfony</a>
            </li>
            </ul>
</div>


    <div class="module module-rss">
    <h3>Suscríbete gratis</h3>
    <ul class="list-unstyled text-links module-rss-feeds">
        <li>
            <i class="icon">RSS</i>
            <a href="/rss/tutoriales/todos.xml">
                <strong>Todos</strong> los tutoriales
            </a>
        </li>
        <li>
            <i class="icon">RSS</i>
            <a href="/rss/tutoriales/diseno.xml">
                Tutoriales de <strong>diseño</strong>
            </a>
        </li>
        <li>
            <i class="icon">RSS</i>
            <a href="/rss/tutoriales/programacion.xml">
                Tutoriales de <strong>programación</strong>
            </a>
        </li>
    </ul>
</div>

                    </div>
                            </div>

            <div id="footer">
                <div class="row">
                    <div class="col-xs-12 col-sm-9">
                        &copy; 2015 LibrosWeb.es
                        <a href="/sitio/contacto">Contacto</a>
                        <a href="https://plus.google.com/+librosweb">Novedades</a>
                        <a href="/sitio/condiciones">Condiciones</a>
                        <a href="/sitio/privacidad">Privacidad</a>
                    </div>
                    <div class="col-xs-12 col-sm-3 uptime">
                        3.111 días online
                    </div>
                </div>
            </div>

        </div>

                                    <script src="/js/app.js"></script>
            
            <script type="text/javascript">
                console.log($(window).width());
            </script>
            </body>
</html>
